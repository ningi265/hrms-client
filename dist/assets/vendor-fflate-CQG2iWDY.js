var r=Uint8Array,n=Uint16Array,e=Int32Array,f=new r([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),t=new r([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new r([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),o=function(r,f){for(var t=new n(31),a=0;a<31;++a)t[a]=f+=1<<r[a-1];var o=new e(t[30]);for(a=1;a<30;++a)for(var i=t[a];i<t[a+1];++i)o[i]=i-t[a]<<5|a;return{b:t,r:o}},i=o(f,2),v=i.b,u=i.r;v[28]=258,u[258]=28;for(var l=o(t,0).r,c=new n(32768),h=0;h<32768;++h){var s=(43690&h)>>1|(21845&h)<<1;s=(61680&(s=(52428&s)>>2|(13107&s)<<2))>>4|(3855&s)<<4,c[h]=((65280&s)>>8|(255&s)<<8)>>1}var w=function(r,e,f){for(var t=r.length,a=0,o=new n(e);a<t;++a)r[a]&&++o[r[a]-1];var i,v=new n(e);for(a=1;a<e;++a)v[a]=v[a-1]+o[a-1]<<1;if(f){i=new n(1<<e);var u=15-e;for(a=0;a<t;++a)if(r[a])for(var l=a<<4|r[a],h=e-r[a],s=v[r[a]-1]++<<h,w=s|(1<<h)-1;s<=w;++s)i[c[s]>>u]=l}else for(i=new n(t),a=0;a<t;++a)r[a]&&(i[a]=c[v[r[a]-1]++]>>15-r[a]);return i},g=new r(288);for(h=0;h<144;++h)g[h]=8;for(h=144;h<256;++h)g[h]=9;for(h=256;h<280;++h)g[h]=7;for(h=280;h<288;++h)g[h]=8;var y=new r(32);for(h=0;h<32;++h)y[h]=5;var d=w(g,9,0),m=w(y,5,0),M=function(r){return(r+7)/8|0},b=function(r,n,e){e<<=7&n;var f=n/8|0;r[f]|=e,r[f+1]|=e>>8},p=function(r,n,e){e<<=7&n;var f=n/8|0;r[f]|=e,r[f+1]|=e>>8,r[f+2]|=e>>16},x=function(e,f){for(var t=[],a=0;a<e.length;++a)e[a]&&t.push({s:a,f:e[a]});var o=t.length,i=t.slice();if(!o)return{t:I,l:0};if(1==o){var v=new r(t[0].s+1);return v[t[0].s]=1,{t:v,l:1}}t.sort(function(r,n){return r.f-n.f}),t.push({s:-1,f:25001});var u=t[0],l=t[1],c=0,h=1,s=2;for(t[0]={s:-1,f:u.f+l.f,l:u,r:l};h!=o-1;)u=t[t[c].f<t[s].f?c++:s++],l=t[c!=h&&t[c].f<t[s].f?c++:s++],t[h++]={s:-1,f:u.f+l.f,l:u,r:l};var w=i[0].s;for(a=1;a<o;++a)i[a].s>w&&(w=i[a].s);var g=new n(w+1),y=A(t[h-1],g,0);if(y>f){a=0;var d=0,m=y-f,M=1<<m;for(i.sort(function(r,n){return g[n.s]-g[r.s]||r.f-n.f});a<o;++a){var b=i[a].s;if(!(g[b]>f))break;d+=M-(1<<y-g[b]),g[b]=f}for(d>>=m;d>0;){var p=i[a].s;g[p]<f?d-=1<<f-g[p]++-1:++a}for(;a>=0&&d;--a){var x=i[a].s;g[x]==f&&(--g[x],++d)}y=f}return{t:new r(g),l:y}},A=function(r,n,e){return-1==r.s?Math.max(A(r.l,n,e+1),A(r.r,n,e+1)):n[r.s]=e},k=function(r){for(var e=r.length;e&&!r[--e];);for(var f=new n(++e),t=0,a=r[0],o=1,i=function(r){f[t++]=r},v=1;v<=e;++v)if(r[v]==a&&v!=e)++o;else{if(!a&&o>2){for(;o>138;o-=138)i(32754);o>2&&(i(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(i(a),--o;o>6;o-=6)i(8304);o>2&&(i(o-3<<5|8208),o=0)}for(;o--;)i(a);o=1,a=r[v]}return{c:f.subarray(0,t),n:e}},z=function(r,n){for(var e=0,f=0;f<n.length;++f)e+=r[f]*n[f];return e},D=function(r,n,e){var f=e.length,t=M(n+2);r[t]=255&f,r[t+1]=f>>8,r[t+2]=255^r[t],r[t+3]=255^r[t+1];for(var a=0;a<f;++a)r[t+a+4]=e[a];return 8*(t+4+f)},T=function(r,e,o,i,v,u,l,c,h,s,M){b(e,M++,o),++v[256];for(var A=x(v,15),T=A.t,U=A.l,I=x(u,15),j=I.t,q=I.l,B=k(T),C=B.c,E=B.n,F=k(j),G=F.c,H=F.n,J=new n(19),K=0;K<C.length;++K)++J[31&C[K]];for(K=0;K<G.length;++K)++J[31&G[K]];for(var L=x(J,7),N=L.t,O=L.l,P=19;P>4&&!N[a[P-1]];--P);var Q,R,S,V,W=s+5<<3,X=z(v,g)+z(u,y)+l,Y=z(v,T)+z(u,j)+l+14+3*P+z(J,N)+2*J[16]+3*J[17]+7*J[18];if(h>=0&&W<=X&&W<=Y)return D(e,M,r.subarray(h,h+s));if(b(e,M,1+(Y<X)),M+=2,Y<X){Q=w(T,U,0),R=T,S=w(j,q,0),V=j;var Z=w(N,O,0);b(e,M,E-257),b(e,M+5,H-1),b(e,M+10,P-4),M+=14;for(K=0;K<P;++K)b(e,M+3*K,N[a[K]]);M+=3*P;for(var $=[C,G],_=0;_<2;++_){var rr=$[_];for(K=0;K<rr.length;++K){var nr=31&rr[K];b(e,M,Z[nr]),M+=N[nr],nr>15&&(b(e,M,rr[K]>>5&127),M+=rr[K]>>12)}}}else Q=d,R=g,S=m,V=y;for(K=0;K<c;++K){var er=i[K];if(er>255){p(e,M,Q[(nr=er>>18&31)+257]),M+=R[nr+257],nr>7&&(b(e,M,er>>23&31),M+=f[nr]);var fr=31&er;p(e,M,S[fr]),M+=V[fr],fr>3&&(p(e,M,er>>5&8191),M+=t[fr])}else p(e,M,Q[er]),M+=R[er]}return p(e,M,Q[256]),M+R[256]},U=new e([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),I=new r(0),j=function(a,o,i,v,c,h){var s=h.z||a.length,w=new r(v+s+5*(1+Math.ceil(s/7e3))+c),g=w.subarray(v,w.length-c),y=h.l,d=7&(h.r||0);if(o){d&&(g[0]=h.r>>3);for(var m=U[o-1],b=m>>13,p=8191&m,x=(1<<i)-1,A=h.p||new n(32768),k=h.h||new n(x+1),z=Math.ceil(i/3),I=2*z,j=function(r){return(a[r]^a[r+1]<<z^a[r+2]<<I)&x},q=new e(25e3),B=new n(288),C=new n(32),E=0,F=0,G=h.i||0,H=0,J=h.w||0,K=0;G+2<s;++G){var L=j(G),N=32767&G,O=k[L];if(A[N]=O,k[L]=N,J<=G){var P=s-G;if((E>7e3||H>24576)&&(P>423||!y)){d=T(a,g,0,q,B,C,F,H,K,G-K,d),H=E=F=0,K=G;for(var Q=0;Q<286;++Q)B[Q]=0;for(Q=0;Q<30;++Q)C[Q]=0}var R=2,S=0,V=p,W=N-O&32767;if(P>2&&L==j(G-W))for(var X=Math.min(b,P)-1,Y=Math.min(32767,G),Z=Math.min(258,P);W<=Y&&--V&&N!=O;){if(a[G+R]==a[G+R-W]){for(var $=0;$<Z&&a[G+$]==a[G+$-W];++$);if($>R){if(R=$,S=W,$>X)break;var _=Math.min(W,$-2),rr=0;for(Q=0;Q<_;++Q){var nr=G-W+Q&32767,er=nr-A[nr]&32767;er>rr&&(rr=er,O=nr)}}}W+=(N=O)-(O=A[N])&32767}if(S){q[H++]=268435456|u[R]<<18|l[S];var fr=31&u[R],tr=31&l[S];F+=f[fr]+t[tr],++B[257+fr],++C[tr],J=G+R,++E}else q[H++]=a[G],++B[a[G]]}}for(G=Math.max(G,J);G<s;++G)q[H++]=a[G],++B[a[G]];d=T(a,g,y,q,B,C,F,H,K,G-K,d),y||(h.r=7&d|g[d/8|0]<<3,d-=7,h.h=k,h.p=A,h.i=G,h.w=J)}else{for(G=h.w||0;G<s+y;G+=65535){var ar=G+65535;ar>=s&&(g[d/8|0]=y,ar=s),d=D(g,d+1,a.subarray(G,ar))}h.i=s}return function(n,e,f){return(null==f||f>n.length)&&(f=n.length),new r(n.subarray(e,f))}(w,0,v+M(d)+c)},q=function(){var r=1,n=0;return{p:function(e){for(var f=r,t=n,a=0|e.length,o=0;o!=a;){for(var i=Math.min(o+2655,a);o<i;++o)t+=f+=e[o];f=(65535&f)+15*(f>>16),t=(65535&t)+15*(t>>16)}r=f,n=t},d:function(){return(255&(r%=65521))<<24|(65280&r)<<8|(255&(n%=65521))<<8|n>>8}}},B=function(r,n,e){for(;e;++n)r[n]=e,e>>>=8};function C(n,e){e||(e={});var f=q();f.p(n);var t=function(n,e,f,t,a){if(!a&&(a={l:1},e.dictionary)){var o=e.dictionary.subarray(-32768),i=new r(o.length+n.length);i.set(o),i.set(n,o.length),n=i,a.w=o.length}return j(n,null==e.level?6:e.level,null==e.mem?a.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(n.length)))):20:12+e.mem,f,t,a)}(n,e,e.dictionary?6:2,4);return function(r,n){var e=n.level,f=0==e?0:e<6?1:9==e?3:2;if(r[0]=120,r[1]=f<<6|(n.dictionary&&32),r[1]|=31-(r[0]<<8|r[1])%31,n.dictionary){var t=q();t.p(n.dictionary),B(r,2,t.d())}}(t,e),B(t,t.length-4,f.d()),t}var E="undefined"!=typeof TextDecoder&&new TextDecoder;try{E.decode(I,{stream:!0})}catch(F){}export{C as z};
