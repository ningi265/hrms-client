import{r as e,j as t}from"./react-core-DKrnZdd7.js";import"./lodash-BC2fgbp_.js";import"./vendor-vite-plugin-node-polyfills-BcdDH6qu.js";import"./vendor-scheduler-6ULW7vKx.js";import"./emotion-CPxGt_VH.js";import"./vendor-stylis-h7b_IEWc.js";import"./vendor-@babel-B7ZdkCnT.js";import"./vendor-clsx-BeLtu-UY.js";import"./vendor-prop-types-C8aDgg8x.js";import"./vendor-fast-equals-CDIYsFId.js";import"./vendor-file-selector-PolBDpjR.js";import"./vendor-tslib-hK--_phs.js";import"./vendor-attr-accept-CiyT7qSw.js";function i(){const[i,a]=e.useState(3e4),[n,s]=e.useState(3),[r,o]=e.useState([]),[l,c]=e.useState([]),[m,d]=e.useState(30),[u,y]=e.useState(!1),[p,h]=e.useState({}),[g,x]=e.useState(!1),[b,f]=e.useState(""),[q,j]=e.useState("balanced"),[N,v]=e.useState(!1),C=[{id:1,name:"Cooking Oil (500ml)",price:2500,unit:"bottle",category:"staple"},{id:2,name:"Tomatoes",price:100,unit:"piece",category:"vegetable"},{id:3,name:"Onions",price:80,unit:"piece",category:"vegetable"},{id:4,name:"Fish (tilapia)",price:3500,unit:"kg",category:"protein"},{id:5,name:"Chicken",price:2800,unit:"kg",category:"protein"},{id:6,name:"Beef",price:3200,unit:"kg",category:"protein"},{id:7,name:"Beans",price:1200,unit:"kg",category:"protein"},{id:8,name:"Eggs",price:120,unit:"piece",category:"protein"},{id:9,name:"Maize Flour",price:950,unit:"kg",category:"staple"},{id:10,name:"Rice",price:1500,unit:"kg",category:"staple"},{id:11,name:"Charcoal",price:700,unit:"kg",category:"utility"},{id:12,name:"Salt",price:400,unit:"kg",category:"staple"},{id:13,name:"Cabbage",price:350,unit:"head",category:"vegetable"},{id:14,name:"Potatoes",price:800,unit:"kg",category:"vegetable"},{id:15,name:"Carrots",price:600,unit:"kg",category:"vegetable"},{id:16,name:"Bananas",price:200,unit:"piece",category:"fruit"},{id:17,name:"Green peppers",price:100,unit:"piece",category:"vegetable"},{id:18,name:"Garlic",price:50,unit:"clove",category:"vegetable"},{id:19,name:"Ginger",price:100,unit:"piece",category:"vegetable"},{id:20,name:"Sugar",price:1200,unit:"kg",category:"staple"},{id:21,name:"Dried Fish (Usipa)",price:1800,unit:"kg",category:"protein"},{id:22,name:"Groundnuts",price:1500,unit:"kg",category:"protein"},{id:23,name:"Pumpkin Leaves",price:200,unit:"bunch",category:"vegetable"},{id:24,name:"Sweet Potatoes",price:600,unit:"kg",category:"staple"},{id:25,name:"Milk",price:800,unit:"liter",category:"protein"},{id:26,name:"Bread",price:500,unit:"loaf",category:"staple"},{id:27,name:"Tea Leaves",price:300,unit:"packet",category:"staple"},{id:28,name:"Lemons",price:50,unit:"piece",category:"fruit"},{id:29,name:"Cassava",price:400,unit:"kg",category:"staple"},{id:30,name:"Soy Pieces",price:1e3,unit:"kg",category:"protein"}];e.useEffect(()=>{if(!N){const e={};C.forEach(t=>{e[t.id]=!0}),h(e),v(!0)}},[N]);const k=[{id:1,name:"Fish with Rice and Vegetables",ingredients:[{item:"Fish (tilapia)",quantity:.5},{item:"Rice",quantity:.5},{item:"Tomatoes",quantity:3},{item:"Onions",quantity:2},{item:"Cooking Oil (500ml)",quantity:.1},{item:"Salt",quantity:.01},{item:"Cabbage",quantity:.3}],type:"dinner",cost:0,frequency:3},{id:2,name:"Beef Stew with Nsima",ingredients:[{item:"Beef",quantity:.5},{item:"Maize Flour",quantity:.6},{item:"Tomatoes",quantity:3},{item:"Onions",quantity:2},{item:"Cooking Oil (500ml)",quantity:.1},{item:"Salt",quantity:.01},{item:"Green peppers",quantity:2}],type:"dinner",cost:0,frequency:3},{id:3,name:"Beans with Nsima",ingredients:[{item:"Beans",quantity:.4},{item:"Maize Flour",quantity:.6},{item:"Tomatoes",quantity:2},{item:"Onions",quantity:1},{item:"Cooking Oil (500ml)",quantity:.1},{item:"Salt",quantity:.01}],type:"lunch",cost:0,frequency:4},{id:4,name:"Chicken Stew with Rice",ingredients:[{item:"Chicken",quantity:.5},{item:"Rice",quantity:.5},{item:"Tomatoes",quantity:3},{item:"Onions",quantity:2},{item:"Cooking Oil (500ml)",quantity:.1},{item:"Salt",quantity:.01},{item:"Carrots",quantity:.2}],type:"dinner",cost:0,frequency:2},{id:5,name:"Egg Stew with Nsima",ingredients:[{item:"Eggs",quantity:6},{item:"Maize Flour",quantity:.6},{item:"Tomatoes",quantity:3},{item:"Onions",quantity:2},{item:"Cooking Oil (500ml)",quantity:.1},{item:"Salt",quantity:.01},{item:"Green peppers",quantity:1}],type:"lunch",cost:0,frequency:3},{id:6,name:"Vegetable Rice",ingredients:[{item:"Rice",quantity:.5},{item:"Cabbage",quantity:.5},{item:"Carrots",quantity:.2},{item:"Tomatoes",quantity:2},{item:"Onions",quantity:2},{item:"Cooking Oil (500ml)",quantity:.1},{item:"Salt",quantity:.01}],type:"lunch",cost:0,frequency:2},{id:7,name:"Fish Curry with Nsima",ingredients:[{item:"Fish (tilapia)",quantity:.5},{item:"Maize Flour",quantity:.6},{item:"Tomatoes",quantity:3},{item:"Onions",quantity:2},{item:"Cooking Oil (500ml)",quantity:.1},{item:"Salt",quantity:.01},{item:"Garlic",quantity:3},{item:"Ginger",quantity:1}],type:"dinner",cost:0,frequency:2},{id:8,name:"Bean Stew with Rice",ingredients:[{item:"Beans",quantity:.4},{item:"Rice",quantity:.5},{item:"Tomatoes",quantity:2},{item:"Onions",quantity:1},{item:"Cooking Oil (500ml)",quantity:.1},{item:"Salt",quantity:.01}],type:"lunch",cost:0,frequency:3},{id:9,name:"Potato and Egg Stew",ingredients:[{item:"Potatoes",quantity:.5},{item:"Eggs",quantity:3},{item:"Tomatoes",quantity:2},{item:"Onions",quantity:1},{item:"Cooking Oil (500ml)",quantity:.1},{item:"Salt",quantity:.01}],type:"lunch",cost:0,frequency:2},{id:10,name:"Simple Nsima with Vegetables",ingredients:[{item:"Maize Flour",quantity:.6},{item:"Cabbage",quantity:.5},{item:"Tomatoes",quantity:2},{item:"Onions",quantity:1},{item:"Cooking Oil (500ml)",quantity:.1},{item:"Salt",quantity:.01}],type:"lunch",cost:0,frequency:3},{id:11,name:"Usipa with Nsima",ingredients:[{item:"Dried Fish (Usipa)",quantity:.3},{item:"Maize Flour",quantity:.6},{item:"Tomatoes",quantity:2},{item:"Onions",quantity:1},{item:"Cooking Oil (500ml)",quantity:.1},{item:"Salt",quantity:.01}],type:"dinner",cost:0,frequency:3},{id:12,name:"Groundnut Stew with Nsima",ingredients:[{item:"Groundnuts",quantity:.3},{item:"Maize Flour",quantity:.6},{item:"Tomatoes",quantity:2},{item:"Onions",quantity:1},{item:"Cooking Oil (500ml)",quantity:.1},{item:"Salt",quantity:.01},{item:"Pumpkin Leaves",quantity:1}],type:"dinner",cost:0,frequency:2},{id:13,name:"Sweet Potato Nsima with Beans",ingredients:[{item:"Sweet Potatoes",quantity:.5},{item:"Maize Flour",quantity:.3},{item:"Beans",quantity:.4},{item:"Tomatoes",quantity:2},{item:"Onions",quantity:1},{item:"Cooking Oil (500ml)",quantity:.1},{item:"Salt",quantity:.01}],type:"lunch",cost:0,frequency:2},{id:14,name:"Cassava with Fish",ingredients:[{item:"Cassava",quantity:.5},{item:"Fish (tilapia)",quantity:.5},{item:"Tomatoes",quantity:2},{item:"Onions",quantity:1},{item:"Cooking Oil (500ml)",quantity:.1},{item:"Salt",quantity:.01}],type:"dinner",cost:0,frequency:2},{id:15,name:"Tea with Bread",ingredients:[{item:"Bread",quantity:.5},{item:"Tea Leaves",quantity:.05},{item:"Sugar",quantity:.1},{item:"Milk",quantity:.2}],type:"breakfast",cost:0,frequency:5},{id:16,name:"Banana Pancakes",ingredients:[{item:"Maize Flour",quantity:.3},{item:"Bananas",quantity:3},{item:"Sugar",quantity:.05},{item:"Cooking Oil (500ml)",quantity:.05}],type:"breakfast",cost:0,frequency:2}],S=(e=q)=>{y(!0),x(!1);const t=(()=>{const e={};return C.forEach(t=>{p[t.id]&&(e[t.name]=t)}),k.map(t=>{let i=0,a=!0;return t.ingredients.forEach(t=>{const s=e[t.item];s?i+=s.price*t.quantity*n:a=!1}),{...t,cost:i,available:a}})})().filter(e=>e.available);if(0===t.length)return f("No recipes available with the selected ingredients. Please select more food items."),x(!0),void y(!1);const a=t.filter(e=>"breakfast"===e.type),s=t.filter(e=>"lunch"===e.type),r=t.filter(e=>"dinner"===e.type),o=s.length>0?s:t,l=r.length>0?r:t,d=a.length>0?a:t,u=[];let h=0;const g=e=>{const t=[];return e.forEach(e=>{for(let i=0;i<(e.frequency||1);i++)t.push(e)}),t},b=g(o),j=g(l),N=g(d),v=e=>{const t=[...e];for(let i=t.length-1;i>0;i--){const e=Math.floor(Math.random()*(i+1));[t[i],t[e]]=[t[e],t[i]]}return t};for(let n=1;n<=m;n++){let t,a,s;"variety"===e?(t=v(N)[0],a=v(b)[0],s=v(j)[0]):"economic"===e||n%3==0?(t=[...N].sort((e,t)=>e.cost-t.cost)[0],a=[...b].sort((e,t)=>e.cost-t.cost)[0],s=[...j].sort((e,t)=>e.cost-t.cost)[0]):(t=v(N)[0],a=v(b)[0],s=v(j)[0]);if(h+((t?.cost||0)+(a?.cost||0)+(s?.cost||0))>i){const e=(i-h)/(m-n+1),r=N.filter(t=>t.cost<=.3*e),o=b.filter(t=>t.cost<=.4*e),l=j.filter(t=>t.cost<=.4*e);r.length>0&&(t=r.sort((e,t)=>e.cost-t.cost)[0]),o.length>0&&(a=o.sort((e,t)=>e.cost-t.cost)[0]),l.length>0&&(s=l.sort((e,t)=>e.cost-t.cost)[0])}const r=(t?.cost||0)+(a?.cost||0)+(s?.cost||0);h+=r,u.push({day:n,breakfast:t?.name||"None",lunch:a?.name||"None",dinner:s?.name||"None",breakfastCost:t?.cost||0,lunchCost:a?.cost||0,dinnerCost:s?.cost||0,dayCost:r})}if(h>i){const e=i/h,t=u.map(t=>({...t,breakfastCost:t.breakfastCost*e,lunchCost:t.lunchCost*e,dinnerCost:t.dinnerCost*e,dayCost:t.dayCost*e}));c(t),w(t)}else c(u),w(u);y(!1)},w=e=>{const t={};e.forEach(e=>{if(e.breakfast&&"None"!==e.breakfast){const i=k.find(t=>t.name===e.breakfast);i&&i.ingredients.forEach(e=>{const i=e.quantity*n;t[e.item]?t[e.item]+=i:t[e.item]=i})}if(e.lunch&&"None"!==e.lunch){const i=k.find(t=>t.name===e.lunch);i&&i.ingredients.forEach(e=>{const i=e.quantity*n;t[e.item]?t[e.item]+=i:t[e.item]=i})}if(e.dinner&&"None"!==e.dinner){const i=k.find(t=>t.name===e.dinner);i&&i.ingredients.forEach(e=>{const i=e.quantity*n;t[e.item]?t[e.item]+=i:t[e.item]=i})}});const a=Object.keys(t).map(e=>{const i=C.find(t=>t.name===e);return i?{name:e,quantity:Math.ceil(t[e]),unit:i.unit,unitPrice:i.price,totalCost:0,priority:M(i),category:i.category}:null}).filter(e=>null!==e),s=O(a,i);o(s)},M=e=>e.name.includes("Maize Flour")?5:e.name.includes("Cooking Oil")||e.name.includes("Salt")?4:"protein"===e.category||["Tomatoes","Onions","Cabbage"].includes(e.name)?3:"vegetable"===e.category?2:1,O=(e,t)=>{const i=[...e].sort((e,t)=>t.priority!==e.priority?t.priority-e.priority:e.unitPrice-t.unitPrice);let a=t;const n=[];for(const s of i){const e=Math.floor(a/s.unitPrice);if(e>0){const t=s.priority>=4?1:0,i=Math.max(t,Math.min(s.quantity,e)),r=i*s.unitPrice;n.push({...s,quantity:i,totalCost:r}),a-=r}}if(a>0){n.sort((e,t)=>t.priority!==e.priority?t.priority-e.priority:e.unitPrice-t.unitPrice);for(const e of n){for(;a>=e.unitPrice;)e.quantity+=1,e.totalCost+=e.unitPrice,a-=e.unitPrice;if(0===a)break}}return n.sort((e,t)=>e.name.localeCompare(t.name))},P=r.reduce((e,t)=>e+t.totalCost,0),F=m>0?P/m:0,B=n>0?F/n:0;return e.useEffect(()=>{N&&Object.keys(p).length>0&&S()},[N]),t.jsxs("div",{className:"p-4 max-w-6xl mx-auto",children:[t.jsx("h1",{className:"text-3xl font-bold mb-6 text-center",children:"Malawian Household Food Budget Planner"}),t.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg mb-6",children:[t.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Settings"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",children:"Budget (MWK)"}),t.jsx("input",{type:"number",value:i,onChange:e=>a(Number(e.target.value)),className:"w-full p-2 border rounded",min:"0"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",children:"Household Size"}),t.jsx("input",{type:"number",value:n,onChange:e=>s(Number(e.target.value)),className:"w-full p-2 border rounded",min:"1"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",children:"Days to Plan"}),t.jsx("input",{type:"number",value:m,onChange:e=>d(Number(e.target.value)),className:"w-full p-2 border rounded",min:"1",max:"90"})]})]}),t.jsxs("div",{className:"mt-4",children:[t.jsx("label",{className:"block mb-2 font-medium",children:"Meal Plan Optimization"}),t.jsxs("select",{value:q,onChange:e=>j(e.target.value),className:"w-full md:w-1/3 p-2 border rounded",children:[t.jsx("option",{value:"balanced",children:"Balanced (Mix of economy and variety)"}),t.jsx("option",{value:"economic",children:"Economic (Prioritize lower cost meals)"}),t.jsx("option",{value:"variety",children:"Variety (Prioritize diverse meals)"})]})]})]}),t.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg mb-6",children:[t.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Select Available Food Items"}),t.jsxs("div",{children:[t.jsxs("div",{className:"mb-4",children:[t.jsx("h3",{className:"font-medium mb-2",children:"Food Categories:"}),t.jsxs("div",{className:"flex flex-wrap gap-2",children:[["staple","protein","vegetable","fruit","utility"].map(e=>t.jsxs("button",{className:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",onClick:()=>{const t={...p};C.forEach(i=>{i.category===e&&(t[i.id]=!0)}),h(t)},children:["Select All ",e.charAt(0).toUpperCase()+e.slice(1),"s"]},e)),t.jsx("button",{className:"px-3 py-1 bg-gray-600 text-white rounded text-sm hover:bg-gray-700",onClick:()=>{const e={};C.forEach(t=>{e[t.id]=!1}),h(e)},children:"Clear All"})]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:C.map(e=>t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",id:`food-item-${e.id}`,checked:p[e.id]||!1,onChange:()=>{return t=e.id,void h(e=>({...e,[t]:!e[t]}));var t},className:"mr-2"}),t.jsxs("label",{htmlFor:`food-item-${e.id}`,className:"flex-1",children:[e.name," - MWK ",e.price,"/",e.unit]})]},e.id))}),t.jsx("button",{onClick:()=>S(q),className:"mt-4 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",disabled:u,children:u?"Generating...":"Generate Meal Plan"})]})]}),g&&t.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 p-4 mb-6",children:t.jsx("p",{className:"text-red-700",children:b})}),t.jsxs("div",{className:"bg-green-100 p-4 rounded-lg mb-6",children:[t.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Budget Allocation"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:"Total Budget:"}),t.jsxs("p",{className:"text-2xl",children:["MWK ",i.toLocaleString()]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:"Allocated Spending:"}),t.jsxs("p",{className:"text-2xl",children:["MWK ",P.toLocaleString()]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:"Daily Food Budget:"}),t.jsxs("p",{className:"text-xl",children:["MWK ",F.toFixed(2)]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:"Per Person Daily:"}),t.jsxs("p",{className:"text-xl",children:["MWK ",B.toFixed(2)]})]})]}),t.jsxs("div",{className:"mt-3 text-green-700",children:["âœ“ Your entire budget of MWK ",i.toLocaleString()," has been allocated to essential food items."]})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Shopping List"}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full bg-white border",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"bg-gray-100",children:[t.jsx("th",{className:"py-2 px-4 border text-left",children:"Item"}),t.jsx("th",{className:"py-2 px-4 border text-left",children:"Quantity"}),t.jsx("th",{className:"py-2 px-4 border text-left",children:"Unit Price (MWK)"}),t.jsx("th",{className:"py-2 px-4 border text-left",children:"Total (MWK)"})]})}),t.jsxs("tbody",{children:[r.map((e,i)=>t.jsxs("tr",{children:[t.jsx("td",{className:"py-2 px-4 border",children:e.name}),t.jsxs("td",{className:"py-2 px-4 border",children:[e.quantity," ",e.unit]}),t.jsx("td",{className:"py-2 px-4 border",children:e.unitPrice.toLocaleString()}),t.jsx("td",{className:"py-2 px-4 border",children:e.totalCost.toLocaleString()})]},i)),t.jsxs("tr",{className:"bg-gray-50 font-bold",children:[t.jsx("td",{className:"py-2 px-4 border",colSpan:"3",children:"Total"}),t.jsx("td",{className:"py-2 px-4 border",children:P.toLocaleString()})]})]})]})})]}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Meal Plan"}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full bg-white border",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"bg-gray-100",children:[t.jsx("th",{className:"py-2 px-4 border text-left",children:"Day"}),t.jsx("th",{className:"py-2 px-4 border text-left",children:"Breakfast"}),t.jsx("th",{className:"py-2 px-4 border text-left",children:"Breakfast Cost"}),t.jsx("th",{className:"py-2 px-4 border text-left",children:"Lunch"}),t.jsx("th",{className:"py-2 px-4 border text-left",children:"Lunch Cost"}),t.jsx("th",{className:"py-2 px-4 border text-left",children:"Dinner"}),t.jsx("th",{className:"py-2 px-4 border text-left",children:"Dinner Cost"}),t.jsx("th",{className:"py-2 px-4 border text-left",children:"Day Total"})]})}),t.jsx("tbody",{children:l.map((e,i)=>t.jsxs("tr",{children:[t.jsxs("td",{className:"py-2 px-4 border",children:["Day ",e.day]}),t.jsx("td",{className:"py-2 px-4 border",children:e.lunch}),t.jsxs("td",{className:"py-2 px-4 border",children:["MWK ",e.lunchCost.toLocaleString()]}),t.jsx("td",{className:"py-2 px-4 border",children:e.dinner}),t.jsxs("td",{className:"py-2 px-4 border",children:["MWK ",e.dinnerCost.toLocaleString()]}),t.jsxs("td",{className:"py-2 px-4 border",children:["MWK ",e.dayCost.toLocaleString()]})]},i))})]})})]})]})}export{i as default};
