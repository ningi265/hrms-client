import{u as e,r as t,j as s,H as a,ag as r,p as i,ac as n,ar as l,bQ as o,t as d,ak as c,_ as m,D as x,am as u,X as p,bR as g,l as h,Z as b,at as f,o as j,a as y,a9 as v,aa as N,ab as w,a5 as k,V as C,B as S,ad as z,Y as D,ae as A,U as P,af as I,m as T,ah as L,v as $,ai as F,aj as E,aR as O,aB as M,br as _,a4 as R,bS as U,aQ as B,h as W,q,aE as H,aA as V,i as G,aq as Y,M as J,aJ as Q,au as K,I as Z,g as X,av as ee,aD as te,az as se,y as ae,a8 as re,x as ie,J as ne,bM as le,bT as oe}from"./react-core-DKrnZdd7.js";import{u as de}from"./context-k3FZ8Vno.js";import{P as ce}from"./vendor-prop-types-C8aDgg8x.js";import{u as me,f as xe,s as ue,B as pe,e as ge,D as he,g as be,i as fe,j as je,I as ye,h as ve,k as Ne,l as we,T as ke,m as Ce}from"./mui-material-9NDCc7EL.js";import{M as Se}from"./mui-icons-Upi8wDss.js";import{i as ze,a as De,b as Ae,f as Pe}from"./date-fns-CUr-g5D8.js";import{m as Ie,A as Te}from"./vendor-framer-motion-DCU7qowG.js";import{V as Le,A as $e}from"./page-dashboard-BNM7eJ18.js";import{T as Fe,c as Ee,M as Oe}from"./page-requisitions-manage-D_nY_aOA.js";import{N as Me,E as _e}from"./page-requisitions-CHsVtKkw.js";import{U as Re}from"./page-User-iTIpKLVt.js";import{R as Ue,P as Be,c as We,d as qe,T as He,A as Ve,C as Ge,X as Ye,Y as Je,a as Qe,h as Ke,B as Ze,b as Xe,e as et,f as tt}from"./vendor-recharts-BfOGTqeh.js";const st=({title:e,value:t,icon:a,color:r,trend:i,subtitle:n,prefix:l="",suffix:o=""})=>s.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 p-3 hover:shadow-sm transition-shadow",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("div",{className:"p-2 rounded-xl "+("blue"===r?"bg-blue-50":"green"===r?"bg-emerald-50":"purple"===r?"bg-purple-50":"orange"===r?"bg-orange-50":"red"===r?"bg-red-50":"bg-gray-50"),children:s.jsx(a,{size:16,className:"blue"===r?"text-blue-600":"green"===r?"text-emerald-600":"purple"===r?"text-purple-600":"orange"===r?"text-orange-600":"red"===r?"text-red-600":"text-gray-600"})}),i&&s.jsxs("span",{className:"text-xs font-medium px-2 py-1 rounded-full "+(i>0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:[i>0?"+":"",i,"%"]})]}),s.jsxs("div",{className:"text-xl font-bold text-gray-900 mb-1",children:[l,t,o]}),s.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:e}),n&&s.jsx("div",{className:"text-xs text-gray-400 mt-1",children:n})]}),at=({po:e,onConfirm:t,onUpdateDelivery:r,isLoading:d})=>{const c=e=>{switch(e?.toLowerCase()){case"confirmed":return"bg-green-100 text-green-800";case"pending":return"bg-amber-100 text-amber-800";case"shipped":return"bg-blue-100 text-blue-800";case"delivered":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},m=e=>{switch(e?.toLowerCase()){case"confirmed":return s.jsx(i,{size:14});case"pending":return s.jsx(n,{size:14});case"shipped":return s.jsx(l,{size:14});case"delivered":return s.jsx(o,{size:14});default:return s.jsx(a,{size:14})}};return s.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 p-4 hover:shadow-sm transition-shadow",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"p-2 bg-orange-50 rounded-xl",children:s.jsx(u,{className:"w-4 h-4 text-orange-600"})}),s.jsxs("div",{children:[s.jsxs("h4",{className:"font-semibold text-sm text-gray-900",children:["PO #",e._id.slice(-8).toUpperCase()]}),s.jsx("p",{className:"text-xs text-gray-500",children:e.createdAt?new Date(e.createdAt).toLocaleDateString():"N/A"})]})]}),s.jsx("div",{className:"text-right",children:s.jsx("div",{className:"text-lg font-bold text-gray-900",children:(x=e.totalAmount,new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(x))})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[s.jsxs("div",{className:"text-center p-2 bg-gray-50 rounded-xl",children:[s.jsxs("div",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${c(e.vendorConfirmation?.confirmed?"confirmed":"pending")}`,children:[m(e.vendorConfirmation?.confirmed?"confirmed":"pending"),s.jsx("span",{className:"ml-1",children:e.vendorConfirmation?.confirmed?"Confirmed":"Pending"})]}),s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Confirmation"})]}),s.jsxs("div",{className:"text-center p-2 bg-gray-50 rounded-xl",children:[s.jsxs("div",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${c(e.deliveryStatus||"pending")}`,children:[m(e.deliveryStatus||"pending"),s.jsx("span",{className:"ml-1 capitalize",children:e.deliveryStatus||"Pending"})]}),s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Delivery"})]})]}),s.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-gray-100",children:[s.jsx("div",{className:"flex gap-2",children:s.jsx("button",{className:"p-2 text-gray-400 hover:text-blue-600 rounded-xl transition-colors",children:s.jsx(j,{size:14})})}),s.jsx("div",{className:"flex gap-2",children:e.vendorConfirmation?.confirmed?"delivered"!==e.deliveryStatus?s.jsxs("button",{onClick:()=>r(e),className:"px-3 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-colors font-medium text-xs flex items-center gap-1",children:[s.jsx(l,{size:14}),"shipped"===e.deliveryStatus?"Deliver":"Ship"]}):s.jsxs("span",{className:"inline-flex items-center px-3 py-2 bg-green-100 text-green-800 rounded-xl text-xs font-medium",children:[s.jsx(o,{size:14,className:"mr-1"}),"Complete"]}):s.jsxs("button",{onClick:()=>t(e._id),disabled:d===e._id,className:"px-3 py-2 bg-green-500 text-white rounded-xl hover:bg-green-600 transition-colors font-medium text-xs flex items-center gap-1 disabled:opacity-50",children:[d===e._id?s.jsx("div",{className:"w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin"}):s.jsx(i,{size:14}),"Confirm"]})})]})]});var x};function rt(){e();const[j,y]=t.useState(null),[v,N]=t.useState([]),[w,k]=t.useState(!0),[C,S]=t.useState(""),[z,D]=t.useState(!1),[A,P]=t.useState(null),[I,T]=t.useState(""),[L,$]=t.useState(""),[F,E]=t.useState(""),[O,M]=t.useState("all"),[_,R]=t.useState(null),U="https://backend.nexusmwi.com";t.useEffect(()=>{(async()=>{try{const e=localStorage.getItem("token"),t=await fetch(`${U}/api/vendors/me`,{headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw new Error("Failed to fetch vendor details");const s=await t.json();y(s._id)}catch(e){S("Could not fetch vendor details.")}})()},[U]),t.useEffect(()=>{j&&(async()=>{if(j)try{const e=localStorage.getItem("token"),t=await fetch(`${U}/api/purchase-orders/vendor`,{headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw new Error("Failed to fetch purchase orders");const s=await t.json();if(!s.success)throw new Error(s.message||"Failed to fetch purchase orders");N(s.data)}catch(e){S("Could not fetch purchase orders.")}finally{k(!1)}})()},[j,U]);const B=v.filter(e=>{const t=e._id.toLowerCase().includes(F.toLowerCase());let s=!0;return"confirmed"===O?s=e.vendorConfirmation?.confirmed:"pending"===O?s=!e.vendorConfirmation?.confirmed:"shipped"===O?s="shipped"===e.deliveryStatus:"delivered"===O&&(s="delivered"===e.deliveryStatus),t&&s}),W=v?.length||0,q=v?.filter(e=>e.vendorConfirmation?.confirmed)?.length||0,H=v?.filter(e=>!e.vendorConfirmation?.confirmed)?.length||0,V=v?.filter(e=>"shipped"===e.deliveryStatus)?.length||0,G=v?.filter(e=>"delivered"===e.deliveryStatus)?.length||0,Y=v?.reduce((e,t)=>e+(t.totalAmount||0),0)||0,J=async e=>{R(e);try{const t=localStorage.getItem("token"),s=await fetch(`${U}/api/purchase-orders/${e}/vendor/confirm`,{method:"PUT",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({vendorId:j})});if(!s.ok)throw new Error(`Failed to confirm purchase order. Status: ${s.status}`);N(t=>t.map(t=>t._id===e?{...t,vendorConfirmation:{confirmed:!0}}:t)),S("")}catch(t){S("Could not confirm purchase order.")}finally{R(null)}},Q=e=>{P(e),e.trackingNumber?T(e.trackingNumber):T((()=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ",t="0123456789";let s="";for(let a=0;a<2;a++)s+=e[Math.floor(26*Math.random())];for(let a=0;a<4;a++)s+=t[Math.floor(10*Math.random())];return s})()),$(e.carrier||""),D(!0)},K=()=>{D(!1),T(""),$(""),P(null)},Z=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),X=({isVisible:e,message:t="Processing..."})=>e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-2xl p-6 flex items-center gap-3",children:[s.jsx(f,{className:"animate-spin w-6 h-6 text-blue-500"}),s.jsx("span",{className:"font-medium",children:t})]})}):null;return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx(X,{isVisible:w,message:"Loading Purchase Orders..."}),s.jsxs("main",{className:"p-4 space-y-4 max-w-7xl mx-auto",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:"Purchase Orders"}),s.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Manage your assigned purchase orders and delivery tracking"})]})}),C&&s.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded-2xl flex items-center gap-2",children:[s.jsx(a,{size:18}),s.jsx("span",{className:"text-sm",children:C})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3",children:[s.jsx(st,{title:"Total POs",value:W,icon:r,color:"blue",subtitle:"All orders"}),s.jsx(st,{title:"Confirmed",value:q,icon:i,color:"green",trend:5,subtitle:"Ready to ship"}),s.jsx(st,{title:"Pending",value:H,icon:n,color:"orange",subtitle:"Awaiting action"}),s.jsx(st,{title:"Shipped",value:V,icon:l,color:"blue",subtitle:"In transit"}),s.jsx(st,{title:"Delivered",value:G,icon:o,color:"purple",subtitle:"Completed"}),s.jsx(st,{title:"Total Value",value:Z(Y),icon:d,color:"green",trend:8,subtitle:"Order value"})]}),s.jsx("div",{className:"bg-white rounded-2xl border border-gray-200 p-4",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 items-center justify-between",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 items-center flex-1",children:[s.jsxs("div",{className:"relative flex-1 max-w-sm",children:[s.jsx(c,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search by PO number...",value:F,onChange:e=>E(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-2xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500 text-sm"})]}),s.jsxs("select",{value:O,onChange:e=>M(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-2xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500 text-sm font-medium",children:[s.jsx("option",{value:"all",children:"All Statuses"}),s.jsx("option",{value:"pending",children:"Pending"}),s.jsx("option",{value:"confirmed",children:"Confirmed"}),s.jsx("option",{value:"shipped",children:"Shipped"}),s.jsx("option",{value:"delivered",children:"Delivered"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>{k(!0);(async()=>{try{const e=localStorage.getItem("token"),t=await fetch(`${U}/api/purchase-orders/vendor`,{headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw new Error("Failed to fetch purchase orders");const s=await t.json();if(!s.success)throw new Error(s.message||"Failed to fetch purchase orders");N(s.data)}catch(e){S("Could not refresh purchase orders.")}finally{k(!1)}})()},disabled:w,className:"p-2 bg-gray-100 text-gray-700 rounded-2xl hover:bg-gray-200 transition-colors disabled:opacity-50",children:s.jsx(m,{size:16,className:w?"animate-spin":""})}),s.jsxs("button",{className:"px-3 py-2 bg-gray-100 text-gray-700 rounded-2xl hover:bg-gray-200 transition-colors text-sm font-medium flex items-center gap-1",children:[s.jsx(x,{size:14}),"Export"]})]})]})}),s.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(u,{className:"w-5 h-5 text-gray-600"}),s.jsx("h3",{className:"font-semibold text-gray-900",children:"Purchase Orders"})]}),s.jsx("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:s.jsxs("span",{children:[B.length," of ",W," orders"]})})]}),0===B.length?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:s.jsx(u,{size:32,className:"text-gray-400"})}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:F||"all"!==O?"No orders match your filters":"No purchase orders available"}),s.jsx("p",{className:"text-gray-500 mb-4",children:F||"all"!==O?"Try adjusting your search criteria or filters.":"There are currently no purchase orders assigned to you."})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:B.map(e=>s.jsx(at,{po:e,onConfirm:J,onUpdateDelivery:Q,isLoading:_},e._id))})]})]}),z&&A&&s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md max-h-[90vh] overflow-hidden shadow-2xl",children:[s.jsx("div",{className:"px-5 py-4 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[s.jsx(l,{size:20,className:"text-blue-500"}),"Update Delivery"]}),s.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:["PO: ",s.jsx("span",{className:"font-semibold",children:A._id.slice(-8).toUpperCase()})]})]}),s.jsx("button",{onClick:K,className:"p-2 hover:bg-gray-100 rounded-2xl transition-colors",children:s.jsx(p,{size:20})})]})}),s.jsx("div",{className:"p-5 max-h-[70vh] overflow-y-auto",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-gray-50 rounded-2xl p-4",children:[s.jsxs("h3",{className:"text-sm font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[s.jsx(u,{size:16}),"Order Details"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Amount:"}),s.jsx("p",{className:"font-semibold text-gray-900",children:Z(A.totalAmount)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Status:"}),s.jsx("p",{className:"font-semibold text-gray-900 capitalize",children:A.deliveryStatus||"Pending"})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[s.jsx(g,{size:14}),"Tracking Number"]}),s.jsx("input",{type:"text",value:I,readOnly:!!A.trackingNumber,className:"w-full px-3 py-2 border border-gray-300 rounded-2xl bg-gray-50 text-gray-700 font-mono text-sm"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-generated tracking number"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[s.jsx(h,{size:14}),"Carrier *"]}),s.jsx("input",{type:"text",value:L,onChange:e=>$(e.target.value),placeholder:"e.g., FedEx, UPS, DHL",readOnly:!!A.carrier,className:"w-full px-3 py-2 border border-gray-300 rounded-2xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",required:!0})]}),s.jsx("div",{className:"bg-blue-50 rounded-2xl p-3",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("div",{className:"p-1 bg-blue-500 rounded-lg",children:s.jsx(b,{size:12,className:"text-white"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-blue-900 text-sm",children:"Next Action"}),s.jsx("p",{className:"text-blue-800 text-xs",children:"shipped"===A.deliveryStatus?"Mark as delivered once it reaches the customer.":"Mark as shipped once dispatched from your facility."})]})]})})]}),s.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[s.jsx("button",{onClick:()=>(async e=>{try{if(!A)throw new Error("Missing PO");const t=localStorage.getItem("token"),s="shipped"===e?{deliveryStatus:e,trackingNumber:I,carrier:L,vendorId:j}:{deliveryStatus:e,vendorId:j},a=await fetch(`${U}/api/purchase-orders/${A._id}/delivery-status`,{method:"PUT",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify(s)});if(!a.ok){const e=await a.json();throw new Error(e.message||"Failed to update delivery status")}N(t=>t.map(t=>t._id===A._id?{...t,deliveryStatus:e,trackingNumber:"shipped"===e?I:t.trackingNumber,carrier:"shipped"===e?L:t.carrier}:t)),K(),S("")}catch(t){S(t.message)}})("shipped"===A.deliveryStatus?"delivered":"shipped"),disabled:!L,className:"flex-1 px-4 py-3 bg-blue-500 text-white rounded-2xl hover:bg-blue-600 transition-colors font-semibold disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-sm",children:"shipped"===A.deliveryStatus?s.jsxs(s.Fragment,{children:[s.jsx(o,{size:16}),"Mark Delivered"]}):s.jsxs(s.Fragment,{children:[s.jsx(l,{size:16}),"Mark Shipped"]})}),s.jsxs("button",{onClick:K,className:"px-4 py-3 bg-gray-100 text-gray-700 rounded-2xl hover:bg-gray-200 transition-colors font-semibold flex items-center justify-center gap-2 text-sm",children:[s.jsx(p,{size:16}),"Cancel"]})]})]})})]})})]})}const it=Object.freeze(Object.defineProperty({__proto__:null,default:rt},Symbol.toStringTag,{value:"Module"})),nt="#141b2d",lt="rgba(145, 158, 171, 0.08)",ot="rgba(85, 105, 255, 0.16)",dt="#5569ff",ct="rgba(85, 105, 255, 0.24)",mt="#e0e0e0",xt="rgba(224, 224, 224, 0.6)",ut="#90a0b7",pt="#5569ff",gt="rgba(145, 158, 171, 0.16)",ht=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("rect",{x:"3",y:"3",width:"7",height:"9",rx:"1"}),s.jsx("rect",{x:"14",y:"3",width:"7",height:"5",rx:"1"}),s.jsx("rect",{x:"14",y:"12",width:"7",height:"9",rx:"1"}),s.jsx("rect",{x:"3",y:"16",width:"7",height:"5",rx:"1"})]}),bt=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),s.jsx("circle",{cx:"9",cy:"7",r:"4"}),s.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),s.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),ft=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),s.jsx("path",{d:"M14 2v6h6"}),s.jsx("path",{d:"m9 15 2 2 4-4"}),s.jsx("path",{d:"M16 13h0"})]}),jt=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),s.jsx("path",{d:"M14 2v6h6"}),s.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),s.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),s.jsx("polyline",{points:"10 9 9 9 8 9"})]}),yt=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"}),s.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),s.jsx("path",{d:"M16 10a4 4 0 0 1-8 0"})]}),vt=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("rect",{x:"2",y:"4",width:"20",height:"16",rx:"2"}),s.jsx("path",{d:"M7 15h0M2 9.5h20"}),s.jsx("path",{d:"M12 15h5"}),s.jsx("path",{d:"M9 11h6"})]}),Nt=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("path",{d:"M3 3v18h18"}),s.jsx("path",{d:"M18 17V9"}),s.jsx("path",{d:"M13 17V5"}),s.jsx("path",{d:"M8 17v-3"})]}),wt=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"}),s.jsx("path",{d:"m3.3 7 8.7 5 8.7-5"}),s.jsx("path",{d:"M12 22V12"})]}),kt=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),s.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),Ct=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),s.jsx("polyline",{points:"16 17 21 12 16 7"}),s.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),St=ue(Ne)(({theme:e})=>({color:mt,margin:"2px 12px",padding:"10px 16px",borderRadius:"6px",transition:"all 0.15s ease-in-out","&.Mui-selected":{backgroundColor:ot,color:dt,"&:hover":{backgroundColor:ct},"& .MuiListItemIcon-root":{color:dt},"& .MuiTypography-root":{fontWeight:500}},"&:hover":{backgroundColor:lt}})),zt=ue(ke)(({theme:e,open:t})=>({color:xt,fontSize:"0.6875rem",fontWeight:500,textTransform:"uppercase",padding:t?"16px 28px 6px":"16px 0",letterSpacing:"0.6px",textAlign:t?"left":"center",opacity:t?1:0,height:t?"auto":0,marginBottom:t?"4px":0,transition:"opacity 0.2s ease, height 0.2s ease, margin 0.2s ease"})),Dt=ue(ve,{shouldForwardProp:e=>"open"!==e&&"isMobile"!==e})(({theme:e,open:t,isMobile:s})=>({width:t?256:70,flexShrink:0,whiteSpace:"nowrap",boxSizing:"border-box",overflowX:"hidden","& .MuiDrawer-paper":{backgroundColor:nt,borderRight:"none",width:t?256:s?0:70,overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.standard})}})),At=ue(we)(({theme:e,selected:t})=>({minWidth:0,marginRight:16,justifyContent:"center",color:t?pt:ut,transition:"color 0.15s ease, transform 0.2s ease","&:hover":{transform:"scale(1.05)"}})),Pt=ue(pe)(({theme:e})=>({display:"flex",alignItems:"center",justifyContent:"center",padding:"20px 12px 10px",backgroundColor:"transparent"})),It=ue(pe)(({theme:e,open:t})=>({width:"100%",display:"flex",alignItems:"center",justifyContent:t?"space-between":"center",transition:"all 0.3s ease"}));ue(pe)(({theme:e})=>({display:"flex",alignItems:"center",justifyContent:"center",width:36,height:36,borderRadius:"8px",backgroundColor:"rgba(85, 105, 255, 0.8)",backgroundImage:"linear-gradient(135deg, #5569ff 0%, #6b8aff 100%)",boxShadow:"0 2px 10px rgba(85, 105, 255, 0.4)",color:"#ffffff",fontWeight:700,fontSize:"1.2rem",cursor:"pointer",transition:"all 0.3s ease","&:hover":{transform:"scale(1.05)"}}));const Tt=ue(ye)(({theme:e})=>({color:xt,"&:hover":{backgroundColor:"transparent"},transition:"all 0.15s ease",padding:0})),Lt=ue(Ce)(({theme:e})=>({"& .MuiBadge-badge":{right:-4,top:4,minWidth:18,height:18,fontSize:"0.625rem",fontWeight:600,padding:"0 4px",borderRadius:9,backgroundColor:"#ef4444",color:"white"}})),$t=ue("span")(({theme:e})=>({position:"absolute",top:8,right:8,width:8,height:8,borderRadius:"50%",backgroundColor:"#ef4444","&::after":{content:'""',position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"pulse 2s infinite",backgroundColor:"rgba(239, 68, 68, 0.7)"},"@keyframes pulse":{"0%":{transform:"scale(1)",opacity:1},"70%":{transform:"scale(2)",opacity:0},"100%":{transform:"scale(2.5)",opacity:0}}})),Ft=({stats:a=Et,activeSection:r,handleSectionChange:i,onSidebarToggle:n,user:l})=>{const o=me(),d=e();y();const c=xe(o.breakpoints.down("md")),[m,x]=t.useState(!c),[u,p]=t.useState(!1),[g,h]=t.useState(""),[b,f]=t.useState(!1);t.useEffect(()=>{const e=localStorage.getItem("sidebarOpen");if(null!==e&&!c){const t=JSON.parse(e);x(t),n?.(t)}},[c,n]);const j=()=>{if(!b)if(f(!0),c)p(!u),setTimeout(()=>f(!1),300);else{const e=!m;x(e),localStorage.setItem("sidebarOpen",JSON.stringify(e)),n?.(e),window.dispatchEvent(new CustomEvent("sidebarToggle",{detail:{open:e}})),setTimeout(()=>f(!1),300)}},N=[{id:"main",label:"Main",items:[{id:"vendor-dash",label:"Dashboard",icon:s.jsx(ht,{}),badge:null},{id:"registration-management",label:"Registration",icon:s.jsx(bt,{})},{id:"tenders",label:"Tenders",icon:s.jsx(ft,{})},{id:"rfq",label:"RFQs",icon:s.jsx(jt,{}),badge:a.rfqs?.counts?.open||null},{id:"purchase-order",label:"Purchase Orders",icon:s.jsx(yt,{}),badge:a.purchaseOrders?.counts?.pending||null},{id:"invoices",label:"Invoices",icon:s.jsx(vt,{}),badge:a.invoices?.counts?.pending||null}]},{id:"reports",label:"Reports",items:[{id:"analytics",label:"Analytics",icon:s.jsx(Nt,{}),badge:null},{id:"reports",label:"Reports",icon:s.jsx(wt,{}),badge:null}]}],w=[{id:"settings",label:"Settings",icon:s.jsx(kt,{}),onClick:()=>d("/settings")},{id:"logout",label:"Logout",icon:s.jsx(Ct,{}),onClick:()=>{}}],k=(e,t)=>s.jsxs(v.Fragment,{children:[t>0&&m&&s.jsx(he,{sx:{borderColor:gt,margin:"12px 24px 8px",opacity:.4}}),s.jsx(zt,{open:m,children:e.label}),s.jsx(be,{disablePadding:!0,sx:{mb:1},children:e.items.map(e=>(e=>{const t=r===e.id,a=g===e.id,n=s.jsxs(St,{selected:t,onClick:()=>i(e.id),onMouseEnter:()=>h(e.id),onMouseLeave:()=>h(""),sx:{justifyContent:m?"initial":"center",px:2,py:1,minHeight:44,position:"relative",overflow:"hidden","&::after":t?{content:'""',position:"absolute",top:"50%",left:0,transform:"translateY(-50%)",width:"3px",height:"50%",backgroundColor:dt,borderRadius:"0 3px 3px 0"}:{}},children:[s.jsx(At,{selected:t,children:v.cloneElement(e.icon,{style:{transform:a&&!t?"scale(1.1)":"scale(1)",transition:"transform 0.2s ease"}})}),m&&s.jsxs(s.Fragment,{children:[s.jsx(fe,{primary:e.label,primaryTypographyProps:{sx:{fontSize:"0.875rem",fontWeight:t?500:400,color:"inherit",transition:"font-weight 0.15s ease",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},sx:{opacity:m?1:0,ml:.5}}),e.badge&&s.jsx(Lt,{badgeContent:e.badge})]}),!m&&e.badge&&s.jsx($t,{})]},e.id);return m?n:s.jsx(je,{title:e.label,placement:"right",arrow:!0,componentsProps:{tooltip:{sx:{backgroundColor:ge(nt,.9),color:mt,backdropFilter:"blur(8px)",fontSize:"0.75rem",padding:"6px 12px",borderRadius:"6px",marginLeft:"8px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.2)",border:`1px solid ${ge(gt,.5)}`}},arrow:{sx:{color:ge(nt,.9)}}},children:n},e.id)})(e))})]},e.id),C=s.jsxs(s.Fragment,{children:[s.jsx(Pt,{children:s.jsx(It,{open:m,children:m?s.jsxs(s.Fragment,{children:[s.jsx(pe,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-start",flexGrow:1,paddingLeft:"12px"},children:s.jsx("img",{src:"/hrms-logo11.png",alt:"Company Logo",style:{height:"22px",width:"22px",objectFit:"contain",transition:"transform 0.3s ease, opacity 0.3s ease"}})}),s.jsx(Tt,{onClick:j,disabled:b,"aria-label":"close drawer",sx:{"& img":{filter:"brightness(0) invert(1)"}},children:s.jsx("img",{src:"/sidebar1.svg",alt:"Toggle sidebar",style:{width:"20px",height:"20px",objectFit:"contain",transform:"rotate(0deg)",transition:"transform 0.3s ease"}})})]}):s.jsx(Tt,{onClick:j,disabled:b,"aria-label":"open drawer",sx:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:44,borderRadius:"6px",marginBottom:"4px",padding:0,"& img":{filter:"brightness(0) invert(1)"},"&:hover":{backgroundColor:lt}},children:s.jsx("img",{src:"/sidebar1.svg",alt:"Toggle sidebar",style:{width:"20px",height:"20px",objectFit:"contain",transform:"rotate(0deg)",transition:"transform 0.3s ease"}})})})}),s.jsxs(pe,{sx:{overflowY:"auto",overflowX:"hidden",height:"calc(100vh - 64px)","&::-webkit-scrollbar":{width:4},"&::-webkit-scrollbar-track":{background:"transparent"},"&::-webkit-scrollbar-thumb":{backgroundColor:ge(xt,.3),borderRadius:2,"&:hover":{backgroundColor:ge(xt,.5)}},padding:"10px 0 0",mt:1},children:[N.map((e,t)=>k(e,t)),s.jsxs(pe,{sx:{mt:"auto",mb:2,px:1},children:[m&&s.jsx(he,{sx:{borderColor:gt,margin:"12px 24px 16px",opacity:.4}}),s.jsx(be,{disablePadding:!0,children:w.map(e=>{const t=g===e.id,a=s.jsxs(St,{onClick:e.onClick,onMouseEnter:()=>h(e.id),onMouseLeave:()=>h(""),sx:{justifyContent:m?"initial":"center",px:2,py:1,minHeight:44},children:[s.jsx(At,{selected:!1,children:v.cloneElement(e.icon,{style:{transform:t?"scale(1.1)":"scale(1)",transition:"transform 0.2s ease"}})}),m&&s.jsx(fe,{primary:e.label,primaryTypographyProps:{sx:{fontSize:"0.875rem",color:"inherit",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},sx:{opacity:m?1:0,ml:.5}})]},e.id);return m?a:s.jsx(je,{title:e.label,placement:"right",arrow:!0,componentsProps:{tooltip:{sx:{backgroundColor:ge(nt,.9),color:mt,backdropFilter:"blur(8px)",fontSize:"0.75rem",padding:"6px 12px",borderRadius:"6px",marginLeft:"8px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.2)",border:`1px solid ${ge(gt,.5)}`}},arrow:{sx:{color:ge(nt,.9)}}},children:a},e.id)})})]})]})]});return s.jsxs(s.Fragment,{children:[c&&s.jsx(ye,{color:"inherit","aria-label":"open drawer",onClick:j,edge:"start",disabled:b,sx:{position:"fixed",top:12,left:16,zIndex:1300,backgroundColor:ge(nt,.8),backdropFilter:"blur(8px)",borderRadius:"6px",width:40,height:40,"&:hover":{backgroundColor:ge(nt,.95)}},children:s.jsx(Se,{})}),c?s.jsx(ve,{variant:"temporary",open:u,onClose:j,ModalProps:{keepMounted:!0},sx:{display:{xs:"block",md:"none"},"& .MuiDrawer-paper":{width:256,backgroundColor:nt,borderRight:"none"}},children:C}):s.jsx(Dt,{variant:"permanent",open:m,isMobile:c,children:C})]})},Et={employees:{counts:{pending:0}},vendors:{counts:{open:0}},requisitions:{counts:{pending:0}},rfqs:{counts:{open:0}},purchaseOrders:{counts:{pending:0}},invoices:{counts:{pending:0}}};Ft.propTypes={stats:ce.shape({employees:ce.object,vendors:ce.object,requisitions:ce.object,rfqs:ce.object,purchaseOrders:ce.object,invoices:ce.object}),activeSection:ce.string.isRequired,handleSectionChange:ce.func.isRequired,onSidebarToggle:ce.func};const Ot=({user:a,notificationCount:l=3,onNotificationClick:o,onHelpClick:d,onAssistantClick:c,onPreferencesClick:m,onProfileClick:x,onSettingsClick:u,onSignOutClick:g,onMobileMenuToggle:h,scrollPosition:b=0,importantDates:f=[],sidebarOpen:j=!0,sidebarWidth:y=256,collapsedSidebarWidth:v=70})=>{const[O,M]=t.useState(!1),[_,R]=t.useState(!1),[U,B]=t.useState(!1),[W,q]=t.useState(new Date),[H,V]=t.useState(!1),[G,Y]=t.useState(null),[J,Q]=t.useState(new Date),[K,Z]=t.useState(null),[X,ee]=t.useState(!0),te=e(),[se]=N(),[ae,re]=t.useState(()=>se.get("section")||"dashboard");t.useEffect(()=>{ie()},[]);const ie=async()=>{try{const e=localStorage.getItem("token");if(!e)return void ee(!1);const t=await fetch("https://backend.nexusmwi.com/api/billing/subscription",{headers:{Authorization:`Bearer ${e}`}});if(t.ok){const e=await t.json();Z(e)}}catch(e){}finally{ee(!1)}},ne=(()=>{if(!a||!K)return null;const e=K.subscription,t=K.trial;return e&&["active","trialing"].includes(e.status)&&"trial"!==e.plan?{type:"paid",plan:e.plan,status:e.status}:t&&t.isActive&&t.remainingDays>0?{type:"trial",remainingDays:t.remainingDays,endDate:t.endDate}:!e||"trial"!==e.plan||t&&t.isActive?{type:"free",message:"Free plan"}:{type:"expired",message:"Trial expired"}})();t.useEffect(()=>{X||"expired"!==ne?.type||window.location.pathname.startsWith("/billing")||te("/billing",{state:{subscriptionExpired:!0,from:window.location.pathname}})},[ne,X,te]);const le=Math.min(b/100,.95),oe=Math.min(b/10,20),de=(f.length>0?f:[{date:new Date(2025,4,15),title:"Vendor Proposal Deadline",type:"deadline",description:"Final date for vendors to submit proposals for Q2 IT equipment",location:"Procurement Portal",priority:"high"},{date:new Date(2025,4,17),title:"Procurement Meeting",type:"meeting",description:"Team meeting to review vendor proposals",location:"Conference Room A",time:"10:00 AM",priority:"medium"},{date:new Date(2025,4,20),title:"Contract Renewal",type:"contract",description:"Office supplies contract renewal",location:"Legal Department",priority:"medium"}]).filter(e=>ze(e.date,new Date)&&De(e.date,Ae(new Date,7))).sort((e,t)=>e.date-t.date);t.useEffect(()=>{const e=()=>{R(!1),B(!1),M(!1)};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[]);const ce=e=>{switch(e){case"deadline":return"bg-red-100 text-red-700 border-red-200";case"meeting":return"bg-blue-100 text-blue-700 border-blue-200";case"contract":return"bg-purple-100 text-purple-700 border-purple-200";case"review":return"bg-yellow-100 text-yellow-700 border-yellow-200";case"approval":return"bg-green-100 text-green-700 border-green-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}},me=e=>{switch(e){case"deadline":return s.jsx(F,{size:14});case"meeting":return s.jsx(n,{size:14});case"contract":return s.jsx(r,{size:14});case"review":return s.jsx($,{size:14});case"approval":return s.jsx(i,{size:14});default:return s.jsx(k,{size:14})}};t.useEffect(()=>{const e=()=>{M(!1),R(!1),B(!1)},t=()=>{M(!1),R(!1),B(!1)};return window.addEventListener("resize",e),window.addEventListener("sidebarToggle",t),()=>{window.removeEventListener("resize",e),window.removeEventListener("sidebarToggle",t)}},[j]);return s.jsxs(s.Fragment,{children:[s.jsxs(Ie.header,{initial:{y:-100,opacity:0},animate:{y:0,opacity:1},className:"fixed top-0 z-50 transition-all duration-300",style:{left:window.innerWidth<768?0:j?y:v,width:(()=>{if(window.innerWidth<768)return"100%";return`calc(100% - ${j?y:v}px)`})(),backgroundColor:`rgba(255, 255, 255, ${le})`,backdropFilter:`blur(${oe}px)`,borderBottom:le>.1?"1px solid rgba(229, 231, 235, 0.8)":"none"},children:[s.jsx("div",{className:"max-w-full mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex items-center justify-between h-16",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(Ie.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{M(!O),h?.(!O)},className:"md:hidden p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-all duration-200",children:O?s.jsx(p,{size:20}):s.jsx(w,{size:20})}),s.jsxs("div",{className:"relative",children:[s.jsxs(Ie.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:e=>{e.stopPropagation(),B(!U)},className:"flex items-center gap-2 px-3 py-2 bg-blue-50 hover:bg-blue-100 text-blue-700 rounded-lg transition-all duration-200 border border-blue-200",children:[s.jsx(k,{size:16}),s.jsx("span",{className:"text-sm font-medium hidden sm:inline",children:Pe(new Date,"MMM d, yyyy")}),s.jsx(C,{size:14,className:"transition-transform duration-200 "+(U?"rotate-180":"")})]}),s.jsx(Te,{children:U&&s.jsxs(Ie.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},transition:{duration:.2},className:"absolute top-full left-0 mt-2 w-80 bg-white rounded-xl shadow-xl border border-gray-200 z-50",onClick:e=>e.stopPropagation(),children:[s.jsx("div",{className:"p-4 border-b border-gray-100 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-t-xl",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[s.jsx(k,{size:18}),"Calendar"]}),s.jsx("span",{className:"text-sm bg-white/20 px-2 py-1 rounded-full",children:Pe(new Date,"MMMM yyyy")})]})}),s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("h4",{className:"font-medium text-gray-900 flex items-center gap-2",children:[s.jsx(n,{size:16,className:"text-blue-600"}),"Upcoming Events"]}),s.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full",children:de.length})]}),s.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:de.length>0?de.map((e,t)=>s.jsxs(Ie.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.1*t},className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors duration-200 cursor-pointer",onClick:()=>{Y(e),V(!0),B(!1)},children:[s.jsx("div",{className:`p-1.5 rounded-lg ${ce(e.type)}`,children:me(e.type)}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h5",{className:"font-medium text-gray-900 text-sm truncate",children:e.title}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsx("span",{className:"text-xs text-gray-600",children:Pe(e.date,"MMM d")}),e.time&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-gray-400",children:"•"}),s.jsx("span",{className:"text-xs text-gray-600",children:e.time})]})]})]}),s.jsx("span",{className:"text-xs px-2 py-1 rounded-full "+("high"===e.priority?"bg-red-100 text-red-700":"medium"===e.priority?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"),children:e.priority})]},t)):s.jsxs("div",{className:"text-center py-6 text-gray-500",children:[s.jsx(k,{size:24,className:"mx-auto mb-2 opacity-50"}),s.jsx("p",{className:"text-sm",children:"No upcoming events"})]})})]}),s.jsx("div",{className:"p-3 border-t border-gray-100 bg-gray-50 rounded-b-xl",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),s.jsx("span",{className:"text-xs text-gray-600",children:"Deadline"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),s.jsx("span",{className:"text-xs text-gray-600",children:"Meeting"})]})]}),s.jsx("button",{onClick:()=>B(!1),className:"text-sm text-gray-600 hover:text-gray-900 transition-colors duration-200",children:"Close"})]})})]})})]}),s.jsxs(Ie.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:o,className:"relative p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all duration-200",children:[s.jsx(S,{size:20}),l>0&&s.jsx(Ie.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center font-medium",children:l})]})]}),s.jsx("div",{className:"absolute left-1/2 transform -translate-x-1/2",children:(()=>{if(X)return s.jsx(Ie.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-center gap-1 px-3 py-1.5 bg-gray-800/90 backdrop-blur-sm rounded-lg border border-gray-600/50 shadow-lg animate-pulse",children:s.jsx("div",{className:"w-16 h-4 bg-gray-600 rounded"})});if(!ne)return null;switch(ne.type){case"paid":return s.jsxs(Ie.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},className:"flex items-center gap-1 px-3 py-1.5 bg-gray-800/90 backdrop-blur-sm rounded-lg border border-gray-600/50 shadow-lg hover:shadow-xl hover:shadow-green-500/20 transition-all duration-300 group cursor-pointer",whileHover:{scale:1.02,backgroundColor:"rgba(31, 41, 55, 0.95)"},whileTap:{scale:.98},onClick:()=>te("/billing"),children:[s.jsx(E,{size:14,className:"text-yellow-400"}),s.jsxs(Ie.span,{className:"text-sm font-medium text-gray-200 group-hover:text-white transition-colors duration-200",whileHover:{scale:1.02},children:[ne.plan.charAt(0).toUpperCase()+ne.plan.slice(1)," plan"]}),s.jsx("span",{className:"text-gray-500 mx-1",children:"•"}),s.jsx(Ie.span,{className:"text-sm font-semibold text-green-400 group-hover:text-green-300 transition-all duration-200",whileHover:{scale:1.05},children:"Active"}),s.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse ml-1"})]});case"trial":return s.jsxs(Ie.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},className:"free-plan-badge flex items-center gap-1 px-3 py-1.5 bg-gray-800/90 backdrop-blur-sm rounded-lg border border-gray-600/50 shadow-lg hover:shadow-xl hover:shadow-blue-500/20 transition-all duration-300 group cursor-pointer relative",whileHover:{scale:1.02,backgroundColor:"rgba(31, 41, 55, 0.95)"},whileTap:{scale:.98},onClick:()=>te("/billing"),children:[s.jsx(Ie.span,{className:"text-sm font-medium text-gray-200 group-hover:text-white transition-colors duration-200",whileHover:{scale:1.02},children:"Free trial"}),s.jsx("span",{className:"text-gray-500 mx-1",children:"•"}),s.jsx(Ie.span,{className:"text-sm font-semibold text-blue-400 group-hover:text-blue-300 transition-all duration-200",whileHover:{scale:1.05},children:"Upgrade"}),s.jsxs("div",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs px-1.5 py-0.5 rounded-full font-medium",children:[ne.remainingDays," days left"]})]});case"expired":return s.jsxs(Ie.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},className:"free-plan-badge flex items-center gap-1 px-3 py-1.5 bg-red-600/90 backdrop-blur-sm rounded-lg border border-red-700 shadow-lg hover:shadow-xl hover:shadow-red-500/20 transition-all duration-300 group cursor-pointer",whileHover:{scale:1.02,backgroundColor:"rgba(220, 38, 38, 0.95)"},whileTap:{scale:.98},onClick:()=>te("/billing"),children:[s.jsx(L,{size:14,className:"text-white"}),s.jsx(Ie.span,{className:"text-sm font-medium text-white group-hover:text-white transition-colors duration-200",whileHover:{scale:1.02},children:"Trial expired"}),s.jsx("span",{className:"text-white/50 mx-1",children:"•"}),s.jsx(Ie.span,{className:"text-sm font-semibold text-white group-hover:text-white transition-all duration-200",whileHover:{scale:1.05},children:"Renew now"})]});case"free":return s.jsxs(Ie.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},className:"free-plan-badge flex items-center gap-1 px-3 py-1.5 bg-gray-800/90 backdrop-blur-sm rounded-lg border border-gray-600/50 shadow-lg hover:shadow-xl hover:shadow-blue-500/20 transition-all duration-300 group cursor-pointer",whileHover:{scale:1.02,backgroundColor:"rgba(31, 41, 55, 0.95)"},whileTap:{scale:.98},onClick:()=>te("/billing"),children:[s.jsx(Ie.span,{className:"text-sm font-medium text-gray-200 group-hover:text-white transition-colors duration-200",whileHover:{scale:1.02},children:"Free plan"}),s.jsx("span",{className:"text-gray-500 mx-1",children:"•"}),s.jsx(Ie.span,{className:"text-sm font-semibold text-blue-400 group-hover:text-blue-300 transition-all duration-200",whileHover:{scale:1.05},children:"Upgrade"})]});default:return null}})()}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"hidden md:flex items-center gap-2",children:[s.jsx(Ie.button,{whileHover:{scale:1.05,y:-1},whileTap:{scale:.95},onClick:d,className:"p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all duration-200",title:"Help Center",children:s.jsx(z,{size:18})}),s.jsx(Ie.button,{whileHover:{scale:1.05,y:-1},whileTap:{scale:.95},onClick:c,className:"p-2 text-gray-600 hover:text-purple-600 hover:bg-purple-50 rounded-lg transition-all duration-200",title:"AI Assistant",children:s.jsx(D,{size:18})}),s.jsx(Ie.button,{whileHover:{scale:1.05,y:-1},whileTap:{scale:.95},onClick:m,className:"p-2 text-gray-600 hover:text-green-600 hover:bg-green-50 rounded-lg transition-all duration-200",title:"Settings",children:s.jsx(A,{size:18})})]}),s.jsxs("div",{className:"relative",children:[s.jsxs(Ie.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:e=>{e.stopPropagation(),R(!_)},className:"flex items-center gap-2 p-1 hover:bg-gray-100 rounded-lg transition-all duration-200",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-full flex items-center justify-center font-medium text-sm",children:a?.firstName&&a?.lastName?`${a.firstName.charAt(0).toUpperCase()}${a.lastName.charAt(0).toUpperCase()}`:a?.firstName?a.firstName.charAt(0).toUpperCase():a?.lastName?a.lastName.charAt(0).toUpperCase():"G"}),s.jsx(C,{size:14,className:"transition-transform duration-200 "+(_?"rotate-180":"")})]}),s.jsx(Te,{children:_&&s.jsx(Ie.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},transition:{duration:.2},className:"absolute top-full right-0 mt-2 w-48 bg-white rounded-lg shadow-xl border border-gray-200 z-50",onClick:e=>e.stopPropagation(),children:s.jsxs("div",{className:"p-2",children:[s.jsxs("button",{onClick:()=>{var e;x?.(),R(!1),re(e="user-profile"),te(`?section=${e}`,{replace:!0})},className:"w-full flex items-center gap-3 px-3 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors duration-200",children:[s.jsx(P,{size:16}),s.jsx("span",{className:"text-sm",children:"Profile"})]}),s.jsxs("button",{onClick:()=>{u?.(),R(!1)},className:"w-full flex items-center gap-3 px-3 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors duration-200",children:[s.jsx(A,{size:16}),s.jsx("span",{className:"text-sm",children:"Settings"})]}),s.jsx("hr",{className:"my-2 border-gray-200"}),s.jsxs("button",{onClick:()=>{g?.(),R(!1)},className:"w-full flex items-center gap-3 px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors duration-200",children:[s.jsx(I,{size:16}),s.jsx("span",{className:"text-sm",children:"Sign Out"})]})]})})})]})]})]})}),s.jsx(Te,{children:O&&s.jsx(Ie.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"md:hidden border-t border-gray-200 bg-white/95 backdrop-blur-sm",children:s.jsxs("div",{className:"px-4 py-3 space-y-2",children:[s.jsxs("button",{onClick:d,className:"w-full flex items-center gap-3 px-3 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors duration-200",children:[s.jsx(z,{size:18}),s.jsx("span",{children:"Help Center"})]}),s.jsxs("button",{onClick:c,className:"w-full flex items-center gap-3 px-3 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors duration-200",children:[s.jsx(D,{size:18}),s.jsx("span",{children:"AI Assistant"})]}),s.jsxs("button",{onClick:m,className:"w-full flex items-center gap-3 px-3 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors duration-200",children:[s.jsx(A,{size:18}),s.jsx("span",{children:"Preferences"})]})]})})})]}),s.jsx(Te,{children:H&&G&&s.jsx(Ie.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>V(!1),children:s.jsxs(Ie.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"bg-white rounded-2xl shadow-2xl max-w-md w-full overflow-hidden",onClick:e=>e.stopPropagation(),children:[s.jsx("div",{className:"p-6 text-white "+("deadline"===G.type?"bg-gradient-to-r from-red-600 to-red-700":"meeting"===G.type?"bg-gradient-to-r from-blue-600 to-blue-700":"contract"===G.type?"bg-gradient-to-r from-purple-600 to-purple-700":"review"===G.type?"bg-gradient-to-r from-yellow-600 to-yellow-700":"approval"===G.type?"bg-gradient-to-r from-green-600 to-green-700":"bg-gradient-to-r from-gray-600 to-gray-700"),children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("span",{className:"inline-block px-2 py-1 bg-white/20 rounded-full text-xs font-medium mb-2",children:G.type?.toUpperCase()}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:G.title}),s.jsxs("div",{className:"flex items-center gap-2 text-white/90",children:[s.jsx(k,{size:16}),s.jsxs("span",{className:"text-sm",children:[Pe(G.date,"EEEE, MMMM d, yyyy"),G.time&&` • ${G.time}`]})]})]}),s.jsx("button",{onClick:()=>V(!1),className:"p-1 hover:bg-white/20 rounded-lg transition-colors duration-200",children:s.jsx(p,{size:20})})]})}),s.jsxs("div",{className:"p-6 space-y-4",children:[G.location&&s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(T,{size:18,className:"text-gray-500 mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:"Location"}),s.jsx("p",{className:"text-gray-600 text-sm",children:G.location})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(r,{size:18,className:"text-gray-500 mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:"Description"}),s.jsx("p",{className:"text-gray-600 text-sm",children:G.description})]})]}),G.priority&&s.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-lg "+("high"===G.priority?"bg-red-50 border border-red-200":"medium"===G.priority?"bg-yellow-50 border border-yellow-200":"bg-blue-50 border border-blue-200"),children:[s.jsx(L,{size:16,className:"high"===G.priority?"text-red-600":"medium"===G.priority?"text-yellow-600":"text-blue-600"}),s.jsx("span",{className:"text-sm font-medium "+("high"===G.priority?"text-red-700":"medium"===G.priority?"text-yellow-700":"text-blue-700"),children:"high"===G.priority?"High Priority":"medium"===G.priority?"Medium Priority":"Low Priority"})]})]}),s.jsxs("div",{className:"p-6 pt-0 flex items-center justify-end gap-3",children:[s.jsx("button",{onClick:()=>V(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors duration-200",children:"Close"}),s.jsx("button",{onClick:()=>V(!1),className:"px-4 py-2 text-white rounded-lg transition-all duration-200 "+("deadline"===G.type?"bg-red-600 hover:bg-red-700":"meeting"===G.type?"bg-blue-600 hover:bg-blue-700":"contract"===G.type?"bg-purple-600 hover:bg-purple-700":"review"===G.type?"bg-yellow-600 hover:bg-yellow-700":"approval"===G.type?"bg-green-600 hover:bg-green-700":"bg-gray-600 hover:bg-gray-700"),children:"View Details"})]})]})})})]})},Mt=()=>s.jsx("style",{jsx:!0,global:!0,children:"\n    @keyframes pulse {\n      0%, 100% {\n        transform: scale(1);\n        opacity: 0.8;\n      }\n      50% {\n        transform: scale(1.1);\n        opacity: 0.4;\n      }\n    }\n    \n    @keyframes ripple {\n      0% {\n        transform: scale(1);\n        opacity: 0.8;\n      }\n      100% {\n        transform: scale(1.3);\n        opacity: 0;\n      }\n    }\n\n    @keyframes fadeIn {\n      from {\n        opacity: 0;\n        transform: translateY(-10px);\n      }\n      to {\n        opacity: 1;\n        transform: translateY(0);\n      }\n    }\n\n    .animate-pulse-custom {\n      animation: pulse 2s infinite;\n    }\n\n    .animate-ripple {\n      animation: ripple 3s infinite;\n    }\n\n    .animate-fade-in {\n      animation: fadeIn 0.3s ease-out;\n    }\n\n    /* Custom scrollbar for dropdown menus */\n    .custom-scrollbar::-webkit-scrollbar {\n      width: 4px;\n    }\n\n    .custom-scrollbar::-webkit-scrollbar-track {\n      background: #f1f5f9;\n      border-radius: 2px;\n    }\n\n    .custom-scrollbar::-webkit-scrollbar-thumb {\n      background: #cbd5e1;\n      border-radius: 2px;\n    }\n\n    .custom-scrollbar::-webkit-scrollbar-thumb:hover {\n      background: #94a3b8;\n    }\n\n    /* Smooth transitions for all interactive elements */\n    .transition-smooth {\n      transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);\n    }\n\n    /* Backdrop blur support */\n    .backdrop-blur-custom {\n      backdrop-filter: blur(12px) saturate(180%);\n      -webkit-backdrop-filter: blur(12px) saturate(180%);\n    }\n\n    /* Focus styles for accessibility */\n    .focus-ring:focus {\n      outline: 2px solid #3b82f6;\n      outline-offset: 2px;\n    }\n\n    /* Hover effects for buttons */\n    .btn-hover:hover {\n      transform: translateY(-1px);\n      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n    }\n\n    /* Loading spinner animation */\n    @keyframes spin {\n      from {\n        transform: rotate(0deg);\n      }\n      to {\n        transform: rotate(360deg);\n      }\n    }\n\n    .animate-spin-slow {\n      animation: spin 3s linear infinite;\n    }\n\n    /* Gradient animations */\n    @keyframes gradient-shift {\n      0%, 100% {\n        background-position: 0% 50%;\n      }\n      50% {\n        background-position: 100% 50%;\n      }\n    }\n\n    .gradient-animate {\n      background-size: 200% 200%;\n      animation: gradient-shift 6s ease infinite;\n    }\n\n    /* Text shimmer effect */\n    @keyframes shimmer {\n      0% {\n        background-position: -200px 0;\n      }\n      100% {\n        background-position: calc(200px + 100%) 0;\n      }\n    }\n\n    .text-shimmer {\n      background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 37%, #f0f0f0 63%);\n      background-size: 400px 100%;\n      animation: shimmer 1.4s ease-in-out infinite;\n    }\n\n    /* Dark mode support */\n    @media (prefers-color-scheme: dark) {\n      .dark-mode-bg {\n        background-color: #1f2937;\n        color: #f9fafb;\n      }\n      \n      .dark-mode-border {\n        border-color: #374151;\n      }\n      \n      .dark-mode-text {\n        color: #d1d5db;\n      }\n    }\n\n    /* Mobile-specific styles */\n    @media (max-width: 768px) {\n      .mobile-optimized {\n        padding: 0.75rem;\n      }\n      \n      .mobile-text {\n        font-size: 0.875rem;\n      }\n      \n      .mobile-button {\n        min-height: 44px;\n        min-width: 44px;\n      }\n    }\n\n    /* High contrast mode support */\n    @media (prefers-contrast: high) {\n      .high-contrast {\n        border: 2px solid currentColor;\n      }\n      \n      .high-contrast-text {\n        font-weight: 600;\n      }\n    }\n\n    /* Reduced motion support */\n    @media (prefers-reduced-motion: reduce) {\n      * {\n        animation-duration: 0.01ms !important;\n        animation-iteration-count: 1 !important;\n        transition-duration: 0.01ms !important;\n      }\n    }\n\n    /* Print styles */\n    @media print {\n      .no-print {\n        display: none !important;\n      }\n      \n      .print-friendly {\n        background: white !important;\n        color: black !important;\n        box-shadow: none !important;\n      }\n    }\n  "}),_t=({user:a,onMobileMenuToggle:r,scrollPosition:i,sidebarOpen:n=!0,sidebarWidth:l=256,collapsedSidebarWidth:o=70})=>{const d=[{date:new Date(2025,4,15),title:"Vendor Proposal Deadline",type:"deadline",description:"Final date for vendors to submit proposals for the Q2 IT equipment procurement",location:"Procurement Portal",priority:"high"},{date:new Date(2025,4,17),title:"Procurement Meeting",type:"meeting",description:"Team meeting to review vendor proposals and make selections",location:"Conference Room A",time:"10:00 AM",priority:"medium"},{date:new Date(2025,4,20),title:"Contract Renewal",type:"contract",description:"Annual renewal of office supplies contract with OfficeMax",location:"Legal Department",priority:"medium"},{date:new Date(2025,4,24),title:"Quarterly Review",type:"review",description:"Financial review of procurement spending for Q1",location:"Executive Boardroom",time:"2:00 PM",priority:"high"},{date:new Date(2025,4,28),title:"Budget Approval",type:"approval",description:"Final approval for Q3 procurement budget",location:"Finance Department",priority:"high"},{date:new Date(2025,4,14),title:"Vendor Evaluation",type:"meeting",description:"Evaluate new potential suppliers for hardware components",location:"Meeting Room B",time:"11:30 AM",priority:"medium"},{date:new Date(2025,4,18),title:"Contract Draft Review",type:"contract",description:"Legal team review of new vendor contracts",location:"Legal Office",time:"9:00 AM",priority:"medium"},{date:new Date(2025,4,22),title:"Procurement Training",type:"meeting",description:"New system training for procurement team",location:"Training Center",time:"1:00 PM",priority:"low"}],[c,m]=t.useState(d),x=e(),[u]=N(),[p,g]=t.useState(()=>u.get("section")||"dashboard"),[h,b]=t.useState(3);return t.useEffect(()=>{(async()=>{})()},[]),s.jsxs(s.Fragment,{children:[s.jsx(Mt,{}),s.jsx(Ot,{user:a,notificationCount:h,onNotificationClick:()=>{},onHelpClick:()=>{},onAssistantClick:()=>{},onPreferencesClick:()=>{},onProfileClick:()=>{return g(e="user-profile"),void x(`?section=${e}`,{replace:!0});var e},onSettingsClick:()=>{},onSignOutClick:()=>{},onMobileMenuToggle:r,scrollPosition:i,importantDates:c,sidebarOpen:n,sidebarWidth:l,collapsedSidebarWidth:o})]})};function Rt(){const{token:o,user:h}=de();e();const[b,j]=t.useState(null),[y,v]=t.useState([]),[N,w]=t.useState(!0),[k,C]=t.useState(""),[S,z]=t.useState(""),[D,A]=t.useState(!1),[P,I]=t.useState(null),[T,L]=t.useState(""),[$,F]=t.useState(""),[E,W]=t.useState("all"),q="https://backend.nexusmwi.com";t.useEffect(()=>{(async()=>{try{const e=localStorage.getItem("token"),t=await fetch(`${q}/api/vendors/me`,{headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw new Error("Failed to fetch vendor details");const s=await t.json();j(s._id)}catch(e){C("Could not fetch vendor details.")}})()},[o]),t.useEffect(()=>{b&&(async()=>{if(b)try{const e=localStorage.getItem("token"),t=await fetch(`${q}/api/purchase-orders`,{headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw new Error("Failed to fetch purchase orders");const s=((await t.json()).data||[]).filter(e=>e.vendor?._id===b);v(s)}catch(e){C("Could not fetch purchase orders.")}finally{w(!1)}})()},[b,o]);const H=y.filter(e=>{const t=e._id.toLowerCase().includes($.toLowerCase());let s=!0;return"confirmed"===E?s=e.vendorConfirmation?.confirmed:"pending"===E?s=!e.vendorConfirmation?.confirmed:"invoiced"===E?s=!!e.invoice:"not-invoiced"===E&&(s=!e.invoice),t&&s}),V=y?.length||0,G=y?.filter(e=>e.vendorConfirmation?.confirmed)?.length||0,Y=y?.filter(e=>"delivered"===e.deliveryStatus)?.length||0,J=y?.filter(e=>e.invoice)?.length||0,Q=y?.filter(e=>!e.invoice&&e.vendorConfirmation?.confirmed)?.length||0,K=y?.reduce((e,t)=>e+(t.invoice?t.totalAmount:0),0)||0,Z=e=>{I(e),L(Math.floor(1e5+9e5*Math.random()).toString()),A(!0)},X=()=>{A(!1),L(""),I(null),C("")},ee=e=>{switch(e?.toLowerCase()){case"confirmed":return"text-green-700 bg-green-50 border-green-200";case"pending":return"text-amber-700 bg-amber-50 border-amber-200";case"delivered":return"text-blue-700 bg-blue-50 border-blue-200";case"shipped":return"text-purple-700 bg-purple-50 border-purple-200";default:return"text-gray-700 bg-gray-50 border-gray-200"}},te=e=>{switch(e?.toLowerCase()){case"confirmed":return s.jsx(i,{size:14});case"pending":return s.jsx(n,{size:14});case"delivered":return s.jsx(u,{size:14});case"shipped":return s.jsx(l,{size:14});default:return s.jsx(a,{size:14})}},se=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),ae=({isVisible:e,message:t="Processing..."})=>e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-2xl p-6 flex items-center gap-3",children:[s.jsx(f,{className:"animate-spin w-6 h-6 text-blue-500"}),s.jsx("span",{className:"font-medium",children:t})]})}):null;return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50/30 to-purple-50/20",children:[s.jsx(ae,{isVisible:N,message:"Loading Invoices..."}),s.jsx("div",{className:"bg-white/80 backdrop-blur-lg border-b border-gray-200/50 px-6 py-4 sticky top-0 z-40",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsx("div",{className:"flex items-center justify-between mb-8",children:s.jsx("div",{className:"flex items-center gap-6",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:"Invoice Submission"}),s.jsx("p",{className:"text-gray-500 text-lg mt-2",children:"Submit invoices for your completed purchase orders"})]})})}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-6 gap-4",children:[s.jsxs(Ie.div,{whileHover:{y:-2,scale:1.02},className:"bg-white/80 backdrop-blur-sm rounded-2xl p-4 border border-gray-200/50 shadow-xl hover:shadow-2xl transition-all duration-300",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg",children:s.jsx(r,{size:18,className:"text-white"})}),s.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium",children:V})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600 text-xs font-medium",children:"Total POs"}),s.jsx("p",{className:"text-xl font-bold text-gray-900",children:V})]})]}),s.jsxs(Ie.div,{whileHover:{y:-2,scale:1.02},className:"bg-white/80 backdrop-blur-sm rounded-2xl p-4 border border-gray-200/50 shadow-xl hover:shadow-2xl transition-all duration-300",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("div",{className:"p-2 bg-gradient-to-br from-green-500 to-emerald-600 rounded-lg",children:s.jsx(i,{size:18,className:"text-white"})}),s.jsx("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs font-medium",children:G})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600 text-xs font-medium",children:"Confirmed"}),s.jsx("p",{className:"text-xl font-bold text-gray-900",children:G})]})]}),s.jsxs(Ie.div,{whileHover:{y:-2,scale:1.02},className:"bg-white/80 backdrop-blur-sm rounded-2xl p-4 border border-gray-200/50 shadow-xl hover:shadow-2xl transition-all duration-300",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("div",{className:"p-2 bg-gradient-to-br from-purple-500 to-pink-600 rounded-lg",children:s.jsx(u,{size:18,className:"text-white"})}),s.jsx("span",{className:"bg-purple-100 text-purple-800 px-2 py-1 rounded-full text-xs font-medium",children:Y})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600 text-xs font-medium",children:"Delivered"}),s.jsx("p",{className:"text-xl font-bold text-gray-900",children:Y})]})]}),s.jsxs(Ie.div,{whileHover:{y:-2,scale:1.02},className:"bg-white/80 backdrop-blur-sm rounded-2xl p-4 border border-gray-200/50 shadow-xl hover:shadow-2xl transition-all duration-300",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("div",{className:"p-2 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-lg",children:s.jsx(O,{size:18,className:"text-white"})}),s.jsx("span",{className:"bg-emerald-100 text-emerald-800 px-2 py-1 rounded-full text-xs font-medium",children:J})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600 text-xs font-medium",children:"Invoiced"}),s.jsx("p",{className:"text-xl font-bold text-gray-900",children:J})]})]}),s.jsxs(Ie.div,{whileHover:{y:-2,scale:1.02},className:"bg-white/80 backdrop-blur-sm rounded-2xl p-4 border border-gray-200/50 shadow-xl hover:shadow-2xl transition-all duration-300",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("div",{className:"p-2 bg-gradient-to-br from-amber-500 to-orange-600 rounded-lg",children:s.jsx(n,{size:18,className:"text-white"})}),s.jsx("span",{className:"bg-amber-100 text-amber-800 px-2 py-1 rounded-full text-xs font-medium",children:Q})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600 text-xs font-medium",children:"Pending Invoice"}),s.jsx("p",{className:"text-xl font-bold text-gray-900",children:Q})]})]}),s.jsxs(Ie.div,{whileHover:{y:-2,scale:1.02},className:"bg-white/80 backdrop-blur-sm rounded-2xl p-4 border border-gray-200/50 shadow-xl hover:shadow-2xl transition-all duration-300",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("div",{className:"p-2 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg",children:s.jsx(d,{size:18,className:"text-white"})}),s.jsxs("span",{className:"bg-indigo-100 text-indigo-800 px-2 py-1 rounded-full text-xs font-medium",children:["$",(K/1e3).toFixed(0),"K"]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600 text-xs font-medium",children:"Invoice Value"}),s.jsx("p",{className:"text-lg font-bold text-gray-900",children:se(K)})]})]})]})]})}),s.jsx("div",{className:"max-w-7xl mx-auto px-6 py-8",children:s.jsxs(Ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-8",children:[s.jsxs(Te,{children:[S&&s.jsxs(Ie.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-green-50 border border-green-200 text-green-800 px-6 py-4 rounded-xl flex items-center gap-3",children:[s.jsx(i,{size:20}),s.jsx("span",{children:S}),s.jsx("button",{onClick:()=>z(""),className:"ml-auto p-1 hover:bg-green-100 rounded",children:s.jsx(p,{size:16})})]}),k&&s.jsxs(Ie.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-red-50 border border-red-200 text-red-800 px-6 py-4 rounded-xl flex items-center gap-3",children:[s.jsx(a,{size:20}),s.jsx("span",{children:k}),s.jsx("button",{onClick:()=>C(""),className:"ml-auto p-1 hover:bg-red-100 rounded",children:s.jsx(p,{size:16})})]})]}),s.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl border border-gray-200/50 p-6 shadow-xl",children:s.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-center justify-between",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center flex-1",children:[s.jsxs("div",{className:"relative flex-1 max-w-md",children:[s.jsx(c,{className:"absolute left-4 top-4 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search by PO number...",value:$,onChange:e=>F(e.target.value),className:"w-full pl-12 pr-4 py-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 bg-white/80 backdrop-blur-sm"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("select",{value:E,onChange:e=>W(e.target.value),className:"px-4 py-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 bg-white/80 backdrop-blur-sm font-medium",children:[s.jsx("option",{value:"all",children:"All Statuses"}),s.jsx("option",{value:"pending",children:"Pending"}),s.jsx("option",{value:"confirmed",children:"Confirmed"}),s.jsx("option",{value:"invoiced",children:"Invoiced"}),s.jsx("option",{value:"not-invoiced",children:"Not Invoiced"})]}),s.jsxs("button",{className:"px-4 py-4 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 transition-colors duration-200 font-medium flex items-center gap-2",children:[s.jsx(M,{size:18}),"More Filters"]})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("button",{className:"px-4 py-2 bg-white/80 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors duration-200 border border-gray-200 flex items-center gap-2",children:[s.jsx(x,{size:16}),"Export"]}),s.jsx("button",{className:"p-2 bg-white/80 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors duration-200 border border-gray-200",children:s.jsx(m,{size:18})})]})]})}),0===H.length?s.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl border border-gray-200/50 p-12 shadow-xl text-center",children:s.jsxs("div",{className:"flex flex-col items-center space-y-6",children:[s.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-gray-200 to-gray-300 rounded-full flex items-center justify-center",children:s.jsx(O,{size:40,className:"text-gray-500"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:$||"all"!==E?"No purchase orders match your filters":"No purchase orders available"}),s.jsx("p",{className:"text-gray-600 max-w-md mx-auto",children:$||"all"!==E?"Try adjusting your search criteria or filters to find what you're looking for.":"There are currently no purchase orders available for invoicing."})]})]})}):s.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl border border-gray-200/50 shadow-xl overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-gray-50/50 to-emerald-50/30 border-b border-gray-100/50 px-6 py-4",children:s.jsxs("div",{className:"grid grid-cols-6 gap-4 items-center font-semibold text-gray-700 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(g,{size:16}),"PO Number"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(i,{size:16}),"Status"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(l,{size:16}),"Delivery Status"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(d,{size:16}),"Total Amount"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(O,{size:16}),"Invoice Status"]}),s.jsx("div",{className:"text-center",children:"Actions"})]})}),s.jsx("div",{className:"divide-y divide-gray-100",children:H.map((e,t)=>s.jsxs(Ie.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.05*t},className:"grid grid-cols-6 gap-4 items-center px-6 py-6 hover:bg-gray-50/50 transition-all duration-200 group",children:[s.jsx("div",{children:s.jsx("span",{className:"font-bold text-emerald-600 group-hover:text-emerald-700 transition-colors duration-200",children:e._id.slice(-8).toUpperCase()})}),s.jsx("div",{children:s.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium border ${ee(e.vendorConfirmation?.confirmed?"confirmed":"pending")}`,children:[te(e.vendorConfirmation?.confirmed?"confirmed":"pending"),s.jsx("span",{className:"ml-2",children:e.vendorConfirmation?.confirmed?"Confirmed":"Pending"})]})}),s.jsx("div",{children:s.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium border ${ee(e.deliveryStatus||"pending")}`,children:[te(e.deliveryStatus||"pending"),s.jsx("span",{className:"ml-2 capitalize",children:e.deliveryStatus||"Pending"})]})}),s.jsx("div",{children:s.jsx("span",{className:"font-bold text-gray-900 text-lg",children:se(e.totalAmount)})}),s.jsx("div",{children:e.invoice?s.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium border text-green-700 bg-green-50 border-green-200",children:[s.jsx(_,{size:14}),s.jsx("span",{className:"ml-2",children:"Submitted"})]}):s.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium border text-amber-700 bg-amber-50 border-amber-200",children:[s.jsx(n,{size:14}),s.jsx("span",{className:"ml-2",children:"Pending"})]})}),s.jsx("div",{className:"text-center",children:e.invoice?s.jsxs("span",{className:"inline-flex items-center px-4 py-2 bg-green-100 text-green-800 rounded-lg text-sm font-medium",children:[s.jsx(i,{size:16,className:"mr-2"}),"Invoice Submitted"]}):e.vendorConfirmation?.confirmed?s.jsxs("button",{onClick:()=>Z(e),className:"px-4 py-2 bg-gradient-to-r from-emerald-500 to-emerald-600 text-white rounded-lg hover:from-emerald-600 hover:to-emerald-700 transition-all duration-200 font-medium shadow-md hover:shadow-lg transform hover:scale-105 flex items-center gap-2",children:[s.jsx(R,{size:16}),"Submit Invoice"]}):s.jsxs("span",{className:"inline-flex items-center px-4 py-2 bg-gray-100 text-gray-500 rounded-lg text-sm font-medium",children:[s.jsx(n,{size:16,className:"mr-2"}),"Awaiting Confirmation"]})})]},e._id))})]})]})}),D&&P&&s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:s.jsxs(Ie.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},className:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden shadow-2xl",children:[s.jsx("div",{className:"px-8 py-6 border-b border-gray-200 bg-gradient-to-r from-emerald-50 to-teal-50",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-3",children:[s.jsx(O,{size:24,className:"text-emerald-500"}),"Submit Invoice"]}),s.jsxs("p",{className:"text-gray-600 mt-1",children:["Create invoice for PO: ",s.jsx("span",{className:"font-semibold",children:P._id.slice(-8).toUpperCase()})]})]}),s.jsx("button",{onClick:X,className:"p-3 hover:bg-gray-100 rounded-xl transition-colors duration-200",children:s.jsx(p,{size:24})})]})}),s.jsx("div",{className:"p-8 max-h-[70vh] overflow-y-auto",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-gray-50 rounded-xl p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[s.jsx(u,{size:20}),"Purchase Order Details"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"PO Number:"}),s.jsx("p",{className:"font-semibold text-gray-900",children:P._id.slice(-8).toUpperCase()})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Total Amount:"}),s.jsx("p",{className:"font-semibold text-gray-900",children:se(P.totalAmount)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Confirmation Status:"}),s.jsx("p",{className:"font-semibold text-gray-900",children:P.vendorConfirmation?.confirmed?"Confirmed":"Pending"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Delivery Status:"}),s.jsx("p",{className:"font-semibold text-gray-900 capitalize",children:P.deliveryStatus||"Pending"})]}),P.createdAt&&s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"PO Date:"}),s.jsx("p",{className:"font-semibold text-gray-900",children:(re=P.createdAt,new Date(re).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}))})]}),P.trackingNumber&&s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Tracking Number:"}),s.jsx("p",{className:"font-semibold text-gray-900",children:P.trackingNumber})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[s.jsx(g,{size:16}),"Invoice Number"]}),s.jsx("input",{type:"text",value:T,readOnly:!0,className:"w-full px-4 py-4 border border-gray-300 rounded-xl bg-gray-50 text-gray-700 font-mono"}),s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Auto-generated invoice number"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[s.jsx(d,{size:16}),"Invoice Amount"]}),s.jsx("input",{type:"text",value:se(P.totalAmount),readOnly:!0,className:"w-full px-4 py-4 border border-gray-300 rounded-xl bg-gray-50 text-gray-700 font-mono text-lg font-bold"}),s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Amount matches the purchase order total"})]}),s.jsx("div",{className:"bg-emerald-50 rounded-xl p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"p-2 bg-emerald-500 rounded-lg",children:s.jsx(U,{size:16,className:"text-white"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-emerald-900 mb-1",children:"Invoice Information"}),s.jsx("p",{className:"text-emerald-800 text-sm",children:"This invoice will be automatically submitted to the finance department for processing. You will receive payment according to the agreed terms once the invoice is approved."})]})]})}),s.jsxs("div",{className:"border border-gray-200 rounded-xl p-6 bg-white",children:[s.jsxs("h4",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[s.jsx(B,{size:20}),"Invoice Summary"]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[s.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),s.jsx("span",{className:"font-semibold text-gray-900",children:se(P.totalAmount)})]}),s.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[s.jsx("span",{className:"text-gray-600",children:"Tax (if applicable):"}),s.jsx("span",{className:"font-semibold text-gray-900",children:"$0.00"})]}),s.jsxs("div",{className:"flex justify-between items-center py-3 bg-emerald-50 px-4 rounded-lg",children:[s.jsx("span",{className:"text-emerald-900 font-semibold text-lg",children:"Total Amount Due:"}),s.jsx("span",{className:"font-bold text-emerald-900 text-xl",children:se(P.totalAmount)})]})]})]})]}),s.jsxs("div",{className:"flex gap-4 pt-6 border-t border-gray-200",children:[s.jsxs("button",{onClick:async()=>{try{const e=localStorage.getItem("token"),t=await fetch(`${q}/api/invoices`,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({poId:P._id,invoiceNumber:T,amountDue:P.totalAmount,vendorId:b})});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to submit invoice")}const s=await t.json();v(e=>e.map(e=>e._id===P._id?{...e,invoice:s.invoice}:e)),z(`Invoice ${T} submitted successfully!`),X()}catch(e){C(e.message||"Could not submit invoice.")}},className:"flex-1 px-6 py-4 bg-gradient-to-r from-emerald-500 to-emerald-600 text-white rounded-xl hover:from-emerald-600 hover:to-emerald-700 transition-all duration-200 font-semibold shadow-lg hover:shadow-xl transform hover:scale-105 flex items-center justify-center gap-2",children:[s.jsx(R,{size:20}),"Submit Invoice"]}),s.jsxs("button",{onClick:X,className:"px-6 py-4 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 transition-all duration-200 font-semibold flex items-center justify-center gap-2",children:[s.jsx(p,{size:20}),"Cancel"]})]})]})})]})})]});var re}const Ut=Object.freeze(Object.defineProperty({__proto__:null,default:Rt},Symbol.toStringTag,{value:"Module"})),Bt=({label:e,field:t,type:a="text",formData:r,onChange:i,...n})=>s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:e}),s.jsx("input",{type:a,name:t,value:r[t],onChange:i,className:"w-full px-3 py-2 text-xs border border-gray-300 rounded-2xl focus:ring-1 focus:ring-blue-500 focus:border-blue-500",...n})]}),Wt=({label:e,field:t,multiple:a,files:r,onFileChange:i})=>s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:e}),s.jsx("input",{type:"file",multiple:a,onChange:e=>i(t,e.target.files,a),className:"w-full text-xs text-gray-600"}),r[t]&&(Array.isArray(r[t])?r[t].map((e,t)=>s.jsx("p",{className:"text-[10px] text-gray-500 mt-1",children:e.name},t)):r[t]instanceof File&&s.jsx("p",{className:"text-[10px] text-gray-500 mt-1",children:r[t].name}))]});function qt(){const[e,a]=t.useState({businessName:"",taxpayerIdentificationNumber:"",registrationNumber:"",registrationIssuedDate:"",phoneNumber:"",address:"",contactEmail:"",yearsInOperation:"",laborLawCompliance:!1,litigationHistory:!1,bankReference:"",insuranceCoverage:"",annualTurnover:"",deliveryCapacity:"",timelyDeliveryRecord:!1,performanceRatings:"",safetyPolicy:"",antiCorruptionPolicy:"",conflictOfInterest:!1,codeOfConductSigned:!1}),[i,n]=t.useState({registrationCertificate:null,businessLicense:null,taxClearance:null,vatRegistration:null,industryLicenses:[],auditedStatements:[],relevantExperience:[],keyPersonnel:[],equipmentFacilities:[],qualityCertifications:[],clientReferences:[],completedProjects:[],safetyRecords:[],sustainabilityPractices:[],environmentCertificate:null,csrInitiatives:[]}),[l,o]=t.useState({}),[d,c]=t.useState(!1),m=e=>{const{name:t,value:s,type:r,checked:i}=e.target;a(e=>({...e,[t]:"checkbox"===r?i:s}))},x=(e,t,s)=>{n(a=>({...a,[e]:s?Array.from(t):t[0]}))};return s.jsx("div",{className:"min-h-screen bg-gray-50 px-6 py-10",children:s.jsxs("div",{className:"max-w-6xl mx-auto bg-white rounded-xl shadow border border-gray-200 p-6",children:[s.jsxs("h1",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center gap-2",children:[s.jsx(r,{size:18,className:"text-blue-500"}),"Vendor Registration"]}),s.jsxs("form",{onSubmit:async t=>{t.preventDefault(),c(!0);try{const t=new FormData;t.append("data",JSON.stringify(e)),Object.entries(i).forEach(([e,s])=>{s&&(Array.isArray(s)?s.forEach(s=>{s instanceof File&&t.append(e,s)}):s instanceof File&&t.append(e,s))});const s=localStorage.getItem("token"),r=await fetch("https://backend.nexusmwi.com/api/vendors/register",{method:"POST",body:t,headers:{...s&&{Authorization:`Bearer ${s}`}}}),l=await r.json();r.ok?(alert(`Registration submitted successfully! Score: ${l.preQualification?.score||0}%`),a({businessName:"",taxpayerIdentificationNumber:"",registrationNumber:"",registrationIssuedDate:"",phoneNumber:"",address:"",contactEmail:"",yearsInOperation:"",laborLawCompliance:!1,litigationHistory:!1,bankReference:"",insuranceCoverage:"",annualTurnover:"",deliveryCapacity:"",timelyDeliveryRecord:!1,performanceRatings:"",safetyPolicy:"",antiCorruptionPolicy:"",conflictOfInterest:!1,codeOfConductSigned:!1}),n({registrationCertificate:null,businessLicense:null,taxClearance:null,vatRegistration:null,industryLicenses:[],auditedStatements:[],relevantExperience:[],keyPersonnel:[],equipmentFacilities:[],qualityCertifications:[],clientReferences:[],completedProjects:[],safetyRecords:[],sustainabilityPractices:[],environmentCertificate:null,csrInitiatives:[]})):alert(l.message||"Failed to submit registration")}catch(s){alert("Failed to submit registration. Check console for details.")}finally{c(!1)}},className:"space-y-6 text-xs",children:[s.jsxs("section",{children:[s.jsxs("h2",{className:"text-sm font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[s.jsx(h,{size:14,className:"text-purple-500"}),"Company Information"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.jsx(Bt,{label:"Business Name *",field:"businessName",formData:e,onChange:m,required:!0}),s.jsx(Bt,{label:"TIN *",field:"taxpayerIdentificationNumber",formData:e,onChange:m,required:!0}),s.jsx(Bt,{label:"Registration Number *",field:"registrationNumber",formData:e,onChange:m,required:!0}),s.jsx(Bt,{label:"Reg. Issued Date",type:"date",field:"registrationIssuedDate",formData:e,onChange:m}),s.jsx(Bt,{label:"Phone Number",field:"phoneNumber",formData:e,onChange:m}),s.jsx(Bt,{label:"Address",field:"address",formData:e,onChange:m}),s.jsx(Bt,{label:"Contact Email",type:"email",field:"contactEmail",formData:e,onChange:m}),s.jsx(Bt,{label:"Years in Operation",type:"number",field:"yearsInOperation",formData:e,onChange:m}),s.jsx(Wt,{label:"Registration Certificate",field:"registrationCertificate",files:i,onFileChange:x}),s.jsx(Wt,{label:"Business License",field:"businessLicense",files:i,onFileChange:x})]})]}),s.jsxs("section",{children:[s.jsxs("h2",{className:"text-sm font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[s.jsx(r,{size:14,className:"text-blue-500"}),"Legal Compliance"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.jsx(Wt,{label:"Tax Clearance",field:"taxClearance",files:i,onFileChange:x}),s.jsx(Wt,{label:"VAT Registration",field:"vatRegistration",files:i,onFileChange:x}),s.jsx(Wt,{label:"Industry Licenses",field:"industryLicenses",multiple:!0,files:i,onFileChange:x}),s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",name:"laborLawCompliance",checked:e.laborLawCompliance,onChange:m})," ","Labor Law Compliance"]}),s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",name:"litigationHistory",checked:e.litigationHistory,onChange:m})," ","No Litigation History"]})]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-sm font-semibold text-gray-800 mb-3",children:"Financial Capability"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.jsx(Wt,{label:"Audited Statements",field:"auditedStatements",multiple:!0,files:i,onFileChange:x}),s.jsx(Bt,{label:"Bank Reference",field:"bankReference",formData:e,onChange:m}),s.jsx(Bt,{label:"Insurance Coverage",field:"insuranceCoverage",formData:e,onChange:m}),s.jsx(Bt,{label:"Annual Turnover",type:"number",field:"annualTurnover",formData:e,onChange:m})]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-sm font-semibold text-gray-800 mb-3",children:"Technical Capacity"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.jsx(Wt,{label:"Relevant Experience",field:"relevantExperience",multiple:!0,files:i,onFileChange:x}),s.jsx(Wt,{label:"Key Personnel",field:"keyPersonnel",multiple:!0,files:i,onFileChange:x}),s.jsx(Wt,{label:"Equipment/Facilities",field:"equipmentFacilities",multiple:!0,files:i,onFileChange:x}),s.jsx(Wt,{label:"Quality Certifications",field:"qualityCertifications",multiple:!0,files:i,onFileChange:x}),s.jsx(Bt,{label:"Delivery Capacity",field:"deliveryCapacity",formData:e,onChange:m})]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-sm font-semibold text-gray-800 mb-3",children:"Past Performance"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.jsx(Wt,{label:"Client References",field:"clientReferences",multiple:!0,files:i,onFileChange:x}),s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",name:"timelyDeliveryRecord",checked:e.timelyDeliveryRecord,onChange:m})," ","Timely Delivery Record"]}),s.jsx(Wt,{label:"Completed Projects",field:"completedProjects",multiple:!0,files:i,onFileChange:x}),s.jsx(Bt,{label:"Performance Ratings",field:"performanceRatings",formData:e,onChange:m})]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-sm font-semibold text-gray-800 mb-3",children:"Health, Safety & Environment"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Safety Policy"}),s.jsxs("select",{name:"safetyPolicy",value:e.safetyPolicy,onChange:e=>a(t=>({...t,safetyPolicy:"true"===e.target.value})),className:"w-full px-3 py-2 text-xs border border-gray-300 rounded-2xl focus:ring-1 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"Select"}),s.jsx("option",{value:"true",children:"Yes"}),s.jsx("option",{value:"false",children:"No"})]})]}),s.jsx(Wt,{label:"Environment Certificate",field:"environmentCertificate",files:i,onFileChange:x}),s.jsx(Wt,{label:"Safety Records",field:"safetyRecords",multiple:!0,files:i,onFileChange:x}),s.jsx(Wt,{label:"Sustainability Practices",field:"sustainabilityPractices",multiple:!0,files:i,onFileChange:x})]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-sm font-semibold text-gray-800 mb-3",children:"Ethics & Governance"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Anti-Corruption Policy"}),s.jsxs("select",{name:"antiCorruptionPolicy",value:e.antiCorruptionPolicy,onChange:e=>a(t=>({...t,antiCorruptionPolicy:"true"===e.target.value})),className:"w-full px-3 py-2 text-xs border border-gray-300 rounded-2xl focus:ring-1 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"Select"}),s.jsx("option",{value:"true",children:"Yes"}),s.jsx("option",{value:"false",children:"No"})]})]}),s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",name:"conflictOfInterest",checked:e.conflictOfInterest,onChange:m})," ","No Conflict of Interest"]}),s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",name:"codeOfConductSigned",checked:e.codeOfConductSigned,onChange:m})," ","Code of Conduct Signed"]}),s.jsx(Wt,{label:"CSR Initiatives",field:"csrInitiatives",multiple:!0,files:i,onFileChange:x})]})]}),s.jsx("div",{className:"flex justify-end border-t border-gray-200 pt-4",children:s.jsx("button",{type:"submit",disabled:d,className:"px-4 py-2 text-xs bg-blue-500 text-white rounded-2xl hover:bg-blue-600 flex items-center gap-1 disabled:opacity-50",children:d?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin w-3 h-3 border-2 border-white border-t-transparent rounded-full"}),"Submitting..."]}):s.jsxs(s.Fragment,{children:[s.jsx(W,{size:14}),"Submit Registration"]})})})]})]})})}const Ht=Object.freeze(Object.defineProperty({__proto__:null,default:qt},Symbol.toStringTag,{value:"Module"})),Vt=({isVisible:e,message:t="Processing..."})=>e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-2xl p-6 flex items-center gap-3",children:[s.jsx(f,{className:"animate-spin w-6 h-6 text-blue-500"}),s.jsx("span",{className:"font-medium",children:t})]})}):null,Gt=({title:e,value:t,icon:a,color:r,trend:i,subtitle:n,prefix:l="",suffix:o="",size:d="normal"})=>{const c="large"===d?"col-span-2":"",m="large"===d?"text-4xl":"text-2xl";return s.jsxs("div",{className:`bg-white rounded-2xl border border-gray-200 p-1.5 hover:shadow-sm transition-shadow ${c}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("div",{className:"p-1.5 rounded-xl "+("blue"===r?"bg-blue-50":"green"===r?"bg-emerald-50":"purple"===r?"bg-purple-50":"orange"===r?"bg-orange-50":"amber"===r?"bg-amber-50":"red"===r?"bg-red-50":"bg-gray-50"),children:s.jsx(a,{size:16,className:"blue"===r?"text-blue-600":"green"===r?"text-emerald-600":"purple"===r?"text-purple-600":"orange"===r?"text-orange-600":"amber"===r?"text-amber-600":"red"===r?"text-red-600":"text-gray-600"})}),i&&s.jsxs("div",{className:"flex items-center gap-1",children:[i>0?s.jsx($,{size:12,className:"text-emerald-500"}):s.jsx(K,{size:12,className:"text-red-500"}),s.jsxs("span",{className:"text-xs font-medium "+(i>0?"text-emerald-500":"text-red-500"),children:[i>0?"+":"",i,"%"]})]})]}),s.jsxs("div",{className:`${m} font-bold text-gray-900 mb-1`,children:[l,t,o]}),s.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:e}),n&&s.jsx("div",{className:"text-xs text-gray-400",children:n})]})},Yt=({item:e,index:t,isNewUser:r})=>s.jsxs(Ie.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.1*t},className:"relative flex items-start gap-3 "+(e.current?"bg-blue-50 border border-blue-200 rounded-xl p-2 -ml-2":""),children:[s.jsx("div",{className:"relative z-10 w-3 h-3 rounded-full border-2 mt-1 "+(e.completed?"bg-green-500 border-green-500":e.current?r&&"start_registration"===e.status?"bg-orange-500 border-orange-500 animate-pulse":"bg-blue-500 border-blue-500 animate-pulse":"bg-white border-gray-300"),children:e.completed&&s.jsx(Z,{size:8,className:"text-white absolute -top-0.5 -left-0.5"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("h4",{className:"font-semibold text-sm "+(e.current?"text-blue-900":"text-gray-900"),children:e.description}),s.jsxs("span",{className:"text-xs "+(e.current?"text-blue-600":"text-gray-500"),children:[e.date," ",e.time&&`• ${e.time}`]})]}),e.current&&r&&"start_registration"===e.status&&s.jsxs("div",{className:"flex items-center gap-1 text-orange-600 text-xs",children:[s.jsx(a,{size:12}),s.jsx("span",{children:"Click the + button to start registration"})]}),e.current&&!r&&s.jsxs("div",{className:"flex items-center gap-1 text-blue-600 text-xs",children:[s.jsx(f,{size:12,className:"animate-spin"}),s.jsx("span",{children:"Currently in progress..."})]})]})]}),Jt=({document:e,onDownload:t})=>s.jsx("div",{className:"bg-white rounded-2xl border border-gray-200 p-2 hover:shadow-sm transition-shadow",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"p-1.5 bg-blue-50 rounded-xl",children:s.jsx(r,{className:"w-4 h-4 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-sm text-gray-900",children:e.name}),s.jsxs("p",{className:"text-xs text-gray-500",children:[e.uploadDate," • ",e.size,e.type&&` • ${e.type.replace(/([A-Z])/g," $1").toLowerCase()}`]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full "+("verified"===e.status?"bg-green-100 text-green-800":"rejected"===e.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:e.status.toUpperCase()}),s.jsx("button",{onClick:()=>t(e.name,e.filePath),className:"p-1 text-gray-400 hover:text-blue-600 rounded-xl",children:s.jsx(x,{size:14})})]})]})});function Qt(){const l=e(),[o,d]=t.useState(null),[c,m]=t.useState(!0),[x,u]=t.useState(null),[g,b]=t.useState("overview"),[j,y]=t.useState(!1),[v,w]=t.useState(""),[k,C]=t.useState("info"),[S,z]=t.useState(!1),[D,A]=t.useState(!1),[I]=N(),[T,L]=t.useState(()=>I.get("section")||"vendor-dash"),[F,E]=t.useState(!1),O="https://backend.nexusmwi.com";t.useEffect(()=>{(async()=>{try{const e=localStorage.getItem("token");0;const t=await fetch(`${O}/api/vendors/vendor-data`,{method:"GET",headers:{"Content-Type":"application/json",...e&&{Authorization:`Bearer ${e}`}}});if(!t.ok){if(404===t.status)return z(!0),A(!0),void d({id:null,registrationStatus:"not_started",isNewUser:!0,timeline:[{status:"start_registration",date:"Not started",time:"",description:"Click the + button to start your registration",completed:!1,current:!0},{status:"document_upload",date:"Pending",time:"",description:"Upload required documents",completed:!1},{status:"document_verification",date:"Pending",time:"",description:"Documents verification",completed:!1},{status:"final_approval",date:"Pending",time:"",description:"Final approval and account activation",completed:!1}],metrics:{completionPercentage:0,daysInReview:0,averageProcessingTime:"5-7 days"}});if(401===t.status)throw new Error("Authentication failed. Please login again.");if(403===t.status)throw new Error("Access denied. You do not have permission to view this data.");if(t.status>=500)throw new Error("Server error. Please try again later.");{const e=await t.text();throw new Error(`HTTP ${t.status}: ${e||"Unknown error"}`)}}const s=await t.json();if(!s||"object"!=typeof s)throw new Error("Invalid API response format");const a=M(s);d(a),z(!1)}catch(e){e.message.includes("fetch")?u("Network error. Please check your internet connection and try again."):e.message.includes("Authentication")?u("Authentication failed. Please login again."):e.message.includes("404")||e.message.includes("Not Found")?(z(!0),A(!0),d({id:null,registrationStatus:"not_started",isNewUser:!0,timeline:[{status:"start_registration",date:"Not started",time:"",description:"Click the + button to start your registration",completed:!1,current:!0},{status:"document_upload",date:"Pending",time:"",description:"Upload required documents",completed:!1},{status:"document_verification",date:"Pending",time:"",description:"Documents verification",completed:!1},{status:"final_approval",date:"Pending",time:"",description:"Final approval and account activation",completed:!1}],metrics:{completionPercentage:0,daysInReview:0,averageProcessingTime:"5-7 days"}})):u(e.message||"Failed to load vendor data")}finally{m(!1)}})()},[O]);const M=e=>{try{if(!e._id)throw new Error("Missing vendor ID in API response");const t=e=>{if(!e)return null;const t=new Date(e);return isNaN(t.getTime())?null:t},s=t(e.createdAt),a=t(e.updatedAt),r=s?Math.floor((new Date-s)/864e5):0,i=e=>{switch(e){case"pending":return 25;case"under_review":return 75;case"approved":return 100;case"rejected":return 50;default:return 0}},n=(e,t,s)=>{const a=[],r=new Date(t);a.push({status:"submitted",date:r.toLocaleDateString(),time:r.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),description:"Registration submitted successfully",completed:!0});const i=new Date(r);if(i.setDate(i.getDate()+1),a.push({status:"document_verification",date:i.toLocaleDateString(),time:i.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),description:"Documents under verification",completed:["under_review","approved","rejected"].includes(e)}),["under_review","approved","rejected"].includes(e)){const t=new Date(r);t.setDate(t.getDate()+2),a.push({status:e,date:t.toLocaleDateString(),time:t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),description:"rejected"===e?"Application was rejected - please review feedback":"Application under review by compliance team",completed:["approved","rejected"].includes(e),current:"under_review"===e})}else"pending"===e&&a.push({status:"under_review",date:"Pending",time:"",description:"Waiting for review by compliance team",completed:!1,current:!0});if("approved"===e&&s){const e=new Date(s);a.push({status:"final_approval",date:e.toLocaleDateString(),time:e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),description:"Final approval and account activation completed",completed:!0})}else"rejected"!==e&&a.push({status:"final_approval",date:"Pending",time:"",description:"Final approval and account activation",completed:!1});return a},l=e=>{if(!e||0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return Number.parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},o=s=>{if(!s||"object"!=typeof s)return[];const a=[];try{Object.entries(s).forEach(([s,r])=>{if(r)if(Array.isArray(r))r.forEach((r,i)=>{if(r&&(r.fileName||r.originalName||r.filename)){const n=r.fileName||r.originalName||r.filename||`${s}_${i+1}`,o=t(r.uploadedAt||r.uploadDate||r.createdAt)?.toLocaleDateString()||"N/A",c=r.size?l(r.size):"N/A",m=r.filePath||r.path||r.url||"";a.push({name:n,type:s.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase()),uploadDate:o,status:d(e.registrationStatus,r.status),size:c,filePath:m})}});else if("object"==typeof r&&(r.fileName||r.originalName||r.filename)){const i=r.fileName||r.originalName||r.filename||s,n=t(r.uploadedAt||r.uploadDate||r.createdAt)?.toLocaleDateString()||"N/A",o=r.size?l(r.size):"N/A",c=r.filePath||r.path||r.url||"";a.push({name:i,type:s.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase()),uploadDate:n,status:d(e.registrationStatus,r.status),size:o,filePath:c})}else"string"==typeof r&&a.push({name:s.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase()),type:s,uploadDate:"N/A",status:d(e.registrationStatus),size:"N/A",filePath:r})})}catch(r){}return a},d=(e,t)=>{if(t)return t.toLowerCase();switch(e){case"approved":return"verified";case"rejected":return"rejected";default:return"pending"}};return{id:e._id,registrationStatus:e.registrationStatus||"pending",submissionDate:s?s.toLocaleDateString():"N/A",approvalDate:a?a.toLocaleDateString():null,isNewUser:!1,basicInfo:{countryOfRegistration:e.countryOfRegistration||"N/A",businessName:e.businessName||"N/A",taxpayerIdentificationNumber:e.taxpayerIdentificationNumber||"N/A",tinIssuedDate:t(e.tinIssuedDate)?.toLocaleDateString()||"N/A",companyType:e.companyType||"N/A",formOfBusiness:e.formOfBusiness||"N/A",ownershipType:e.ownershipType||"N/A",businessCategory:e.categories?e.categories.join(", "):"N/A",registrationNumber:e.registrationNumber||"N/A",registrationIssuedDate:t(e.registrationIssuedDate)?.toLocaleDateString()||"N/A"},contactInfo:e.vendor?{authorizedUser:`${e.vendor.firstName||""} ${e.vendor.lastName||""}`.trim()||"N/A",phone:e.vendor.phoneNumber||"N/A",email:e.vendor.email||"N/A"}:{authorizedUser:"N/A",phone:"N/A",email:"N/A"},documents:o(e.documents),timeline:n(e.registrationStatus||"pending",e.createdAt,e.updatedAt),metrics:{completionPercentage:i(e.registrationStatus),daysInReview:r,averageProcessingTime:"5-7 days"},vendor:e.vendor||null}}catch(t){throw new Error("Failed to process vendor data: "+t.message)}},_=(e,t="info")=>{w(e),C(t),y(!0),setTimeout(()=>y(!1),4e3)},R=async(e,t)=>{try{if(!t)return void _(`No file path available for ${e}`,"error");_(`Downloading ${e}...`,"info");const s=localStorage.getItem("token");let a=t;t.startsWith("http")||t.startsWith("/api/")||(a=`${O}/api/vendors/download-document`);const r=await fetch(a,{method:t.startsWith("http")?"GET":"POST",headers:{"Content-Type":"application/json",...s&&{Authorization:`Bearer ${s}`}},...!t.startsWith("http")&&{body:JSON.stringify({filePath:t})}});if(!r.ok)throw new Error(`Download failed with status: ${r.status}`);const i=await r.blob();if(0===i.size)throw new Error("Downloaded file is empty");const n=window.URL.createObjectURL(i),l=document.createElement("a");l.style.display="none",l.href=n,l.download=e,document.body.appendChild(l),l.click(),window.URL.revokeObjectURL(n),document.body.removeChild(l),_(`${e} downloaded successfully!`,"success")}catch(s){_(`Failed to download ${e}: ${s.message}`,"error")}},U=()=>{A(!1),l(`?section=${"registration"}`,{replace:!0})};return x?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-2xl max-w-md w-full text-center",children:[s.jsx(a,{size:24,className:"mx-auto mb-2"}),s.jsx("p",{className:"font-medium",children:x}),s.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Try Again"})]})}):s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx(Vt,{isVisible:c,message:"Loading dashboard..."}),s.jsxs("main",{className:"p-4 space-y-4 max-w-7xl mx-auto",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{children:s.jsx("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:"Vendor Management Dashboard"})}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsx("button",{onClick:U,className:"p-2 rounded-2xl transition-colors "+(S?"bg-blue-600 text-white hover:bg-blue-700 animate-pulse":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:s.jsx(q,{size:16})})})]}),D&&S&&s.jsx(Ie.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"space-y-4",children:s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-4 flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-red-100 rounded-xl",children:s.jsx(H,{size:20,className:"text-red-600"})}),s.jsx("div",{children:s.jsx("p",{className:"text-red-700 text-sm",children:"You haven't started your registration yet. Click the + button to begin your vendor registration process."})})]})})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(Gt,{title:"Registration Status",value:S?"Not Started":o?(e=>{if(!e)return"Loading...";switch(e){case"not_started":return"Not Started";case"pending":return"Pending";case"under_review":return"Under Review";case"approved":return"Approved";case"rejected":return"Rejected";default:return"Unknown"}})(o.registrationStatus):"Loading...",icon:o?(e=>{if(!e)return s.jsx(a,{size:16});switch(e){case"not_started":default:return s.jsx(a,{size:16});case"pending":return s.jsx(n,{size:16});case"under_review":return s.jsx(f,{size:16,className:"animate-spin"});case"approved":return s.jsx(i,{size:16});case"rejected":return s.jsx(Q,{size:16})}})(o.registrationStatus).type:a,color:o?"approved"===o.registrationStatus?"green":"under_review"===o.registrationStatus?"blue":"rejected"===o.registrationStatus?"red":"amber":"gray",subtitle:"Current status"}),s.jsx(Gt,{title:"Completion",value:o?o.metrics.completionPercentage:0,suffix:"%",icon:$,color:"green",subtitle:"Progress made"}),s.jsx(Gt,{title:"Days in Review",value:S?"0":o?o.metrics.daysInReview:0,icon:n,color:"purple",subtitle:"Processing time"}),s.jsx(Gt,{title:"Vendor ID",value:S?"N/A":o?o.id?.slice(-8):"Loading...",icon:V,color:"amber",subtitle:"Your identifier"})]}),s.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 p-4",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsx("div",{className:"flex items-center gap-2",children:s.jsx("h3",{className:"font-semibold text-gray-900",children:"Registration Progress"})})}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute left-6 top-0 bottom-0 w-0.5 bg-gray-200"}),s.jsx("div",{className:"absolute left-6 top-0 w-0.5 bg-gradient-to-b from-blue-500 to-purple-600 transition-all duration-1000",style:{height:o?o.timeline.filter(e=>e.completed).length/o.timeline.length*100+"%":"0%"}}),s.jsx("div",{className:"space-y-4",children:o&&o.timeline.map((e,t)=>s.jsx(Yt,{item:e,index:t,isNewUser:S},t))})]})]}),!S&&o&&s.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 overflow-hidden",children:[s.jsx("div",{className:"border-b border-gray-200",children:s.jsx("nav",{className:"flex space-x-6 px-4",children:[{id:"overview",label:"Business Overview",icon:h},{id:"documents",label:"Documents",icon:r},{id:"contact",label:"Contact Information",icon:G}].map(e=>s.jsxs("button",{onClick:()=>b(e.id),className:"flex items-center gap-2 py-3 px-2 border-b-2 font-medium text-sm transition-colors "+(g===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[s.jsx(e.icon,{size:16}),e.label]},e.id))})}),s.jsxs("div",{className:"p-4",children:["overview"===g&&s.jsxs(Ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Business Information"}),s.jsxs("button",{onClick:()=>{l("/vendor-registration/edit")},className:"px-3 py-1.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 text-sm",children:[s.jsx(Y,{size:14}),"Edit Information"]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:o.basicInfo&&Object.entries(o.basicInfo).map(([e,t])=>s.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:e.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase())}),s.jsx("p",{className:"text-gray-900 font-medium text-sm",children:t||"N/A"})]},e))})]}),"documents"===g&&s.jsxs(Ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Uploaded Documents"}),s.jsxs("div",{className:"text-sm text-gray-500",children:[o.documents?.length||0," document(s)"]})]}),o.documents&&o.documents.length>0?s.jsx("div",{className:"space-y-3",children:o.documents.map((e,t)=>s.jsx(Jt,{document:e,onDownload:R},t))}):s.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-2xl border border-gray-200",children:[s.jsx(r,{size:48,className:"text-gray-300 mx-auto mb-4"}),s.jsx("h4",{className:"text-lg font-medium text-gray-500 mb-2",children:"No Documents Uploaded"}),s.jsx("p",{className:"text-gray-400 max-w-md mx-auto",children:"No documents have been uploaded yet. Documents will appear here once you upload them during the registration process."})]})]}),"contact"===g&&s.jsxs(Ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Contact Information"}),o.contactInfo?s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(P,{size:18,className:"text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-gray-900 text-sm",children:"Authorized User"}),s.jsx("p",{className:"text-gray-700 text-sm",children:o.contactInfo.authorizedUser})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(G,{size:18,className:"text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-gray-900 text-sm",children:"Phone Number"}),s.jsx("p",{className:"text-gray-700 text-sm",children:o.contactInfo.phone})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(J,{size:18,className:"text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-gray-900 text-sm",children:"Email Address"}),s.jsx("p",{className:"text-gray-700 text-sm",children:o.contactInfo.email})]})]})]})}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(G,{size:48,className:"text-gray-300 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"No contact information available"})]})]})]})]}),S&&s.jsxs(Ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-2xl border border-blue-200 p-6 text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(h,{size:32,className:"text-white"})}),s.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Ready to Get Started?"}),s.jsx("p",{className:"text-gray-600 mb-6 max-w-2xl mx-auto",children:"Join our vendor network by completing the registration process. It only takes a few minutes to submit your business information and required documents."}),s.jsx("button",{onClick:U,className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl hover:from-blue-700 hover:to-purple-700 transition-all duration-200 font-semibold shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:"Start Your Registration"})]})]}),j&&s.jsx(Ie.div,{initial:{opacity:0,y:50,scale:.3},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.5},className:"fixed bottom-4 right-4 z-50",children:s.jsx("div",{className:"px-6 py-4 rounded-xl shadow-2xl border "+("success"===k?"bg-green-50 text-green-800 border-green-200":"error"===k?"bg-red-50 text-red-800 border-red-200":"bg-blue-50 text-blue-800 border-blue-200"),children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center "+("success"===k?"bg-green-500":"error"===k?"bg-red-500":"bg-blue-500"),children:s.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),s.jsx("span",{className:"font-medium",children:v}),s.jsx("button",{onClick:()=>y(!1),className:"ml-4 text-gray-400 hover:text-gray-600",children:s.jsx(p,{size:18})})]})})})]})}const Kt=Object.freeze(Object.defineProperty({__proto__:null,default:Qt},Symbol.toStringTag,{value:"Module"})),Zt=({isVisible:e,message:t="Processing..."})=>e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-2xl p-6 flex items-center gap-3",children:[s.jsx(f,{className:"animate-spin w-6 h-6 text-blue-500"}),s.jsx("span",{className:"font-medium",children:t})]})}):null,Xt=({title:e,value:t,icon:a,color:r,trend:i,subtitle:n,prefix:l="",suffix:o="",size:d="normal"})=>{const c="large"===d?"col-span-2":"",m="large"===d?"text-4xl":"text-2xl";return s.jsxs("div",{className:`bg-white rounded-2xl border border-gray-200 p-1.5 hover:shadow-sm transition-shadow ${c}`,children:[s.jsx("div",{className:"flex items-center justify-between mb-1",children:s.jsx("div",{className:"p-1.5 rounded-xl "+("blue"===r?"bg-blue-50":"green"===r?"bg-emerald-50":"purple"===r?"bg-purple-50":"orange"===r?"bg-orange-50":"red"===r?"bg-red-50":"bg-gray-50"),children:s.jsx(a,{size:16,className:"blue"===r?"text-blue-600":"green"===r?"text-emerald-600":"purple"===r?"text-purple-600":"orange"===r?"text-orange-600":"red"===r?"text-red-600":"text-gray-600"})})}),s.jsxs("div",{className:`${m} font-bold text-gray-900 mb-1`,children:[l,t,o]}),s.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:e}),n&&s.jsx("div",{className:"text-xs text-gray-400",children:n})]})};function es(){const[a,n]=t.useState([]),[l,o]=t.useState(null),[x,u]=t.useState(!1),[g,h]=t.useState(null),[b,f]=t.useState(""),[y,v]=t.useState(null),[N,w]=t.useState(null),[k,C]=t.useState(null),[S,z]=t.useState(!1),[D,A]=t.useState(""),[P,I]=t.useState("success"),[T,$]=t.useState(!1),[F,E]=t.useState(!1),O="https://backend.nexusmwi.com",M=e(),[_,U]=t.useState({}),[B,W]=t.useState("all"),q=({tender:e,onMenuClick:t,showMenuId:a,onStartPreApproval:r,hasApplied:i})=>{const n=(e=>{const t=new Date,s=new Date(e)-t;return Math.ceil(s/864e5)})(e.deadline);return s.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 p-2 hover:shadow-sm transition-shadow",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[s.jsx("div",{className:"flex items-center gap-1.5",children:s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-sm text-gray-900",children:e.title}),s.jsx("p",{className:"text-xs text-gray-500",children:e.company.name})]})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${(e=>{switch(e){case"open":return"bg-green-100 text-green-800";case"under_review":return"bg-yellow-100 text-yellow-800";case"closed":return"bg-red-100 text-red-800";case"awarded":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}})(e.status)}`,children:e.status.replace("_"," ")}),s.jsx("button",{"data-tender-id":e.id,onClick:()=>t(e.id),className:"p-1 text-gray-400 hover:text-blue-600 rounded-xl",children:s.jsx(ee,{size:16})})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-1.5 mb-1.5",children:[s.jsxs("div",{className:"text-center p-1.5 bg-gray-50 rounded-xl",children:[s.jsx("div",{className:"text-base font-bold text-gray-900",children:(d=e.budget,new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(d))}),s.jsx("div",{className:"text-xs text-gray-500",children:"Budget"})]}),s.jsxs("div",{className:"text-center p-1.5 bg-gray-50 rounded-xl",children:[s.jsx("div",{className:"text-base font-bold "+(n<=7?"text-red-600":n<=14?"text-yellow-600":"text-green-600"),children:n>0?`${n}d`:"Expired"}),s.jsx("div",{className:"text-xs text-gray-500",children:"Days Left"})]})]}),s.jsxs("div",{className:"space-y-0.5 mb-1.5",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-xs text-gray-600",children:"Category"}),s.jsx("span",{className:"text-xs font-medium",children:e.category})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-xs text-gray-600",children:"Location"}),s.jsx("span",{className:"text-xs font-medium",children:e.location})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-xs text-gray-600",children:"Deadline"}),s.jsx("span",{className:"text-xs font-medium",children:(o=e.deadline,new Date(o).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}))})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-xs text-gray-600",children:"Urgency"}),s.jsx("span",{className:`text-xs font-medium ${(e=>{switch(e){case"high":return"text-red-600";case"medium":return"text-yellow-600";case"low":return"text-green-600";default:return"text-gray-600"}})(e.urgency)}`,children:e.urgency})]})]}),s.jsxs("div",{className:"mb-2",children:[s.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Description"}),s.jsx("p",{className:"text-xs text-gray-800 line-clamp-2",children:e.description})]}),e.requirements&&e.requirements.length>0&&s.jsxs("div",{className:"mb-2",children:[s.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Requirements"}),s.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.requirements.slice(0,2).map((e,t)=>s.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded-full font-medium",children:e},t)),e.requirements.length>2&&s.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full font-medium",children:["+",e.requirements.length-2]})]})]}),s.jsxs("div",{className:"flex justify-between items-center pt-1.5 border-t border-gray-100",children:[s.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[s.jsx(J,{size:12}),s.jsx("span",{className:"truncate",children:e.contactEmail})]}),s.jsxs("div",{className:"flex gap-1",children:[i?s.jsxs("button",{onClick:()=>{const t=`?section=bid&tenderId=${e._id}&vendorId=${l.id}`;M(t)},className:"px-3 py-1 bg-gray-500 text-white text-xs font-medium rounded-xl hover:bg-gray-600 transition-colors flex items-center gap-1",children:[s.jsx(j,{size:12}),"View"]}):"open"===e.status&&n>0&&s.jsxs("button",{onClick:()=>r(e),className:"px-3 py-1 bg-blue-500 text-white text-xs font-medium rounded-xl hover:bg-blue-600 transition-colors flex items-center gap-1",children:[s.jsx(R,{size:12}),"Apply"]}),s.jsx("button",{className:"p-1 text-gray-400 hover:text-blue-600 rounded-xl",children:s.jsx(j,{size:14})})]})]})]});var o,d};t.useEffect(()=>{n(a)},[]),t.useEffect(()=>{(async()=>{u(!0);try{const e=localStorage.getItem("token"),t=await fetch(`${O}/api/tenders`,{headers:{Authorization:`Bearer ${e}`}});if(t.ok){const e=await t.json();n(e)}}catch(e){h("Failed to load data. Please try again.")}finally{u(!1)}})()},[O]),t.useEffect(()=>{(async()=>{try{const e=localStorage.getItem("token");0;const t=await fetch(`${O}/api/vendors/vendor-data`,{method:"GET",headers:{"Content-Type":"application/json",...e&&{Authorization:`Bearer ${e}`}}});if(!t.ok){if(404===t.status)return $(!0),E(!0),void o({id:null,registrationStatus:"not_started",isNewUser:!0,timeline:[{status:"start_registration",date:"Not started",time:"",description:"Click the + button to start your registration",completed:!1,current:!0},{status:"document_upload",date:"Pending",time:"",description:"Upload required documents",completed:!1},{status:"document_verification",date:"Pending",time:"",description:"Documents verification",completed:!1},{status:"final_approval",date:"Pending",time:"",description:"Final approval and account activation",completed:!1}],metrics:{completionPercentage:0,daysInReview:0,averageProcessingTime:"5-7 days"}});if(401===t.status)throw new Error("Authentication failed. Please login again.");if(403===t.status)throw new Error("Access denied. You do not have permission to view this data.");if(t.status>=500)throw new Error("Server error. Please try again later.");{const e=await t.text();throw new Error(`HTTP ${t.status}: ${e||"Unknown error"}`)}}const s=await t.json();if(!s||"object"!=typeof s)throw new Error("Invalid API response format");const a=G(s);o(a),$(!1)}catch(e){e.message.includes("fetch")?h("Network error. Please check your internet connection and try again."):e.message.includes("Authentication")?h("Authentication failed. Please login again."):e.message.includes("404")||e.message.includes("Not Found")?($(!0),E(!0),o({id:null,registrationStatus:"not_started",isNewUser:!0,timeline:[{status:"start_registration",date:"Not started",time:"",description:"Click the + button to start your registration",completed:!1,current:!0},{status:"document_upload",date:"Pending",time:"",description:"Upload required documents",completed:!1},{status:"document_verification",date:"Pending",time:"",description:"Documents verification",completed:!1},{status:"final_approval",date:"Pending",time:"",description:"Final approval and account activation",completed:!1}],metrics:{completionPercentage:0,daysInReview:0,averageProcessingTime:"5-7 days"}})):h(e.message||"Failed to load vendor data")}finally{u(!1)}})()},[O]),t.useEffect(()=>{l?.id&&a.length>0&&a.forEach(e=>{V(e._id)})},[l?.id,a]);const V=async e=>{try{const t=localStorage.getItem("token"),s=await fetch(`${O}/api/bids/check-application/${l.id}/${e}`,{headers:{Authorization:`Bearer ${t}`}});if(s.ok){const t=await s.json();return U(s=>({...s,[e]:t.data.hasApplied})),t.data.hasApplied}return!1}catch(t){return!1}},G=e=>{try{if(!e._id)throw new Error("Missing vendor ID in API response");const t=e=>{if(!e)return null;const t=new Date(e);return isNaN(t.getTime())?null:t},s=t(e.createdAt),a=t(e.updatedAt),r=s?Math.floor((new Date-s)/864e5):0,i=e=>{switch(e){case"pending":return 25;case"under_review":return 75;case"approved":return 100;case"rejected":return 50;default:return 0}},n=(e,t,s)=>{const a=[],r=new Date(t);a.push({status:"submitted",date:r.toLocaleDateString(),time:r.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),description:"Registration submitted successfully",completed:!0});const i=new Date(r);if(i.setDate(i.getDate()+1),a.push({status:"document_verification",date:i.toLocaleDateString(),time:i.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),description:"Documents under verification",completed:["under_review","approved","rejected"].includes(e)}),["under_review","approved","rejected"].includes(e)){const t=new Date(r);t.setDate(t.getDate()+2),a.push({status:e,date:t.toLocaleDateString(),time:t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),description:"rejected"===e?"Application was rejected - please review feedback":"Application under review by compliance team",completed:["approved","rejected"].includes(e),current:"under_review"===e})}else"pending"===e&&a.push({status:"under_review",date:"Pending",time:"",description:"Waiting for review by compliance team",completed:!1,current:!0});if("approved"===e&&s){const e=new Date(s);a.push({status:"final_approval",date:e.toLocaleDateString(),time:e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),description:"Final approval and account activation completed",completed:!0})}else"rejected"!==e&&a.push({status:"final_approval",date:"Pending",time:"",description:"Final approval and account activation",completed:!1});return a};return{id:e._id,registrationStatus:e.registrationStatus||"pending",submissionDate:s?s.toLocaleDateString():"N/A",approvalDate:a?a.toLocaleDateString():null,isNewUser:!1,basicInfo:{countryOfRegistration:e.countryOfRegistration||"N/A",businessName:e.businessName||"N/A",taxpayerIdentificationNumber:e.taxpayerIdentificationNumber||"N/A",tinIssuedDate:t(e.tinIssuedDate)?.toLocaleDateString()||"N/A",companyType:e.companyType||"N/A",formOfBusiness:e.formOfBusiness||"N/A",ownershipType:e.ownershipType||"N/A",businessCategory:e.categories?e.categories.join(", "):"N/A",registrationNumber:e.registrationNumber||"N/A",registrationIssuedDate:t(e.registrationIssuedDate)?.toLocaleDateString()||"N/A"},contactInfo:e.vendor?{authorizedUser:`${e.vendor.firstName||""} ${e.vendor.lastName||""}`.trim()||"N/A",phone:e.vendor.phoneNumber||"N/A",email:e.vendor.email||"N/A"}:{authorizedUser:"N/A",phone:"N/A",email:"N/A"},documents:e.documents&&e.documents.length>0?{powerOfAttorney:{name:"Power of Attorney",uploadDate:t(e.createdAt)?.toLocaleDateString()||"N/A",status:"approved"===e.registrationStatus?"verified":"pending",size:"N/A",filePath:""}}:null,timeline:n(e.registrationStatus||"pending",e.createdAt,e.updatedAt),metrics:{completionPercentage:i(e.registrationStatus),daysInReview:r,averageProcessingTime:"5-7 days"},vendor:e.vendor||null}}catch(t){throw new Error("Failed to process vendor data: "+t.message)}},Y=a.filter(e=>{const t="all"===B||e.status===B,s=e.title?.toLowerCase().includes(b.toLowerCase())||!1,a=e.company?.name?.toLowerCase().includes(b.toLowerCase())||!1,r=e.category?.toLowerCase().includes(b.toLowerCase())||!1,i=e.location?.toLowerCase().includes(b.toLowerCase())||!1;return t&&(s||a||r||i)}),Q=a.length,K=a.filter(e=>"open"===e.status).length,Z=a.filter(e=>"closed"===e.status).length,te=a.filter(e=>"awarded"===e.status).length,se=a.reduce((e,t)=>e+(t.budget||0),0),ae=Q>0?se/Q:0,re=e=>e>=1e6?`$${(e/1e6).toFixed(1)}M`:e>=1e3?`$${(e/1e3).toFixed(0)}K`:`$${e}`,ie=async e=>{v(e),u(!0),A(""),I("success");try{const t=localStorage.getItem("token"),s=await fetch(`${O}/api/prequalifications/vendor/${l.id}`,{method:"GET",headers:{"Content-Type":"application/json",...t&&{Authorization:`Bearer ${t}`}}});let a=null;if(s.ok){a=(await s.json()).data}if(!a){const e=await fetch(`${O}/api/prequalifications`,{method:"POST",headers:{"Content-Type":"application/json",...t&&{Authorization:`Bearer ${t}`}},body:JSON.stringify({vendorId:l.id})});if(!e.ok)throw new Error("Failed to create pre-qualification record");a=(await e.json()).data}const r=await fetch(`${O}/api/vendors/send-pre-qual-email`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({tenderTitle:e.title,preQualStatus:a.status,preQualScore:a.score,vendorId:l.id,tenderId:e._id})});if(!r.ok)throw new Error("Failed to send email notification");{const t=await r.json(),s=t.simulatedData?.status||a.status,i=t.simulatedData?.score||a.score,n=70;if("rejected"===s||i<n){const e=a.reasons||[],t=["certificate","license","registration","statement","policy","clearance","reference","insurance"],s=e.filter(e=>t.some(t=>e.toLowerCase().includes(t))).slice(0,3);let r=`Score: ${i}%`;if(s.length>0){r+=` - Add: ${s.map(e=>e.replace(" is missing or invalid","").replace("Registration Certificate","Business Reg.").replace("Business License","Trade License")).join(", ")}`}else r+=` - Below required ${n}%`;A(r),I("error"),z(!0)}else{A(`Approved! Score: ${i}% - Redirecting to bid portal...`),I("success"),z(!0);const t=`?section=bid&tenderId=${e._id}&vendorId=${l.id}&bidId=${a._id}`;M(t)}}}catch(t){A("Error processing application"),I("error"),z(!0)}finally{u(!1)}},ne=e=>{w(N===e?null:e)};return g?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-2xl",children:g})}):s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx(Zt,{isVisible:x,message:"Loading tenders..."}),s.jsxs("main",{className:"p-4 space-y-4 max-w-7xl mx-auto",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Available Tenders"}),s.jsx("p",{className:"text-gray-600",children:"Browse and apply for business opportunities"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"relative",children:[s.jsx(c,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search tenders...",value:b,onChange:e=>f(e.target.value),className:"pl-10 pr-4 py-2 border border-gray-200 rounded-2xl text-sm bg-white"})]}),s.jsxs("select",{value:B,onChange:e=>W(e.target.value),className:"px-4 py-2 border border-gray-200 rounded-2xl text-sm bg-white",children:[s.jsxs("option",{value:"all",children:["All Status (",Q,")"]}),s.jsxs("option",{value:"open",children:["Open (",K,")"]}),s.jsxs("option",{value:"closed",children:["Closed (",Z,")"]}),s.jsxs("option",{value:"awarded",children:["Awarded (",te,")"]}),s.jsx("option",{value:"cancelled",children:"Cancelled"})]}),s.jsxs("button",{onClick:()=>{u(!0),setTimeout(()=>{u(!1)},1e3)},disabled:x,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-2xl font-medium hover:bg-gray-200 transition-colors disabled:opacity-50",children:[s.jsx(m,{size:16,className:x?"animate-spin":""}),"Refresh"]})]})]}),F&&T&&s.jsx(Ie.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"space-y-4",children:s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-4 flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-red-100 rounded-xl",children:s.jsx(H,{size:20,className:"text-red-600"})}),s.jsx("div",{children:s.jsx("p",{className:"text-red-700 text-sm",children:"You haven't started your registration yet. Click the registration link to begin your vendor registration process."})})]})})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(Xt,{title:"Total Tenders",value:Q,icon:r,color:"blue",subtitle:"Available opportunities"}),s.jsx(Xt,{title:"Open Tenders",value:K,icon:i,color:"green",trend:8,subtitle:"Currently accepting bids"}),s.jsx(Xt,{title:"Total Value",value:re(se),icon:d,color:"purple",trend:15,subtitle:"Combined tender value"}),s.jsx(Xt,{title:"Avg Budget",value:re(ae),icon:X,color:"orange",trend:-3,subtitle:"Average tender budget"})]}),s.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("div",{className:"flex items-center gap-2",children:s.jsx("h3",{className:"font-semibold text-gray-900",children:"Available Tenders"})}),s.jsx("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:s.jsxs("span",{children:[Y.length," of ",Q," tenders"]})})]}),0===Y.length?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:s.jsx(r,{size:32,className:"text-gray-400"})}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:b?"No tenders match your search":"No tenders available"}),s.jsx("p",{className:"text-gray-500 mb-4",children:b?"Try adjusting your search terms to find relevant tenders.":"Check back later for new tender opportunities."})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:Y.map(e=>s.jsx(q,{tender:e,onMenuClick:ne,showMenuId:N,actionLoading:k,onStartPreApproval:ie,hasApplied:_[e._id]},e.id))})]})]}),S&&s.jsx("div",{className:"fixed top-4 right-4 z-50 max-w-sm",children:s.jsx("div",{className:"p-3 rounded-xl border shadow-sm "+("success"===P?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"),children:s.jsxs("div",{className:"flex items-center gap-2",children:["success"===P?s.jsx(i,{size:16,className:"flex-shrink-0"}):s.jsx(L,{size:16,className:"flex-shrink-0"}),s.jsx("span",{className:"text-sm font-medium leading-tight",children:D}),s.jsx("button",{onClick:()=>z(!1),className:"ml-1 text-gray-400 hover:text-gray-600 flex-shrink-0",children:s.jsx(p,{size:16})})]})})})]})}const ts=Object.freeze(Object.defineProperty({__proto__:null,default:es},Symbol.toStringTag,{value:"Module"})),ss=({isVisible:e,message:t="Processing..."})=>e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-2xl p-6 flex items-center gap-3",children:[s.jsx(f,{className:"animate-spin w-6 h-6 text-blue-500"}),s.jsx("span",{className:"font-medium",children:t})]})}):null,as=({currentStatus:e})=>{const t=[{id:"submitted",label:"Bid Submitted",description:"Your bid has been received"},{id:"under_review",label:"Under Review",description:"Initial document review"},{id:"technical_evaluation",label:"Technical Evaluation",description:"Technical compliance check"},{id:"financial_evaluation",label:"Financial Evaluation",description:"Price and financial assessment"},{id:"awarded",label:"Award Decision",description:"Final award decision"}];return s.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 p-6",children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Bid Status Timeline"}),s.jsx("div",{className:"space-y-4",children:t.map((a,r)=>{const l=(s=>{const a=t.map(e=>e.id),r=a.indexOf(e),i=a.indexOf(s);return i<r?"completed":i===r?"current":"upcoming"})(a.id);return s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium "+("completed"===l?"bg-green-500 text-white":"current"===l?"bg-blue-500 text-white":"bg-gray-200 text-gray-500"),children:"completed"===l?s.jsx(i,{size:16}):r+1}),r<t.length-1&&s.jsx("div",{className:"w-0.5 h-8 mt-1 "+("completed"===l?"bg-green-500":"bg-gray-200")})]}),s.jsxs("div",{className:"flex-1 pb-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h4",{className:"font-medium text-gray-900",children:a.label}),"current"===l&&s.jsxs("div",{className:"flex items-center gap-1 text-blue-600 text-sm",children:[s.jsx(n,{size:14}),s.jsx("span",{children:"In Progress"})]})]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:a.description})]})]},a.id)})})]})},rs=({tender:e,onDocumentUpload:a,uploadedDocuments:n})=>{const[l,o]=t.useState(null);return n&&0!==Object.keys(n).length?s.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 p-6",children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Required Documents"}),s.jsx("div",{className:"space-y-3",children:[{id:"technical_proposal",name:"Technical Proposal",description:"Detailed technical solution",accept:".pdf,.doc,.docx"},{id:"financial_proposal",name:"Financial Proposal",description:"Detailed cost breakdown",accept:".pdf,.xlsx,.xls"},{id:"company_profile",name:"Company Profile",description:"Company background and experience",accept:".pdf,.doc,.docx"}].map(e=>{const t=n[e.id],d=t?.uploaded;return s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-xl",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(r,{size:16,className:"text-gray-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-sm text-gray-900",children:e.name}),s.jsx("p",{className:"text-xs text-gray-500",children:e.description}),d&&s.jsxs("p",{className:"text-xs text-green-600",children:["Uploaded: ",t.name]})]})]}),s.jsx("div",{className:"flex items-center gap-2",children:d?s.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[s.jsx(i,{size:16}),s.jsx("span",{className:"text-xs",children:"Uploaded"})]}):s.jsxs("label",{className:"cursor-pointer",children:[s.jsx("input",{type:"file",className:"hidden",onChange:t=>(async(e,t,s)=>{const r=Array.from(e.target.files);if(0!==r.length){o(t);try{await a(r,t,s),e.target.value=""}catch(i){}finally{o(null)}}})(t,e.id,e.name),accept:e.accept,disabled:l===e.id}),s.jsx("div",{className:"flex items-center gap-1 px-3 py-1 text-xs font-medium rounded-lg transition-colors "+(l===e.id?"bg-gray-400 text-white cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"),children:l===e.id?"Uploading...":"Upload"})]})})]},e.id)})})]}):s.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 p-6",children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Required Documents"}),s.jsxs("div",{className:"text-center py-4",children:[s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500 mx-auto"}),s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Loading documents..."})]})]})},is=({bidAmount:e,setBidAmount:t,proposal:a,setProposal:r})=>s.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 p-6",children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Bid Details"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bid Amount (USD)"}),s.jsxs("div",{className:"relative",children:[s.jsx(d,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s.jsx("input",{type:"number",value:e,onChange:e=>t(e.target.value),className:"pl-10 w-full px-3 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your bid amount",min:"0",step:"0.01"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Technical Proposal"}),s.jsx("textarea",{value:a,onChange:e=>r(e.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Describe your technical approach, methodology, and why you're the best choice for this tender..."})]})]})]});function ns({tenderId:r,vendorId:n,bidId:l}){const[o,c]=t.useState(null),[m,x]=t.useState(null),[u,p]=t.useState(null),[g,b]=t.useState(!0),[f,j]=t.useState(null),[y,v]=t.useState(null),[N,w]=t.useState(!1),[C,S]=t.useState(""),[z,D]=t.useState("success"),[A,I]=t.useState(""),[L,$]=t.useState(""),[F,E]=t.useState({}),[O,M]=t.useState(!1),[_,R]=t.useState(!1),U=(e,t="success")=>{S(e),D(t),w(!0),setTimeout(()=>{w(!1)},5e3)},B=e(),W="https://backend.nexusmwi.com",q=[{id:"technical_proposal",name:"Technical Proposal"},{id:"financial_proposal",name:"Financial Proposal"},{id:"company_profile",name:"Company Profile"}];t.useEffect(()=>{m?.documents&&q.forEach(e=>{m.documents.find(t=>t.type===e.id),F[e.id]})},[m,F]),t.useEffect(()=>{const e=new URLSearchParams(window.location.search),t={tenderId:r||e.get("tenderId"),vendorId:n||e.get("vendorId"),bidId:l||e.get("bidId")};if(!t.tenderId||!t.vendorId){return j("Invalid link parameters. Please make sure you're using a valid bid invitation link from the Tenders page."),void b(!1)}v(t)},[r,n,l]);const H=e=>{const t={};q.forEach(e=>{t[e.id]={uploaded:!1,name:e.name}}),Array.isArray(e.documents)&&e.documents.forEach(e=>{t[e.type]&&(t[e.type]={uploaded:!0,name:e.name,filePath:e.filePath.startsWith("/")?e.filePath:`/${e.filePath}`,document:e})}),E(t)};t.useEffect(()=>{if(!y)return;(async()=>{const{tenderId:e,vendorId:t}=y;if(!e||!t){return j("Invalid link parameters. Please make sure you're using a valid bid invitation link."),void b(!1)}try{const s=localStorage.getItem("token");if(!s){return j("Please log in to access the bid portal"),void b(!1)}const a=await fetch(`${W}/api/tenders/${e}`,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});if(!a.ok){await a.text();throw 404===a.status?new Error(`Tender not found. The tender may have been removed or the ID is incorrect. Tender ID: ${e}`):401===a.status?new Error("Authentication failed. Please log in again."):new Error(`Failed to fetch tender: ${a.status} ${a.statusText}`)}const r=await a.json();c(r);const i=await fetch(`${W}/api/vendors/${t}`,{headers:{Authorization:`Bearer ${s}`}});if(!i.ok)throw new Error(`Failed to fetch vendor details: ${i.status} ${i.statusText}`);{const e=await i.json();p(e)}const n=await fetch(`${W}/api/bids/vendor/${t}/tender/${e}`,{headers:{Authorization:`Bearer ${s}`}});if(n.ok){const e=await n.json(),t=e.data||e;x(t),H(t),I(t.bidAmount?.toString()||""),$(t.proposal||"")}else(()=>{const e={};q.forEach(t=>{e[t.id]={uploaded:!1,name:t.name}}),E(e),I(""),$("")})()}catch(s){j(s.message)}finally{b(!1)}})()},[y,W]),t.useEffect(()=>{m&&m.documents&&H(m)},[m]),t.useEffect(()=>{(()=>{const e=q.every(e=>!0===F[e.id]?.uploaded),t=A&&parseFloat(A)>0,s=L&&L.trim().length>0;M(e&&t&&s)})()},[F,A,L]);const V=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),Y=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return y?g?s.jsx(ss,{isVisible:!0,message:"Loading bid details..."}):f?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl border border-red-200 p-6 max-w-md text-center",children:[s.jsx(a,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Unable to Load Bid"}),s.jsx("p",{className:"text-gray-600 mb-4",children:f}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("button",{onClick:()=>B("?section=tenders"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900",children:[s.jsx(te,{size:20}),s.jsx("span",{children:"Back to Tenders"})]}),s.jsx("button",{onClick:()=>window.location.reload(),className:"w-full px-4 py-2 bg-gray-500 text-white rounded-xl hover:bg-gray-600 transition-colors",children:"Try Again"})]})]})}):o?s.jsxs("div",{className:"min-h-screen bg-gray-50",children:["draft"===m?.status&&s.jsx("div",{className:"max-w-7xl mx-auto p-4 pb-0",children:s.jsx("div",{className:"bg-white rounded-2xl border border-gray-200 p-6 mb-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:"Ready to Submit"}),s.jsx("p",{className:"text-sm text-gray-600",children:O?"All requirements completed. You can now submit your bid.":"Complete all required documents and bid details to submit."}),!O&&s.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[s.jsx("p",{children:"Missing requirements:"}),s.jsxs("ul",{className:"list-disc list-inside",children:[!F.technical_proposal?.uploaded&&s.jsx("li",{children:"Technical Proposal"}),!F.financial_proposal?.uploaded&&s.jsx("li",{children:"Financial Proposal"}),!F.company_profile?.uploaded&&s.jsx("li",{children:"Company Profile"}),(!A||parseFloat(A)<=0)&&s.jsx("li",{children:"Valid Bid Amount"}),(!L||0===L.trim().length)&&s.jsx("li",{children:"Technical Proposal Description"})]})]})]}),s.jsx("button",{onClick:async()=>{if(O){R(!0);try{const e=localStorage.getItem("token"),t=await fetch(`${W}/api/bids/submit`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({bidId:m?._id,tenderId:y.tenderId,vendorId:y.vendorId,bidAmount:parseFloat(A),proposal:L})}),s=await t.json();if(!t.ok)throw new Error(s.message||"Failed to submit bid");x(s.data),U("Bid submitted successfully!","success")}catch(e){U(e.message||"Error submitting bid","error")}finally{R(!1)}}},disabled:!O||_,className:"px-6 py-3 rounded-xl font-medium transition-colors "+(O&&!_?"bg-green-500 text-white hover:bg-green-600":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:_?"Submitting...":"Submit Bid"})]})})}),N&&s.jsx("div",{className:"fixed top-4 right-4 z-50 max-w-sm",children:s.jsx("div",{className:"p-3 rounded-xl border shadow-sm "+("success"===z?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"),children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:["success"===z?s.jsx(i,{size:16,className:"flex-shrink-0"}):s.jsx(a,{size:16,className:"flex-shrink-0"}),s.jsx("span",{className:"text-sm font-medium",children:C})]}),s.jsx("button",{onClick:()=>w(!1),className:"ml-2 text-gray-400 hover:text-gray-600",children:s.jsx("span",{className:"text-lg",children:"×"})})]})})}),s.jsx("main",{className:"max-w-7xl mx-auto p-4",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 p-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(h,{className:"text-gray-400",size:20}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Issuing Organization"}),s.jsx("p",{className:"font-medium",children:o.company?.name})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(d,{className:"text-gray-400",size:20}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Estimated Budget"}),s.jsx("p",{className:"font-medium",children:V(o.budget)})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(T,{className:"text-gray-400",size:20}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Location"}),s.jsx("p",{className:"font-medium",children:o.location})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(k,{className:"text-gray-400",size:20}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Submission Deadline"}),s.jsx("p",{className:"font-medium",children:Y(o.deadline)})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Description"}),s.jsx("p",{className:"text-gray-600 leading-relaxed",children:o.description})]})]}),("draft"===m?.status||!m)&&s.jsx(is,{bidAmount:A,setBidAmount:I,proposal:L,setProposal:$}),m&&"draft"!==m.status&&s.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 p-6",children:[s.jsx("h2",{className:"font-semibold text-gray-900 mb-4",children:"Your Bid Details"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Bid Amount"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:V(m.bidAmount)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Submitted On"}),s.jsx("p",{className:"font-medium",children:Y(m.submittedAt)})]}),m.proposal&&s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Technical Proposal"}),s.jsx("p",{className:"text-gray-700 leading-relaxed",children:m.proposal})]})]})]}),s.jsx(rs,{tender:o,onDocumentUpload:async(e,t,s)=>{b(!0);try{const a=localStorage.getItem("token"),r=new FormData;e.forEach(e=>{r.append("documents",e)}),r.append("bidId",m?._id?m._id:"new"),r.append("tenderId",y?.tenderId),r.append("vendorId",y?.vendorId),r.append("documentType",t);const i=await fetch(`${W}/api/bids/documents`,{method:"POST",headers:{Authorization:`Bearer ${a}`},body:r});if(!i.ok){const e=await i.text();throw new Error(`Failed to upload ${s}: ${i.status} - ${e}`)}const n=await i.json();U(`${s} uploaded successfully`,"success"),x(n.data),H(n.data)}catch(a){U(`Error uploading ${s}: ${a.message}`,"error")}finally{b(!1)}},uploadedDocuments:F})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsx(as,{currentStatus:m?.status||"draft"}),u&&s.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 p-6",children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Your Information"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(P,{size:16,className:"text-gray-400"}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[u.vendor?.firstName," ",u.vendor?.lastName]}),s.jsx("p",{className:"text-xs text-gray-500",children:"Authorized Representative"})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(h,{size:16,className:"text-gray-400"}),s.jsx("p",{className:"text-sm text-gray-900",children:u.businessName})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(J,{size:16,className:"text-gray-400"}),s.jsx("p",{className:"text-sm text-gray-900",children:u.vendor?.email})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(G,{size:16,className:"text-gray-400"}),s.jsx("p",{className:"text-sm text-gray-900",children:u.vendor?.phoneNumber})]})]})]}),s.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 p-6",children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Important Dates"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Bid Submission"}),s.jsx("p",{className:"text-xs text-gray-500",children:m?.submittedAt?Y(m.submittedAt):"Not submitted yet"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Technical Evaluation"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Within 5 business days"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Award Decision"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Within 15 business days"})]})]})]}),s.jsxs("div",{className:"bg-blue-50 rounded-2xl border border-blue-200 p-6",children:[s.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Need Help?"}),s.jsx("p",{className:"text-sm text-blue-700 mb-3",children:"Contact our procurement team for any questions about your bid submission."}),s.jsxs("div",{className:"text-xs text-blue-600 space-y-1",children:[s.jsx("p",{children:"📧 procurement@nexusmwi.com"}),s.jsx("p",{children:"📞 +265 123 456 789"})]})]})]})]})})]}):s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 p-6 max-w-md text-center",children:[s.jsx(a,{className:"w-12 h-12 text-gray-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Tender Not Found"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"The tender you're looking for doesn't exist or has been removed."}),s.jsx("button",{onClick:()=>B("/tenders"),className:"px-4 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-colors",children:"Back to Tenders"})]})}):s.jsx(ss,{isVisible:!0,message:"Initializing bid portal..."})}const ls=Object.freeze(Object.defineProperty({__proto__:null,default:ns},Symbol.toStringTag,{value:"Module"})),os=({title:e,children:t,action:a,subtitle:r,actionIcon:i,isLoading:n=!1,size:l="normal"})=>{const o="large"===l?"lg:col-span-2":"full"===l?"col-span-full":"";return s.jsxs("div",{className:`bg-white rounded-xl border border-gray-100 shadow-sm hover:shadow-md transition-all duration-300 ${o}`,children:[s.jsx("div",{className:"p-5 border-b border-gray-50",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("h3",{className:"text-base font-bold text-gray-900",children:e}),r&&s.jsx("p",{className:"text-xs text-gray-600",children:r})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[a&&s.jsxs("button",{className:"flex items-center gap-1 px-3 py-1.5 text-xs font-semibold text-blue-600 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors duration-200",children:[a,i&&s.jsx("actionIcon",{size:12})]}),s.jsx("button",{className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",children:s.jsx(ee,{size:14})})]})]})}),s.jsx("div",{className:"p-5",children:n?s.jsxs("div",{className:"animate-pulse space-y-3",children:[s.jsx("div",{className:"h-3 bg-gray-200 rounded w-3/4"}),s.jsx("div",{className:"h-32 bg-gray-100 rounded-lg"})]}):t})]})},ds=({active:e,payload:t,label:a})=>e&&t&&t.length?s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-xl p-3 backdrop-blur-sm",children:[s.jsx("p",{className:"font-semibold text-gray-900 mb-1 text-xs",children:a}),s.jsx("div",{className:"space-y-1",children:t.map((e,t)=>s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:e.color}}),s.jsxs("span",{className:"text-gray-600",children:[e.name,":"]}),s.jsx("span",{className:"font-semibold text-gray-900",children:"number"==typeof e.value?e.value.toLocaleString():e.value})]},t))})]}):null,cs=()=>{const[e,a]=t.useState(!1),i=[{name:"Won",value:15,color:"#10b981",percentage:37.5},{name:"Submitted",value:12,color:"#3b82f6",percentage:30},{name:"Pending",value:8,color:"#f59e0b",percentage:20},{name:"Draft",value:5,color:"#6b7280",percentage:12.5}],l=e=>{switch(e){case"submitted":return"bg-blue-100 text-blue-800 border-blue-200";case"pending":return"bg-amber-100 text-amber-800 border-amber-200";case"draft":default:return"bg-gray-100 text-gray-800 border-gray-200";case"won":return"bg-emerald-100 text-emerald-800 border-emerald-200"}},o=e=>{switch(e){case"critical":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"medium":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return s.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-12 gap-5 mb-7",children:[s.jsx("div",{className:"xl:col-span-4",children:s.jsxs(os,{title:"RFQ Distribution",subtitle:"Current pipeline status",isLoading:e,children:[s.jsx(Ue,{width:"100%",height:200,children:s.jsxs(Be,{children:[s.jsx(We,{data:i,cx:"50%",cy:"50%",innerRadius:40,outerRadius:80,paddingAngle:4,dataKey:"value",children:i.map((e,t)=>s.jsx(qe,{fill:e.color,stroke:"white",strokeWidth:2},`cell-${t}`))}),s.jsx(He,{content:s.jsx(ds,{})})]})}),s.jsx("div",{className:"grid grid-cols-2 gap-3 mt-5",children:i.map((e,t)=>s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded-lg",children:[s.jsx("div",{className:"w-3 h-3 rounded-full shadow-sm",style:{backgroundColor:e.color}}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-bold text-gray-900",children:e.value}),s.jsx("div",{className:"text-xs font-medium text-gray-600",children:e.name}),s.jsxs("div",{className:"text-xs text-gray-500",children:[e.percentage,"%"]})]})]},t))})]})}),s.jsx("div",{className:"xl:col-span-8",children:s.jsxs(os,{title:"Performance Analytics",subtitle:"RFQ submissions and win rate trends",action:"View Details",actionIcon:se,isLoading:e,children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 bg-emerald-50 text-emerald-700 rounded-full text-xs font-semibold border border-emerald-200",children:[s.jsx(ae,{size:12}),"+23% Win Rate"]})}),s.jsx(Ue,{width:"100%",height:240,children:s.jsxs(Ve,{data:[{month:"Jan",submitted:8,won:3},{month:"Feb",submitted:12,won:5},{month:"Mar",submitted:15,won:7},{month:"Apr",submitted:18,won:8},{month:"May",submitted:22,won:12},{month:"Jun",submitted:25,won:15}],margin:{top:15,right:25,left:15,bottom:15},children:[s.jsxs("defs",{children:[s.jsxs("linearGradient",{id:"submittedGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.8}),s.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:.1})]}),s.jsxs("linearGradient",{id:"wonGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"5%",stopColor:"#10b981",stopOpacity:.8}),s.jsx("stop",{offset:"95%",stopColor:"#10b981",stopOpacity:.1})]})]}),s.jsx(Ge,{strokeDasharray:"3 3",stroke:"#f1f5f9",strokeWidth:1}),s.jsx(Ye,{dataKey:"month",axisLine:!1,tickLine:!1,tick:{fontSize:11,fill:"#64748b",fontWeight:500}}),s.jsx(Je,{axisLine:!1,tickLine:!1,tick:{fontSize:11,fill:"#64748b",fontWeight:500}}),s.jsx(He,{content:s.jsx(ds,{})}),s.jsx(Qe,{type:"monotone",dataKey:"submitted",stroke:"#3b82f6",fillOpacity:1,fill:"url(#submittedGradient)",strokeWidth:2,dot:{fill:"#3b82f6",strokeWidth:2,r:3},activeDot:{r:5,fill:"#3b82f6",strokeWidth:2,stroke:"white"},name:"Submitted"}),s.jsx(Qe,{type:"monotone",dataKey:"won",stroke:"#10b981",fillOpacity:1,fill:"url(#wonGradient)",strokeWidth:2,dot:{fill:"#10b981",strokeWidth:2,r:3},activeDot:{r:5,fill:"#10b981",strokeWidth:2,stroke:"white"},name:"Won"}),s.jsx(Ke,{wrapperStyle:{paddingTop:"15px",fontSize:"12px"},iconType:"circle"})]})})]})}),s.jsx("div",{className:"xl:col-span-12",children:s.jsx(os,{title:"High-Value Opportunities",subtitle:"Priority RFQs requiring immediate attention",action:"New Quote",actionIcon:q,isLoading:e,children:s.jsx("div",{className:"space-y-5",children:[{id:"RFQ-2025-001",title:"Enterprise Cloud Infrastructure",value:285e3,status:"pending",daysLeft:4,priority:"high",client:"TechCorp Solutions"},{id:"RFQ-2025-002",title:"Digital Transformation Suite",value:42e4,status:"submitted",daysLeft:2,priority:"critical",client:"Global Industries"},{id:"RFQ-2025-003",title:"Cybersecurity Framework",value:175e3,status:"draft",daysLeft:6,priority:"medium",client:"SecureFlow Inc"}].map((e,t)=>s.jsxs("div",{className:"group flex items-center justify-between p-5 border border-gray-100 rounded-lg hover:border-blue-200 hover:shadow-md hover:shadow-blue-500/10 transition-all duration-300 cursor-pointer",children:[s.jsxs("div",{className:"flex items-center gap-5",children:[s.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg shadow-lg",children:s.jsx(r,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"text-sm font-bold text-gray-900 group-hover:text-blue-600 transition-colors",children:e.title}),s.jsxs("p",{className:"text-xs text-gray-600 font-mono",children:[e.id," • ",e.client]}),s.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[s.jsx(n,{size:12,className:"text-gray-400"}),s.jsxs("span",{className:"text-gray-500",children:[e.daysLeft," days remaining"]})]})]})]}),s.jsxs("div",{className:"flex items-center gap-5",children:[s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-lg font-bold bg-gradient-to-r from-emerald-600 to-emerald-500 bg-clip-text text-transparent",children:["$",(e.value/1e3).toFixed(0),"k"]}),s.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Potential Value"})]}),s.jsxs("div",{className:"flex flex-col gap-1.5",children:[s.jsx("span",{className:`px-2.5 py-1.5 text-xs font-semibold rounded-full border ${l(e.status)}`,children:e.status.toUpperCase()}),s.jsx("span",{className:`px-2.5 py-1.5 text-xs font-semibold rounded-full border ${o(e.priority)}`,children:e.priority.toUpperCase()})]}),s.jsx(re,{size:16,className:"text-gray-400 group-hover:text-blue-500 transition-colors"})]})]},e.id))})})})]})},ms=()=>{const[e,a]=t.useState(!1),r=[{name:"Delivered",value:25,color:"#10b981"},{name:"Confirmed",value:18,color:"#3b82f6"},{name:"Processing",value:12,color:"#f59e0b"},{name:"Pending",value:8,color:"#6b7280"}],n=[{metric:"On-Time Delivery",value:94,target:95,color:"emerald",icon:ie},{metric:"Order Accuracy",value:98,target:97,color:"blue",icon:i},{metric:"Customer Rating",value:4.8,target:4.5,color:"amber",icon:ne,isRating:!0},{metric:"Fulfillment Rate",value:96,target:95,color:"purple",icon:V}];return s.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-5 mb-7",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx(os,{title:"Order Pipeline",subtitle:"Current order distribution",isLoading:e,children:s.jsx(Ue,{width:"100%",height:180,children:s.jsxs(Ze,{data:r,margin:{top:15,right:25,left:15,bottom:35},children:[s.jsx("defs",{children:r.map((e,t)=>s.jsxs("linearGradient",{id:`gradient-${e.name}`,x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:e.color}),s.jsx("stop",{offset:"100%",stopColor:e.color,stopOpacity:.8})]},t))}),s.jsx(Ge,{strokeDasharray:"3 3",stroke:"#f1f5f9",strokeWidth:1}),s.jsx(Ye,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fontSize:11,fill:"#64748b",fontWeight:500},angle:-45,textAnchor:"end",height:50}),s.jsx(Je,{axisLine:!1,tickLine:!1,tick:{fontSize:11,fill:"#64748b",fontWeight:500}}),s.jsx(He,{content:s.jsx(ds,{})}),s.jsx(Xe,{dataKey:"value",radius:[8,8,8,8],stroke:"white",strokeWidth:1,children:r.map((e,t)=>s.jsx(qe,{fill:e.color},`cell-${t}`))})]})})}),s.jsx("div",{className:"grid grid-cols-2 gap-4",children:n.map((e,t)=>{const a={emerald:{bg:"bg-emerald-50",text:"text-emerald-600",gradient:"from-emerald-500 to-emerald-400"},blue:{bg:"bg-blue-50",text:"text-blue-600",gradient:"from-blue-500 to-blue-400"},amber:{bg:"bg-amber-50",text:"text-amber-600",gradient:"from-amber-500 to-amber-400"},purple:{bg:"bg-purple-50",text:"text-purple-600",gradient:"from-purple-500 to-purple-400"}};return s.jsxs("div",{className:"bg-white rounded-lg border border-gray-100 p-4 hover:shadow-md transition-all duration-300",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx("div",{className:`p-2 rounded-lg ${a[e.color].bg}`,children:s.jsx(e.icon,{className:`w-4 h-4 ${a[e.color].text}`})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:`text-lg font-bold ${a[e.color].text}`,children:e.isRating?e.value:`${e.value}%`}),s.jsx("div",{className:"text-xs font-medium text-gray-600",children:e.metric})]})]}),s.jsx("div",{className:"w-full bg-gray-100 rounded-full h-1.5",children:s.jsx("div",{className:`h-1.5 rounded-full bg-gradient-to-r ${a[e.color].gradient} transition-all duration-500`,style:{width:`${e.isRating?e.value/5*100:e.value}%`}})})]},t)})})]}),s.jsxs(os,{title:"Delivery Excellence",subtitle:"Monthly performance tracking",action:"View Details",actionIcon:se,isLoading:e,children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 bg-emerald-50 text-emerald-700 rounded-full text-xs font-semibold border border-emerald-200",children:[s.jsx(V,{size:12}),"94% Success Rate"]})}),s.jsx(Ue,{width:"100%",height:240,children:s.jsxs(et,{data:[{month:"Jan",orders:45,onTime:42},{month:"Feb",orders:52,onTime:48},{month:"Mar",orders:48,onTime:46},{month:"Apr",orders:65,onTime:61},{month:"May",orders:58,onTime:55},{month:"Jun",orders:63,onTime:59}],margin:{top:15,right:25,left:15,bottom:15},children:[s.jsx(Ge,{strokeDasharray:"3 3",stroke:"#f1f5f9",strokeWidth:1}),s.jsx(Ye,{dataKey:"month",axisLine:!1,tickLine:!1,tick:{fontSize:11,fill:"#64748b",fontWeight:500}}),s.jsx(Je,{axisLine:!1,tickLine:!1,tick:{fontSize:11,fill:"#64748b",fontWeight:500}}),s.jsx(He,{content:s.jsx(ds,{})}),s.jsx(tt,{type:"monotone",dataKey:"orders",stroke:"#3b82f6",strokeWidth:2,dot:{fill:"#3b82f6",strokeWidth:2,r:3},activeDot:{r:5,fill:"#3b82f6",strokeWidth:2,stroke:"white"},name:"Total Orders"}),s.jsx(tt,{type:"monotone",dataKey:"onTime",stroke:"#10b981",strokeWidth:2,dot:{fill:"#10b981",strokeWidth:2,r:3},activeDot:{r:5,fill:"#10b981",strokeWidth:2,stroke:"white"},name:"On-Time Delivery"}),s.jsx(Ke,{wrapperStyle:{paddingTop:"15px",fontSize:"12px"},iconType:"circle"})]})})]})]})},xs=()=>{const[e,a]=t.useState(!1),r=[{name:"Paid",value:85e4,color:"#10b981",percentage:68},{name:"Pending",value:22e4,color:"#f59e0b",percentage:18},{name:"Processing",value:125e3,color:"#3b82f6",percentage:10},{name:"Overdue",value:55e3,color:"#ef4444",percentage:4}],i=[{label:"Monthly Revenue",value:175e4,change:18.5,icon:d,color:"emerald"},{label:"Profit Margin",value:58.9,change:4.2,icon:$,color:"blue",isPercentage:!0},{label:"Outstanding",value:275e3,change:-12.3,icon:n,color:"amber"},{label:"Collection Rate",value:96.2,change:2.1,icon:ie,color:"purple",isPercentage:!0}];return s.jsxs("div",{className:"space-y-5 mb-7",children:[s.jsx(os,{title:"Financial Overview",subtitle:"Key financial metrics and performance indicators",isLoading:e,children:s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-5",children:i.map((e,t)=>{const a={emerald:{bg:"from-emerald-500 to-emerald-600",shadow:"shadow-emerald-500/25",text:"text-emerald-600",accent:"from-emerald-500/10"},blue:{bg:"from-blue-500 to-blue-600",shadow:"shadow-blue-500/25",text:"text-blue-600",accent:"from-blue-500/10"},amber:{bg:"from-amber-500 to-amber-600",shadow:"shadow-amber-500/25",text:"text-amber-600",accent:"from-amber-500/10"},purple:{bg:"from-purple-500 to-purple-600",shadow:"shadow-purple-500/25",text:"text-purple-600",accent:"from-purple-500/10"}};return s.jsxs("div",{className:"group relative bg-gradient-to-br from-gray-50 to-white rounded-lg border border-gray-100 p-5 hover:shadow-md transition-all duration-300",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("div",{className:`p-2.5 rounded-lg bg-gradient-to-br ${a[e.color].bg} shadow-lg ${a[e.color].shadow}`,children:s.jsx(e.icon,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{className:"flex items-center gap-1 px-2.5 py-1.5 rounded-full text-xs font-semibold "+(e.change>0?"bg-emerald-50 text-emerald-700 border border-emerald-200":"bg-red-50 text-red-700 border border-red-200"),children:[e.change>0?s.jsx(le,{size:12}):s.jsx(oe,{size:12}),Math.abs(e.change),"%"]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:`text-xl font-bold ${a[e.color].text}`,children:e.isPercentage?`${e.value}%`:`$${(e.value/1e3).toFixed(0)}k`}),s.jsx("div",{className:"text-xs font-semibold text-gray-600",children:e.label})]}),s.jsx("div",{className:`absolute top-0 right-0 w-16 h-16 bg-gradient-to-br ${a[e.color].accent} to-transparent rounded-lg pointer-events-none`})]},t)})})}),s.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-5",children:[s.jsxs(os,{title:"Payment Distribution",subtitle:"Current payment status breakdown",isLoading:e,children:[s.jsx(Ue,{width:"100%",height:200,children:s.jsxs(Be,{children:[s.jsx(We,{data:r,cx:"50%",cy:"50%",innerRadius:50,outerRadius:80,paddingAngle:4,dataKey:"value",children:r.map((e,t)=>s.jsx(qe,{fill:e.color,stroke:"white",strokeWidth:2},`cell-${t}`))}),s.jsx(He,{content:s.jsx(ds,{}),formatter:e=>[`$${(e/1e3).toFixed(0)}k`,"Amount"]})]})}),s.jsx("div",{className:"grid grid-cols-2 gap-3 mt-4",children:r.map((e,t)=>s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded-lg",children:[s.jsx("div",{className:"w-3 h-3 rounded-full shadow-sm",style:{backgroundColor:e.color}}),s.jsxs("div",{children:[s.jsxs("div",{className:"text-sm font-bold text-gray-900",children:["$",(e.value/1e3).toFixed(0),"k"]}),s.jsxs("div",{className:"text-xs font-medium text-gray-600",children:[e.name," (",e.percentage,"%)"]})]})]},t))})]}),s.jsxs(os,{title:"Cash Flow Analysis",subtitle:"Monthly income vs expenses trend",action:"View Details",actionIcon:se,isLoading:e,children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 bg-emerald-50 text-emerald-700 rounded-full text-xs font-semibold border border-emerald-200",children:[s.jsx(b,{size:12}),"$1.03M Profit"]})}),s.jsx(Ue,{width:"100%",height:200,children:s.jsxs(Ve,{data:[{month:"Jan",income:745e3,expenses:385e3},{month:"Feb",income:892e3,expenses:445e3},{month:"Mar",income:115e4,expenses:52e4},{month:"Apr",income:134e4,expenses:58e4},{month:"May",income:158e4,expenses:65e4},{month:"Jun",income:175e4,expenses:72e4}],margin:{top:15,right:25,left:15,bottom:15},children:[s.jsxs("defs",{children:[s.jsxs("linearGradient",{id:"incomeGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"5%",stopColor:"#10b981",stopOpacity:.8}),s.jsx("stop",{offset:"95%",stopColor:"#10b981",stopOpacity:.1})]}),s.jsxs("linearGradient",{id:"expenseGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"5%",stopColor:"#ef4444",stopOpacity:.8}),s.jsx("stop",{offset:"95%",stopColor:"#ef4444",stopOpacity:.1})]})]}),s.jsx(Ge,{strokeDasharray:"3 3",stroke:"#f1f5f9",strokeWidth:1}),s.jsx(Ye,{dataKey:"month",axisLine:!1,tickLine:!1,tick:{fontSize:11,fill:"#64748b",fontWeight:500}}),s.jsx(Je,{axisLine:!1,tickLine:!1,tick:{fontSize:11,fill:"#64748b",fontWeight:500},tickFormatter:e=>`$${(e/1e3).toFixed(0)}k`}),s.jsx(He,{content:s.jsx(ds,{}),formatter:e=>[`$${(e/1e3).toFixed(0)}k`,""]}),s.jsx(Qe,{type:"monotone",dataKey:"income",stroke:"#10b981",fillOpacity:1,fill:"url(#incomeGradient)",strokeWidth:2,dot:{fill:"#10b981",strokeWidth:2,r:3},activeDot:{r:5,fill:"#10b981",strokeWidth:2,stroke:"white"},name:"Income"}),s.jsx(Qe,{type:"monotone",dataKey:"expenses",stroke:"#ef4444",fillOpacity:1,fill:"url(#expenseGradient)",strokeWidth:2,dot:{fill:"#ef4444",strokeWidth:2,r:3},activeDot:{r:5,fill:"#ef4444",strokeWidth:2,stroke:"white"},name:"Expenses"}),s.jsx(Ke,{wrapperStyle:{paddingTop:"15px",fontSize:"12px"},iconType:"circle"})]})})]})]})]})};const us=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const a=e(),{user:r}=de(),[i,n]=t.useState(null),[l,o]=t.useState(!0),[d,c]=t.useState(!1),[m,x]=t.useState(!1),[u,p]=t.useState({requisitions:{counts:{total:0,pending:0}},rfqs:{counts:{total:0,open:0}},purchaseOrders:{counts:{total:0,pending:0}},invoices:{counts:{total:0,pending:0}}}),[g]=N(),[h,b]=t.useState(()=>g.get("section")||"vendor-dash"),[f,j]=t.useState(!0),[y,v]=t.useState(0);return t.useEffect(()=>{const e=document.createElement("style");return e.textContent="\n      @keyframes blob {\n        0% { transform: translate(0px, 0px) scale(1); }\n        33% { transform: translate(30px, -50px) scale(1.1); }\n        66% { transform: translate(-20px, 20px) scale(0.9); }\n        100% { transform: translate(0px, 0px) scale(1); }\n      }\n      .animate-blob { animation: blob 7s infinite; }\n      .animation-delay-2000 { animation-delay: 2s; }\n      .animation-delay-4000 { animation-delay: 4s; }\n    ",document.head.appendChild(e),()=>{document.head.removeChild(e)}},[]),t.useEffect(()=>{r&&(async()=>{try{o(!0),await new Promise(e=>setTimeout(e,1e3)),n({user:{firstName:r?.firstName||"Vendor",lastName:r?.lastName||"User",email:r?.email||"vendor@example.com",avatar:null,department:"Vendor Services",role:"Vendor"},preferences:{theme:"light",notifications:!0,language:"en"}}),setTimeout(()=>c(!0),500)}catch(e){}finally{o(!1)}})()},[r]),t.useEffect(()=>{const e=g.get("section")||"vendor-dash";b(e)},[g]),t.useEffect(()=>{const e=()=>{v(window.pageYOffset)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]),s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50/30 to-indigo-50/20 flex relative overflow-hidden",children:[s.jsxs("div",{className:"absolute inset-0 opacity-20",children:[s.jsx("div",{className:"absolute top-0 left-1/4 w-72 h-72 bg-blue-400/20 rounded-full mix-blend-multiply filter blur-xl animate-blob"}),s.jsx("div",{className:"absolute top-0 right-1/4 w-72 h-72 bg-purple-400/20 rounded-full mix-blend-multiply filter blur-xl animate-blob animation-delay-2000"}),s.jsx("div",{className:"absolute -bottom-8 left-1/3 w-72 h-72 bg-pink-400/20 rounded-full mix-blend-multiply filter blur-xl animate-blob animation-delay-4000"})]}),s.jsx(Ft,{stats:u,activeSection:h,handleSectionChange:e=>{b(e),a(`?section=${e}`,{replace:!0})},onSidebarToggle:j}),s.jsxs("main",{className:"flex-1 overflow-auto relative z-10",children:[s.jsx(_t,{user:r,userProfile:i,scrollPosition:y,sidebarOpen:f,sidebarWidth:256,collapsedSidebarWidth:70}),s.jsx("div",{className:"pt-20 p-5 space-y-7 max-w-[1200px] mx-auto",children:"vendor-dash"===h?s.jsxs("div",{children:[s.jsx("div",{className:"flex items-center justify-between mb-7",children:s.jsxs("div",{className:"space-y-1",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Vendor Dashboard"}),s.jsxs("p",{className:"text-gray-700 text-sm max-w-xl",children:["Welcome back, ",s.jsx("span",{className:"font-semibold text-black",children:r?.firstName?r.firstName.charAt(0).toUpperCase()+r.firstName.slice(1):"Vendor"}),". Monitor your business performance with comprehensive analytics."]})]})}),s.jsx(cs,{}),s.jsx(ms,{}),s.jsx(xs,{})]}):s.jsxs("div",{children:["requisitions"===h&&s.jsx(Me,{}),"new-recon"===h&&s.jsx(_e,{}),"travel-requests"===h&&s.jsx(Fe,{}),"travel-execution"===h&&s.jsx(Ee,{}),"manage-requisitions"===h&&s.jsx(Oe,{}),"rfq"===h&&s.jsx(Le,{}),"invoices"===h&&s.jsx(Rt,{}),"purchase-order"===h&&s.jsx(rt,{}),"registration"===h&&s.jsx(qt,{}),"registration-management"===h&&s.jsx(Qt,{}),"user-profile"===h&&s.jsx(Re,{}),"tenders"===h&&s.jsx(es,{}),"bid"===h&&s.jsx("div",{className:"w-full",children:s.jsx(ns,{tenderId:g.get("tenderId"),vendorId:g.get("vendorId"),bidId:g.get("bidId")},`bid-${g.get("tenderId")}-${g.get("vendorId")}-${g.get("bidId")}`)})]})})]}),s.jsx($e,{user:r})]})}},Symbol.toStringTag,{value:"Module"}));export{rt as V,it as a,Kt as b,ls as c,Ut as i,Ht as r,ts as t,us as v};
