import{u as e,a as t,r as s,j as a,a9 as r,aa as i,X as n,ab as l,a5 as o,V as c,ac as d,B as x,ad as m,Y as p,ae as g,U as h,af as u,m as f,ag as b,ah as j,p as y,v,ai as N,b6 as w,b7 as k,b8 as S,b9 as C,$ as M,Z as L,_ as T,aw as A,ba as z,g as D,A as E,ar as F,bb as R,au as P,n as B,bc as O,bd as W,t as $,S as I,x as K,J as H,a8 as V,be as U,bf as G,q as _,bg as q,o as J,aq as Y,aP as Z,f as X,aR as Q,aK as ee,ap as te,D as se,bh as ae,bi as re}from"./react-core-DKrnZdd7.js";import{u as ie}from"./context-k3FZ8Vno.js";import{P as ne}from"./vendor-prop-types-C8aDgg8x.js";import{u as le,f as oe,s as ce,B as de,T as xe,e as me,D as pe,g as ge,i as he,j as ue,K as fe,I as be,h as je,k as ye,l as ve,m as Ne,b as we,P as ke}from"./mui-material-9NDCc7EL.js";import{M as Se}from"./mui-icons-Upi8wDss.js";import{i as Ce,a as Me,b as Le,f as Te}from"./date-fns-CUr-g5D8.js";import{m as Ae,A as ze}from"./vendor-framer-motion-DCU7qowG.js";import{A as De}from"./page-dashboard-BNM7eJ18.js";import{l as Ee}from"./vendor-socket.io-client-DtpWbWmM.js";import"./vendor-jspdf-CCnS5Eue.js";import"./vendor-jspdf-autotable-Dge4SOWT.js";import"./vendor-notistack-DOLgeAla.js";import"./lodash-BC2fgbp_.js";import{R as Fe,P as Re,c as Pe,d as Be,T as Oe,e as We,C as $e,X as Ie,Y as Ke,f as He,A as Ve,a as Ue,B as Ge,b as _e}from"./vendor-recharts-BfOGTqeh.js";const qe="#141b2d",Je="rgba(145, 158, 171, 0.08)",Ye="rgba(85, 105, 255, 0.16)",Ze="#5569ff",Xe="rgba(85, 105, 255, 0.24)",Qe="#e0e0e0",et="rgba(224, 224, 224, 0.6)",tt="#90a0b7",st="#5569ff",at="rgba(145, 158, 171, 0.16)",rt=e=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[a.jsx("rect",{x:"3",y:"3",width:"7",height:"9",rx:"1"}),a.jsx("rect",{x:"14",y:"3",width:"7",height:"5",rx:"1"}),a.jsx("rect",{x:"14",y:"12",width:"7",height:"9",rx:"1"}),a.jsx("rect",{x:"3",y:"16",width:"7",height:"5",rx:"1"})]}),it=e=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[a.jsx("rect",{x:"3",y:"11",width:"18",height:"5",rx:"2"}),a.jsx("path",{d:"M5 11V7h14v4"}),a.jsx("circle",{cx:"7.5",cy:"16",r:"1.5"}),a.jsx("circle",{cx:"16.5",cy:"16",r:"1.5"})]}),nt=e=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:a.jsx("path",{d:"M4 17a4 4 0 1 1 8 0H4zM18 3l-3 3 3 3M15 6H9a6 6 0 0 0-6 6v4"})}),lt=e=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[a.jsx("path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.5 10-10 10Z"}),a.jsx("path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12"})]}),ot=e=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[a.jsx("path",{d:"M3 3v18h18"}),a.jsx("path",{d:"M18 17V9"}),a.jsx("path",{d:"M13 17V5"}),a.jsx("path",{d:"M8 17v-3"})]}),ct=e=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[a.jsx("path",{d:"M12 2v4"}),a.jsx("path",{d:"M12 18v4"}),a.jsx("path",{d:"m4.93 10.93 2.83-2.83"}),a.jsx("path",{d:"M16.24 16.24 19.07 19.07"}),a.jsx("path",{d:"M2 12h4"}),a.jsx("path",{d:"M18 12h4"}),a.jsx("path",{d:"m10.93 4.93-2.83 2.83"}),a.jsx("path",{d:"M16.24 7.76 19.07 4.93"})]}),dt=e=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[a.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),a.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),xt=e=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[a.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),a.jsx("polyline",{points:"16 17 21 12 16 7"}),a.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),mt=ce(ye)(({theme:e})=>({color:Qe,margin:"2px 12px",padding:"10px 16px",borderRadius:"6px",transition:"all 0.15s ease-in-out","&.Mui-selected":{backgroundColor:Ye,color:Ze,"&:hover":{backgroundColor:Xe},"& .MuiListItemIcon-root":{color:Ze},"& .MuiTypography-root":{fontWeight:500}},"&:hover":{backgroundColor:Je}})),pt=ce(xe)(({theme:e,open:t})=>({color:et,fontSize:"0.6875rem",fontWeight:500,textTransform:"uppercase",padding:t?"16px 28px 6px":"16px 0",letterSpacing:"0.6px",textAlign:t?"left":"center",opacity:t?1:0,height:t?"auto":0,marginBottom:t?"4px":0,transition:"opacity 0.2s ease, height 0.2s ease, margin 0.2s ease"})),gt=ce(je,{shouldForwardProp:e=>"open"!==e&&"isMobile"!==e})(({theme:e,open:t,isMobile:s})=>({width:t?256:70,flexShrink:0,whiteSpace:"nowrap",boxSizing:"border-box",overflowX:"hidden","& .MuiDrawer-paper":{backgroundColor:qe,borderRight:"none",width:t?256:s?0:70,overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.standard})}})),ht=ce(ve)(({theme:e,selected:t})=>({minWidth:0,marginRight:16,justifyContent:"center",color:t?st:tt,transition:"color 0.15s ease, transform 0.2s ease","&:hover":{transform:"scale(1.05)"}})),ut=ce(de)(({theme:e})=>({display:"flex",alignItems:"center",justifyContent:"center",padding:"20px 12px 10px",backgroundColor:"transparent"})),ft=ce(de)(({theme:e,open:t})=>({width:"100%",display:"flex",alignItems:"center",justifyContent:t?"space-between":"center",transition:"all 0.3s ease"}));ce(de)(({theme:e})=>({display:"flex",alignItems:"center",justifyContent:"center",width:36,height:36,borderRadius:"8px",backgroundColor:"rgba(85, 105, 255, 0.8)",backgroundImage:"linear-gradient(135deg, #5569ff 0%, #6b8aff 100%)",boxShadow:"0 2px 10px rgba(85, 105, 255, 0.4)",color:"#ffffff",fontWeight:700,fontSize:"1.2rem",cursor:"pointer",transition:"all 0.3s ease","&:hover":{transform:"scale(1.05)"}}));const bt=ce(be)(({theme:e})=>({color:et,"&:hover":{backgroundColor:"transparent"},transition:"all 0.15s ease",padding:0})),jt=ce(Ne)(({theme:e})=>({"& .MuiBadge-badge":{right:-4,top:4,minWidth:18,height:18,fontSize:"0.625rem",fontWeight:600,padding:"0 4px",borderRadius:9,backgroundColor:"#ef4444",color:"white"}})),yt=ce("span")(({theme:e})=>({position:"absolute",top:8,right:8,width:8,height:8,borderRadius:"50%",backgroundColor:"#ef4444","&::after":{content:'""',position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"pulse 2s infinite",backgroundColor:"rgba(239, 68, 68, 0.7)"},"@keyframes pulse":{"0%":{transform:"scale(1)",opacity:1},"70%":{transform:"scale(2)",opacity:0},"100%":{transform:"scale(2.5)",opacity:0}}})),vt=({stats:i=Nt,activeSection:n,handleSectionChange:l,onSidebarToggle:o,user:c={}})=>{const d=le(),x=e();t();const m=oe(d.breakpoints.down("md")),[p,g]=s.useState(!m),[h,u]=s.useState(!1),[f,b]=s.useState(""),[j,y]=s.useState(!1);s.useEffect(()=>{const e=localStorage.getItem("sidebarOpen");if(null!==e&&!m){const t=JSON.parse(e);g(t),o?.(t)}},[m,o]);c?.companyName?.charAt(0);const v=()=>{if(!j)if(y(!0),m)u(!h),setTimeout(()=>y(!1),300);else{const e=!p;g(e),localStorage.setItem("sidebarOpen",JSON.stringify(e)),o?.(e),window.dispatchEvent(new CustomEvent("sidebarToggle",{detail:{open:e}})),setTimeout(()=>y(!1),300)}},N=[{id:"main",label:"Main",items:[{id:"vendor-dash",label:"Dashboard",icon:a.jsx(rt,{}),badge:null},{id:"trip-management",label:"Trip Management",icon:a.jsx(nt,{})},{id:"vehicle-management",label:"Vehicle Management",icon:a.jsx(it,{}),badge:i.rfqs?.counts?.open||null}]},{id:"finance",label:"Finance Processing",items:[{id:"driver-reconciliation",label:"Reconciliation",icon:a.jsx(lt,{}),badge:null}]},{id:"reports",label:"Reports",items:[{id:"analytics",label:"Analytics",icon:a.jsx(ot,{}),badge:null},{id:"reports",label:"Reports",icon:a.jsx(ct,{}),badge:null}]}],w=[{id:"settings",label:"Settings",icon:a.jsx(dt,{}),onClick:()=>x("/settings")},{id:"logout",label:"Logout",icon:a.jsx(xt,{}),onClick:()=>{}}],k=(e,t)=>a.jsxs(r.Fragment,{children:[t>0&&p&&a.jsx(pe,{sx:{borderColor:at,margin:"12px 24px 8px",opacity:.4}}),a.jsx(pt,{open:p,children:e.label}),a.jsx(ge,{disablePadding:!0,sx:{mb:1},children:e.items.map(e=>(e=>{const t=n===e.id,s=f===e.id,i=a.jsxs(mt,{selected:t,onClick:()=>l(e.id),onMouseEnter:()=>b(e.id),onMouseLeave:()=>b(""),sx:{justifyContent:p?"initial":"center",px:2,py:1,minHeight:44,position:"relative",overflow:"hidden","&::after":t?{content:'""',position:"absolute",top:"50%",left:0,transform:"translateY(-50%)",width:"3px",height:"50%",backgroundColor:Ze,borderRadius:"0 3px 3px 0"}:{}},children:[a.jsx(ht,{selected:t,children:r.cloneElement(e.icon,{style:{transform:s&&!t?"scale(1.1)":"scale(1)",transition:"transform 0.2s ease"}})}),p&&a.jsxs(a.Fragment,{children:[a.jsx(he,{primary:e.label,primaryTypographyProps:{sx:{fontSize:"0.875rem",fontWeight:t?500:400,color:"inherit",transition:"font-weight 0.15s ease",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},sx:{opacity:p?1:0,ml:.5}}),e.badge&&a.jsx(jt,{badgeContent:e.badge})]}),!p&&e.badge&&a.jsx(yt,{})]},e.id);return p?i:a.jsx(ue,{title:e.label,placement:"right",arrow:!0,componentsProps:{tooltip:{sx:{backgroundColor:me(qe,.9),color:Qe,backdropFilter:"blur(8px)",fontSize:"0.75rem",padding:"6px 12px",borderRadius:"6px",marginLeft:"8px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.2)",border:`1px solid ${me(at,.5)}`}},arrow:{sx:{color:me(qe,.9)}}},children:i},e.id)})(e))})]},e.id),S=a.jsxs(a.Fragment,{children:[a.jsx(ut,{children:a.jsx(ft,{open:p,children:p?a.jsxs(a.Fragment,{children:[a.jsxs(de,{sx:{display:"flex",alignItems:"center",gap:2,flexGrow:1},children:[a.jsxs(de,{sx:{width:36,height:36,borderRadius:"8px",backgroundColor:"rgba(85, 105, 255, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",color:"#ffffff",fontWeight:700,fontSize:"1.2rem",textTransform:"uppercase"},children:[c?.companyName?.charAt(0)?.toUpperCase()||"N"," "]}),a.jsxs(de,{children:[a.jsxs(xe,{variant:"subtitle1",sx:{color:Qe,fontWeight:600,lineHeight:1.2,textTransform:"uppercase"},children:[c?.companyName?.toUpperCase()||"NYASASC"," "]}),a.jsx(xe,{variant:"caption",sx:{color:et,fontSize:"0.75rem"},children:"ORGANIZATION "})]})]}),a.jsx(bt,{onClick:v,disabled:j,"aria-label":"close drawer",sx:{"& img":{filter:"brightness(0) invert(1)"}},children:a.jsx("img",{src:"/sidebar1.png",alt:"Toggle sidebar",style:{width:"20px",height:"20px",objectFit:"contain",transform:"rotate(0deg)",transition:"transform 0.3s ease"}})})]}):a.jsxs(de,{onClick:v,sx:{width:36,height:36,borderRadius:"8px",backgroundColor:"rgba(85, 105, 255, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",color:"#ffffff",fontWeight:700,fontSize:"1.2rem",cursor:"pointer",textTransform:"uppercase","&:hover":{transform:"scale(1.05)"}},children:[c?.companyName?.charAt(0)?.toUpperCase()||"N"," "]})})}),a.jsxs(de,{sx:{overflowY:"auto",overflowX:"hidden",height:"calc(100vh - 64px)","&::-webkit-scrollbar":{width:4},"&::-webkit-scrollbar-track":{background:"transparent"},"&::-webkit-scrollbar-thumb":{backgroundColor:me(et,.3),borderRadius:2,"&:hover":{backgroundColor:me(et,.5)}},padding:"10px 0 0",mt:1},children:[N.map((e,t)=>k(e,t)),a.jsxs(de,{sx:{mt:"auto",mb:2,px:1},children:[p&&a.jsx(pe,{sx:{borderColor:at,margin:"12px 24px 16px",opacity:.4}}),a.jsx(ge,{disablePadding:!0,children:w.map(e=>{const t=f===e.id,s=a.jsxs(mt,{onClick:e.onClick,onMouseEnter:()=>b(e.id),onMouseLeave:()=>b(""),sx:{justifyContent:p?"initial":"center",px:2,py:1,minHeight:44},children:[a.jsx(ht,{selected:!1,children:r.cloneElement(e.icon,{style:{transform:t?"scale(1.1)":"scale(1)",transition:"transform 0.2s ease"}})}),p&&a.jsx(he,{primary:e.label,primaryTypographyProps:{sx:{fontSize:"0.875rem",color:"inherit",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},sx:{opacity:p?1:0,ml:.5}})]},e.id);return p?s:a.jsx(ue,{title:e.label,placement:"right",arrow:!0,componentsProps:{tooltip:{sx:{backgroundColor:me(qe,.9),color:Qe,backdropFilter:"blur(8px)",fontSize:"0.75rem",padding:"6px 12px",borderRadius:"6px",marginLeft:"8px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.2)",border:`1px solid ${me(at,.5)}`}},arrow:{sx:{color:me(qe,.9)}}},children:s},e.id)})}),p&&a.jsx(de,{sx:{mt:3,mx:3,p:1.5,borderRadius:"10px",backgroundColor:me(Ze,.08),display:"flex",alignItems:"center",gap:1.5},children:a.jsx(fe,{sx:{width:32,height:32,backgroundColor:me(Ze,.2),color:Ze,fontSize:"0.75rem",fontWeight:600,boxShadow:`0 0 0 2px ${me(Ze,.1)}`},children:"A"})})]})]})]});return a.jsxs(a.Fragment,{children:[m&&a.jsx(be,{color:"inherit","aria-label":"open drawer",onClick:v,edge:"start",disabled:j,sx:{position:"fixed",top:12,left:16,zIndex:1300,backgroundColor:me(qe,.8),backdropFilter:"blur(8px)",borderRadius:"6px",width:40,height:40,"&:hover":{backgroundColor:me(qe,.95)}},children:a.jsx(Se,{})}),m?a.jsx(je,{variant:"temporary",open:h,onClose:v,ModalProps:{keepMounted:!0},sx:{display:{xs:"block",md:"none"},"& .MuiDrawer-paper":{width:256,backgroundColor:qe,borderRight:"none"}},children:S}):a.jsx(gt,{variant:"permanent",open:p,isMobile:m,children:S})]})},Nt={employees:{counts:{pending:0}},vendors:{counts:{open:0}},requisitions:{counts:{pending:0}},rfqs:{counts:{open:0}},purchaseOrders:{counts:{pending:0}},invoices:{counts:{pending:0}}};vt.propTypes={stats:ne.shape({employees:ne.object,vendors:ne.object,requisitions:ne.object,rfqs:ne.object,purchaseOrders:ne.object,invoices:ne.object}),activeSection:ne.string.isRequired,handleSectionChange:ne.func.isRequired,onSidebarToggle:ne.func};const wt=({user:t,notificationCount:r=3,onNotificationClick:w,onHelpClick:k,onAssistantClick:S,onPreferencesClick:C,onProfileClick:M,onSettingsClick:L,onSignOutClick:T,onMobileMenuToggle:A,scrollPosition:z=0,importantDates:D=[],sidebarOpen:E=!0,sidebarWidth:F=256,collapsedSidebarWidth:R=70})=>{const[P,B]=s.useState(!1),[O,W]=s.useState(!1),[$,I]=s.useState(!1),[K,H]=s.useState(new Date),[V,U]=s.useState(!1),[G,_]=s.useState(null),[q,J]=s.useState(new Date),Y=e(),[Z]=i(),[X,Q]=s.useState(()=>Z.get("section")||"dashboard"),ee=Math.min(z/100,.95),te=Math.min(z/10,20),se=(D.length>0?D:[{date:new Date(2025,4,15),title:"Vendor Proposal Deadline",type:"deadline",description:"Final date for vendors to submit proposals for Q2 IT equipment",location:"Procurement Portal",priority:"high"},{date:new Date(2025,4,17),title:"Procurement Meeting",type:"meeting",description:"Team meeting to review vendor proposals",location:"Conference Room A",time:"10:00 AM",priority:"medium"},{date:new Date(2025,4,20),title:"Contract Renewal",type:"contract",description:"Office supplies contract renewal",location:"Legal Department",priority:"medium"}]).filter(e=>Ce(e.date,new Date)&&Me(e.date,Le(new Date,7))).sort((e,t)=>e.date-t.date);s.useEffect(()=>{const e=()=>{W(!1),I(!1),B(!1)};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[]);const ae=e=>{switch(e){case"deadline":return"bg-red-100 text-red-700 border-red-200";case"meeting":return"bg-blue-100 text-blue-700 border-blue-200";case"contract":return"bg-purple-100 text-purple-700 border-purple-200";case"review":return"bg-yellow-100 text-yellow-700 border-yellow-200";case"approval":return"bg-green-100 text-green-700 border-green-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}},re=e=>{switch(e){case"deadline":return a.jsx(N,{size:14});case"meeting":return a.jsx(d,{size:14});case"contract":return a.jsx(b,{size:14});case"review":return a.jsx(v,{size:14});case"approval":return a.jsx(y,{size:14});default:return a.jsx(o,{size:14})}};return s.useEffect(()=>{const e=()=>{B(!1),W(!1),I(!1)},t=()=>{B(!1),W(!1),I(!1)};return window.addEventListener("resize",e),window.addEventListener("sidebarToggle",t),()=>{window.removeEventListener("resize",e),window.removeEventListener("sidebarToggle",t)}},[E]),a.jsxs(a.Fragment,{children:[a.jsxs(Ae.header,{initial:{y:-100,opacity:0},animate:{y:0,opacity:1},className:"fixed top-0 z-50 transition-all duration-300",style:{left:window.innerWidth<768?0:E?F:R,width:(()=>{if(window.innerWidth<768)return"100%";return`calc(100% - ${E?F:R}px)`})(),backgroundColor:`rgba(255, 255, 255, ${ee})`,backdropFilter:`blur(${te}px)`,borderBottom:ee>.1?"1px solid rgba(229, 231, 235, 0.8)":"none"},children:[a.jsx("div",{className:"max-w-full mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex items-center justify-between h-16",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(Ae.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{B(!P),A?.(!P)},className:"md:hidden p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-all duration-200",children:P?a.jsx(n,{size:20}):a.jsx(l,{size:20})}),a.jsxs("div",{className:"relative",children:[a.jsxs(Ae.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:e=>{e.stopPropagation(),I(!$)},className:"flex items-center gap-2 px-3 py-2 bg-blue-50 hover:bg-blue-100 text-blue-700 rounded-lg transition-all duration-200 border border-blue-200",children:[a.jsx(o,{size:16}),a.jsx("span",{className:"text-sm font-medium hidden sm:inline",children:Te(new Date,"MMM d, yyyy")}),a.jsx(c,{size:14,className:"transition-transform duration-200 "+($?"rotate-180":"")})]}),a.jsx(ze,{children:$&&a.jsxs(Ae.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},transition:{duration:.2},className:"absolute top-full left-0 mt-2 w-80 bg-white rounded-xl shadow-xl border border-gray-200 z-50",onClick:e=>e.stopPropagation(),children:[a.jsx("div",{className:"p-4 border-b border-gray-100 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-t-xl",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[a.jsx(o,{size:18}),"Calendar"]}),a.jsx("span",{className:"text-sm bg-white/20 px-2 py-1 rounded-full",children:Te(new Date,"MMMM yyyy")})]})}),a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("h4",{className:"font-medium text-gray-900 flex items-center gap-2",children:[a.jsx(d,{size:16,className:"text-blue-600"}),"Upcoming Events"]}),a.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full",children:se.length})]}),a.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:se.length>0?se.map((e,t)=>a.jsxs(Ae.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.1*t},className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors duration-200 cursor-pointer",onClick:()=>{_(e),U(!0),I(!1)},children:[a.jsx("div",{className:`p-1.5 rounded-lg ${ae(e.type)}`,children:re(e.type)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h5",{className:"font-medium text-gray-900 text-sm truncate",children:e.title}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx("span",{className:"text-xs text-gray-600",children:Te(e.date,"MMM d")}),e.time&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-gray-400",children:"•"}),a.jsx("span",{className:"text-xs text-gray-600",children:e.time})]})]})]}),a.jsx("span",{className:"text-xs px-2 py-1 rounded-full "+("high"===e.priority?"bg-red-100 text-red-700":"medium"===e.priority?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"),children:e.priority})]},t)):a.jsxs("div",{className:"text-center py-6 text-gray-500",children:[a.jsx(o,{size:24,className:"mx-auto mb-2 opacity-50"}),a.jsx("p",{className:"text-sm",children:"No upcoming events"})]})})]}),a.jsx("div",{className:"p-3 border-t border-gray-100 bg-gray-50 rounded-b-xl",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),a.jsx("span",{className:"text-xs text-gray-600",children:"Deadline"})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),a.jsx("span",{className:"text-xs text-gray-600",children:"Meeting"})]})]}),a.jsx("button",{onClick:()=>I(!1),className:"text-sm text-gray-600 hover:text-gray-900 transition-colors duration-200",children:"Close"})]})})]})})]}),a.jsxs(Ae.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:w,className:"relative p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all duration-200",children:[a.jsx(x,{size:20}),r>0&&a.jsx(Ae.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center font-medium",children:r})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"hidden md:flex items-center gap-2",children:[a.jsx(Ae.button,{whileHover:{scale:1.05,y:-1},whileTap:{scale:.95},onClick:k,className:"p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all duration-200",title:"Help Center",children:a.jsx(m,{size:18})}),a.jsx(Ae.button,{whileHover:{scale:1.05,y:-1},whileTap:{scale:.95},onClick:S,className:"p-2 text-gray-600 hover:text-purple-600 hover:bg-purple-50 rounded-lg transition-all duration-200",title:"AI Assistant",children:a.jsx(p,{size:18})}),a.jsx(Ae.button,{whileHover:{scale:1.05,y:-1},whileTap:{scale:.95},onClick:C,className:"p-2 text-gray-600 hover:text-green-600 hover:bg-green-50 rounded-lg transition-all duration-200",title:"Settings",children:a.jsx(g,{size:18})})]}),a.jsxs("div",{className:"relative",children:[a.jsxs(Ae.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:e=>{e.stopPropagation(),W(!O)},className:"flex items-center gap-2 p-1 hover:bg-gray-100 rounded-lg transition-all duration-200",children:[a.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-full flex items-center justify-center font-medium text-sm",children:t?.firstName&&t?.lastName?`${t.firstName.charAt(0)}${t.lastName.charAt(0)}`:t?.firstName?t.firstName.charAt(0):t?.lastName?t.lastName.charAt(0):"G"}),a.jsx(c,{size:14,className:"transition-transform duration-200 "+(O?"rotate-180":"")})]}),a.jsx(ze,{children:O&&a.jsx(Ae.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},transition:{duration:.2},className:"absolute top-full right-0 mt-2 w-48 bg-white rounded-lg shadow-xl border border-gray-200 z-50",onClick:e=>e.stopPropagation(),children:a.jsxs("div",{className:"p-2",children:[a.jsxs("button",{onClick:()=>{var e;M?.(),W(!1),Q(e="user-profile"),Y(`?section=${e}`,{replace:!0})},className:"w-full flex items-center gap-3 px-3 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors duration-200",children:[a.jsx(h,{size:16}),a.jsx("span",{className:"text-sm",children:"Profile"})]}),a.jsxs("button",{onClick:()=>{L?.(),W(!1)},className:"w-full flex items-center gap-3 px-3 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors duration-200",children:[a.jsx(g,{size:16}),a.jsx("span",{className:"text-sm",children:"Settings"})]}),a.jsx("hr",{className:"my-2 border-gray-200"}),a.jsxs("button",{onClick:()=>{T?.(),W(!1)},className:"w-full flex items-center gap-3 px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors duration-200",children:[a.jsx(u,{size:16}),a.jsx("span",{className:"text-sm",children:"Sign Out"})]})]})})})]})]})]})}),a.jsx(ze,{children:P&&a.jsx(Ae.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"md:hidden border-t border-gray-200 bg-white/95 backdrop-blur-sm",children:a.jsxs("div",{className:"px-4 py-3 space-y-2",children:[a.jsxs("button",{onClick:k,className:"w-full flex items-center gap-3 px-3 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors duration-200",children:[a.jsx(m,{size:18}),a.jsx("span",{children:"Help Center"})]}),a.jsxs("button",{onClick:S,className:"w-full flex items-center gap-3 px-3 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors duration-200",children:[a.jsx(p,{size:18}),a.jsx("span",{children:"AI Assistant"})]}),a.jsxs("button",{onClick:C,className:"w-full flex items-center gap-3 px-3 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors duration-200",children:[a.jsx(g,{size:18}),a.jsx("span",{children:"Preferences"})]})]})})})]}),a.jsx(ze,{children:V&&G&&a.jsx(Ae.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>U(!1),children:a.jsxs(Ae.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"bg-white rounded-2xl shadow-2xl max-w-md w-full overflow-hidden",onClick:e=>e.stopPropagation(),children:[a.jsx("div",{className:"p-6 text-white "+("deadline"===G.type?"bg-gradient-to-r from-red-600 to-red-700":"meeting"===G.type?"bg-gradient-to-r from-blue-600 to-blue-700":"contract"===G.type?"bg-gradient-to-r from-purple-600 to-purple-700":"review"===G.type?"bg-gradient-to-r from-yellow-600 to-yellow-700":"approval"===G.type?"bg-gradient-to-r from-green-600 to-green-700":"bg-gradient-to-r from-gray-600 to-gray-700"),children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsx("span",{className:"inline-block px-2 py-1 bg-white/20 rounded-full text-xs font-medium mb-2",children:G.type?.toUpperCase()}),a.jsx("h3",{className:"text-xl font-semibold mb-2",children:G.title}),a.jsxs("div",{className:"flex items-center gap-2 text-white/90",children:[a.jsx(o,{size:16}),a.jsxs("span",{className:"text-sm",children:[Te(G.date,"EEEE, MMMM d, yyyy"),G.time&&` • ${G.time}`]})]})]}),a.jsx("button",{onClick:()=>U(!1),className:"p-1 hover:bg-white/20 rounded-lg transition-colors duration-200",children:a.jsx(n,{size:20})})]})}),a.jsxs("div",{className:"p-6 space-y-4",children:[G.location&&a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(f,{size:18,className:"text-gray-500 mt-0.5 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900",children:"Location"}),a.jsx("p",{className:"text-gray-600 text-sm",children:G.location})]})]}),a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(b,{size:18,className:"text-gray-500 mt-0.5 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900",children:"Description"}),a.jsx("p",{className:"text-gray-600 text-sm",children:G.description})]})]}),G.priority&&a.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-lg "+("high"===G.priority?"bg-red-50 border border-red-200":"medium"===G.priority?"bg-yellow-50 border border-yellow-200":"bg-blue-50 border border-blue-200"),children:[a.jsx(j,{size:16,className:"high"===G.priority?"text-red-600":"medium"===G.priority?"text-yellow-600":"text-blue-600"}),a.jsx("span",{className:"text-sm font-medium "+("high"===G.priority?"text-red-700":"medium"===G.priority?"text-yellow-700":"text-blue-700"),children:"high"===G.priority?"High Priority":"medium"===G.priority?"Medium Priority":"Low Priority"})]})]}),a.jsxs("div",{className:"p-6 pt-0 flex items-center justify-end gap-3",children:[a.jsx("button",{onClick:()=>U(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors duration-200",children:"Close"}),a.jsx("button",{onClick:()=>U(!1),className:"px-4 py-2 text-white rounded-lg transition-all duration-200 "+("deadline"===G.type?"bg-red-600 hover:bg-red-700":"meeting"===G.type?"bg-blue-600 hover:bg-blue-700":"contract"===G.type?"bg-purple-600 hover:bg-purple-700":"review"===G.type?"bg-yellow-600 hover:bg-yellow-700":"approval"===G.type?"bg-green-600 hover:bg-green-700":"bg-gray-600 hover:bg-gray-700"),children:"View Details"})]})]})})})]})},kt=()=>a.jsx("style",{jsx:!0,global:!0,children:"\n    @keyframes pulse {\n      0%, 100% {\n        transform: scale(1);\n        opacity: 0.8;\n      }\n      50% {\n        transform: scale(1.1);\n        opacity: 0.4;\n      }\n    }\n    \n    @keyframes ripple {\n      0% {\n        transform: scale(1);\n        opacity: 0.8;\n      }\n      100% {\n        transform: scale(1.3);\n        opacity: 0;\n      }\n    }\n\n    @keyframes fadeIn {\n      from {\n        opacity: 0;\n        transform: translateY(-10px);\n      }\n      to {\n        opacity: 1;\n        transform: translateY(0);\n      }\n    }\n\n    .animate-pulse-custom {\n      animation: pulse 2s infinite;\n    }\n\n    .animate-ripple {\n      animation: ripple 3s infinite;\n    }\n\n    .animate-fade-in {\n      animation: fadeIn 0.3s ease-out;\n    }\n\n    /* Custom scrollbar for dropdown menus */\n    .custom-scrollbar::-webkit-scrollbar {\n      width: 4px;\n    }\n\n    .custom-scrollbar::-webkit-scrollbar-track {\n      background: #f1f5f9;\n      border-radius: 2px;\n    }\n\n    .custom-scrollbar::-webkit-scrollbar-thumb {\n      background: #cbd5e1;\n      border-radius: 2px;\n    }\n\n    .custom-scrollbar::-webkit-scrollbar-thumb:hover {\n      background: #94a3b8;\n    }\n\n    /* Smooth transitions for all interactive elements */\n    .transition-smooth {\n      transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);\n    }\n\n    /* Backdrop blur support */\n    .backdrop-blur-custom {\n      backdrop-filter: blur(12px) saturate(180%);\n      -webkit-backdrop-filter: blur(12px) saturate(180%);\n    }\n\n    /* Focus styles for accessibility */\n    .focus-ring:focus {\n      outline: 2px solid #3b82f6;\n      outline-offset: 2px;\n    }\n\n    /* Hover effects for buttons */\n    .btn-hover:hover {\n      transform: translateY(-1px);\n      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n    }\n\n    /* Loading spinner animation */\n    @keyframes spin {\n      from {\n        transform: rotate(0deg);\n      }\n      to {\n        transform: rotate(360deg);\n      }\n    }\n\n    .animate-spin-slow {\n      animation: spin 3s linear infinite;\n    }\n\n    /* Gradient animations */\n    @keyframes gradient-shift {\n      0%, 100% {\n        background-position: 0% 50%;\n      }\n      50% {\n        background-position: 100% 50%;\n      }\n    }\n\n    .gradient-animate {\n      background-size: 200% 200%;\n      animation: gradient-shift 6s ease infinite;\n    }\n\n    /* Text shimmer effect */\n    @keyframes shimmer {\n      0% {\n        background-position: -200px 0;\n      }\n      100% {\n        background-position: calc(200px + 100%) 0;\n      }\n    }\n\n    .text-shimmer {\n      background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 37%, #f0f0f0 63%);\n      background-size: 400px 100%;\n      animation: shimmer 1.4s ease-in-out infinite;\n    }\n\n    /* Dark mode support */\n    @media (prefers-color-scheme: dark) {\n      .dark-mode-bg {\n        background-color: #1f2937;\n        color: #f9fafb;\n      }\n      \n      .dark-mode-border {\n        border-color: #374151;\n      }\n      \n      .dark-mode-text {\n        color: #d1d5db;\n      }\n    }\n\n    /* Mobile-specific styles */\n    @media (max-width: 768px) {\n      .mobile-optimized {\n        padding: 0.75rem;\n      }\n      \n      .mobile-text {\n        font-size: 0.875rem;\n      }\n      \n      .mobile-button {\n        min-height: 44px;\n        min-width: 44px;\n      }\n    }\n\n    /* High contrast mode support */\n    @media (prefers-contrast: high) {\n      .high-contrast {\n        border: 2px solid currentColor;\n      }\n      \n      .high-contrast-text {\n        font-weight: 600;\n      }\n    }\n\n    /* Reduced motion support */\n    @media (prefers-reduced-motion: reduce) {\n      * {\n        animation-duration: 0.01ms !important;\n        animation-iteration-count: 1 !important;\n        transition-duration: 0.01ms !important;\n      }\n    }\n\n    /* Print styles */\n    @media print {\n      .no-print {\n        display: none !important;\n      }\n      \n      .print-friendly {\n        background: white !important;\n        color: black !important;\n        box-shadow: none !important;\n      }\n    }\n  "}),St=({user:t,onMobileMenuToggle:r,scrollPosition:n,sidebarOpen:l=!0,sidebarWidth:o=256,collapsedSidebarWidth:c=70})=>{const d=[{date:new Date(2025,4,15),title:"Vendor Proposal Deadline",type:"deadline",description:"Final date for vendors to submit proposals for the Q2 IT equipment procurement",location:"Procurement Portal",priority:"high"},{date:new Date(2025,4,17),title:"Procurement Meeting",type:"meeting",description:"Team meeting to review vendor proposals and make selections",location:"Conference Room A",time:"10:00 AM",priority:"medium"},{date:new Date(2025,4,20),title:"Contract Renewal",type:"contract",description:"Annual renewal of office supplies contract with OfficeMax",location:"Legal Department",priority:"medium"},{date:new Date(2025,4,24),title:"Quarterly Review",type:"review",description:"Financial review of procurement spending for Q1",location:"Executive Boardroom",time:"2:00 PM",priority:"high"},{date:new Date(2025,4,28),title:"Budget Approval",type:"approval",description:"Final approval for Q3 procurement budget",location:"Finance Department",priority:"high"},{date:new Date(2025,4,14),title:"Vendor Evaluation",type:"meeting",description:"Evaluate new potential suppliers for hardware components",location:"Meeting Room B",time:"11:30 AM",priority:"medium"},{date:new Date(2025,4,18),title:"Contract Draft Review",type:"contract",description:"Legal team review of new vendor contracts",location:"Legal Office",time:"9:00 AM",priority:"medium"},{date:new Date(2025,4,22),title:"Procurement Training",type:"meeting",description:"New system training for procurement team",location:"Training Center",time:"1:00 PM",priority:"low"}],[x,m]=s.useState(d),p=e(),[g]=i(),[h,u]=s.useState(()=>g.get("section")||"dashboard"),[f,b]=s.useState(3);return s.useEffect(()=>{(async()=>{})()},[]),a.jsxs(a.Fragment,{children:[a.jsx(kt,{}),a.jsx(wt,{user:t,notificationCount:f,onNotificationClick:()=>{},onHelpClick:()=>{},onAssistantClick:()=>{},onPreferencesClick:()=>{},onProfileClick:()=>{return u(e="user-profile"),void p(`?section=${e}`,{replace:!0});var e},onSettingsClick:()=>{},onSignOutClick:()=>{},onMobileMenuToggle:r,scrollPosition:n,importantDates:x,sidebarOpen:l,sidebarWidth:o,collapsedSidebarWidth:c})]})},Ct="http://localhost:4000/api",Mt=async()=>{const e=localStorage.getItem("token"),t=await fetch(`${Ct}/drivers`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error("Failed to fetch real drivers");return t.json()},Lt=async()=>{const e=localStorage.getItem("token"),t=await fetch(`${Ct}/drivers/statistics`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error("Failed to fetch real statistics");return t.json()},Tt=async()=>{const e=localStorage.getItem("token"),t=await fetch(`${Ct}/location-service/status`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error("Failed to fetch service status");return t.json()},At=async(e=2)=>{const t=localStorage.getItem("token"),s=await fetch(`${Ct}/location-service/start`,{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({intervalMinutes:e})});if(!s.ok)throw new Error("Failed to start location service");return s.json()},zt=async()=>{const e=localStorage.getItem("token"),t=await fetch(`${Ct}/location-service/stop`,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error("Failed to stop location service");return t.json()},Dt=async()=>{const e=localStorage.getItem("token"),t=await fetch(`${Ct}/location-service/trigger-update`,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error("Failed to trigger location update");return t.json()},Et=({drivers:e,driverStats:t,onDriverSelect:r,isLoading:i,serviceStatus:n})=>{const l=s.useRef(null),o=s.useRef(null),c=s.useRef([]),[d,x]=s.useState(!1),{user:m}=ie();return s.useEffect(()=>{if(window.google&&window.google.maps)return void x(!0);const e=document.createElement("script");return e.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDwFFcggWvfKn3Rd12OvYCgZ_oOV7rWJUk&libraries=geometry,places",e.async=!0,e.defer=!0,e.onload=()=>{x(!0)},e.onerror=()=>{},document.head.appendChild(e),()=>{e.parentNode&&e.parentNode.removeChild(e)}},[]),s.useEffect(()=>{if(!d||!l.current)return;const e=new window.google.maps.Map(l.current,{center:{lat:-13.2543,lng:34.3015},zoom:7,disableDefaultUI:!0,styles:[{featureType:"administrative",elementType:"labels.text.fill",stylers:[{color:"#6B7280"}]},{featureType:"landscape",elementType:"all",stylers:[{color:"#F9FAFB"}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"all",stylers:[{saturation:-100},{lightness:45}]},{featureType:"water",elementType:"all",stylers:[{color:"#3B82F6"},{visibility:"on"}]}]});o.current=e;const t=new window.google.maps.LatLngBounds(new window.google.maps.LatLng(-17.129,32.67),new window.google.maps.LatLng(-9.368,35.918));return e.fitBounds(t),()=>{o.current&&(o.current=null)}},[d]),s.useEffect(()=>{if(!d)return;navigator.geolocation&&navigator.geolocation.getCurrentPosition(e=>{const t={lat:e.coords.latitude,lng:e.coords.longitude,accuracy:e.coords.accuracy,timestamp:new Date(e.timestamp)};o.current&&(o.current.setCenter({lat:t.lat,lng:t.lng}),o.current.setZoom(12))},e=>{o.current&&(o.current.setCenter({lat:-13.2543,lng:34.3015}),o.current.setZoom(7))},{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})},[d]),s.useEffect(()=>{if(!o.current||!e.length)return;c.current.forEach(e=>e.setMap(null)),c.current=[];const t=e=>{const{status:t,isOnline:s,hasGPSEnabled:a,isMoving:r,speed:i}=e;let n="#9CA3AF",l="#6B7280",o=8;if(s)if(a)switch(t){case"available":n="#10B981",l="#059669";break;case"on-assignment":n="#3B82F6",l="#2563EB";break;case"off-duty":n="#9CA3AF",l="#6B7280";break;case"maintenance":n="#EF4444",l="#DC2626"}else n="#EF4444",l="#DC2626";else n="#9CA3AF",l="#6B7280";return r&&i>5&&(o=10,l="#F59E0B"),{path:window.google.maps.SymbolPath.CIRCLE,fillColor:n,fillOpacity:1,strokeColor:l,strokeWeight:a?3:2,scale:o}};function s(e){switch(e){case"available":return"text-emerald-600";case"on-assignment":return"text-blue-600";case"off-duty":default:return"text-gray-600";case"maintenance":return"text-red-600"}}e.forEach(e=>{if(!e.lat||!e.lng)return;const a=new window.google.maps.Marker({position:{lat:e.lat,lng:e.lng},map:o.current,icon:t(e),title:`${e.name} - ${e.vehicle}`}),i=e.lastUpdate?new Date(e.lastUpdate).toLocaleString():"Never",n=e.locationAccuracy?`±${e.locationAccuracy}m`:"Unknown",l=e.speed?`${e.speed} km/h`:"Unknown",d=e.batteryLevel?`${e.batteryLevel}%`:"Unknown",x=e.heading?`${e.heading}°`:"Unknown",m=new window.google.maps.InfoWindow({content:`\n          <div class="p-4 min-w-[280px]">\n            <div class="flex items-center gap-2 mb-3">\n              <h3 class="font-semibold text-gray-900 text-lg">${e.name}</h3>\n              ${e.isOnline?'<div class="w-3 h-3 bg-green-500 rounded-full"></div>':'<div class="w-3 h-3 bg-gray-400 rounded-full"></div>'}\n              ${e.isMoving?'<div class="text-xs bg-orange-100 text-orange-700 px-2 py-1 rounded">MOVING</div>':""}\n            </div>\n            \n            <p class="text-sm text-gray-600 mb-2 font-medium">${e.vehicle}</p>\n            <p class="text-sm font-semibold ${s(e.status)} mb-3">${e.status.replace("-"," ").toUpperCase()}</p>\n            \n            <div class="grid grid-cols-2 gap-3 text-xs text-gray-600 mb-3">\n              <div>\n                <span class="font-medium text-gray-700">ID:</span><br>\n                <span>${e.empId}</span>\n              </div>\n              <div>\n                <span class="font-medium text-gray-700">Dept:</span><br>\n                <span>${e.department}</span>\n              </div>\n              <div>\n                <span class="font-medium text-gray-700">Speed:</span><br>\n                <span class="font-medium ${e.isMoving?"text-orange-600":"text-gray-500"}">${l}</span>\n              </div>\n              <div>\n                <span class="font-medium text-gray-700">Battery:</span><br>\n                <span class="font-medium ${e.batteryLevel<20?"text-red-600":"text-green-600"}">${d}</span>\n              </div>\n            </div>\n            \n            <div class="text-xs text-gray-500 space-y-1 border-t pt-2">\n              <p><span class="font-medium">Last Update:</span> ${i}</p>\n              <p><span class="font-medium">Accuracy:</span> ${n}</p>\n              <p><span class="font-medium">Heading:</span> ${x}</p>\n              <p><span class="font-medium">Source:</span> ${e.locationSource||"manual"}</p>\n            </div>\n          </div>\n        `});a.addListener("click",()=>{m.open(o.current,a),r&&r(e)}),c.current.push(a)})},[e,r]),a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 h-full min-h-[600px]",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-blue-500 rounded-lg",children:a.jsx(f,{className:"text-white",size:20})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:"Live Fleet Tracking"}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[a.jsx("span",{children:"Real-time GPS tracking"}),n?.isRunning&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),a.jsx("span",{className:"text-green-600 font-medium",children:"Live"})]})]})]}),i&&a.jsx("div",{className:"w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"})]}),a.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 bg-emerald-500 rounded-full"}),a.jsxs("span",{className:"text-gray-600",children:["Available (",t.available,")"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),a.jsxs("span",{className:"text-gray-600",children:["Active (",t.onAssignment,")"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded-full"}),a.jsxs("span",{className:"text-gray-600",children:["Moving (",t.moving||0,")"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(S,{className:"w-4 h-4 text-green-500"}),a.jsxs("span",{className:"text-gray-600",children:["Online (",t.online||0,")"]})]})]})]}),a.jsxs("div",{className:"relative flex-1",style:{height:"calc(100% - 80px)"},children:[a.jsx("div",{ref:l,className:"w-full h-full",children:!d&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-3"}),a.jsx("p",{className:"text-gray-600 font-medium",children:"Loading map..."})]})})}),a.jsx("div",{className:"absolute top-3 right-3 flex flex-col gap-2",children:a.jsx("button",{className:"w-8 h-8 bg-white hover:bg-gray-50 rounded-lg shadow-md flex items-center justify-center text-gray-600 border border-gray-200",onClick:()=>{if(o.current){const e=new window.google.maps.LatLngBounds(new window.google.maps.LatLng(-17.129,32.67),new window.google.maps.LatLng(-9.368,35.918));o.current.fitBounds(e)}},title:"Fit to Malawi",children:a.jsx(B,{size:14})})}),a.jsxs("div",{className:"absolute bottom-3 left-3 bg-white rounded-lg shadow-md border border-gray-200 p-3",children:[a.jsx("div",{className:"text-xs font-medium text-gray-700 mb-2",children:"Driver Status"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full"}),a.jsx("span",{className:"text-gray-600",children:"Available"})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),a.jsx("span",{className:"text-gray-600",children:"Active"})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full"}),a.jsx("span",{className:"text-gray-600",children:"Off Duty"})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),a.jsx("span",{className:"text-gray-600",children:"Maintenance"})]})]}),a.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-100",children:[a.jsx("div",{className:"text-xs font-medium text-gray-700 mb-1",children:"Live Tracking"}),a.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[a.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full"}),a.jsx("span",{className:"text-gray-600",children:"Moving (Larger marker)"})]})]})]})]})]})},Ft=()=>{const[e,t]=s.useState(null),[r,i]=s.useState([]),[n,l]=s.useState(!1),[o,c]=s.useState([]),[d,x]=s.useState({available:0,onAssignment:0,offDuty:0,maintenance:0,total:0,online:0,withGPS:0,moving:0}),[m,p]=s.useState(!0),[g,h]=s.useState(null),[u,b]=s.useState(null),[y,N]=s.useState(null),B=s.useRef(null);s.useEffect(()=>{const e=localStorage.getItem("token");if(!e)return void h("Authentication required");B.current=Ee("http://localhost:4000",{auth:{token:e}});const t=B.current;return t.on("connect",()=>{t.emit("request-current-locations"),t.emit("request-service-status")}),t.on("driver-location-update",e=>{c(t=>t.map(t=>t.empId===e.driverId?{...t,lat:e.location.latitude,lng:e.location.longitude,lastUpdate:e.timestamp,locationAccuracy:e.accuracy,locationSource:e.source||"gps",speed:e.speed,heading:e.heading,batteryLevel:e.batteryLevel,isMoving:e.speed>5}:t)),b(new Date)}),t.on("location-service-update",e=>{i(t=>[{id:Date.now(),type:"info",message:`Location updated for ${e.driversUpdated}/${e.driversTotal} drivers`,timestamp:e.timestamp},...t.slice(0,4)])}),t.on("service-status",e=>{e.success&&N(e.data)}),t.on("current-locations",e=>{e.success}),()=>{B.current&&B.current.disconnect()}},[]),s.useEffect(()=>{(async()=>{p(!0);try{const[e,t,s]=await Promise.all([Mt(),Lt(),Tt()]);e.success&&c(e.data),t.success&&x(t.data),s.success&&N(s.data),h(null)}catch(e){h(e.message)}finally{p(!1)}})()},[]);const O=async()=>{l(!0);try{const[e,t]=await Promise.all([Mt(),Lt()]);e.success&&c(e.data),t.success&&x(t.data),h(null),b(new Date)}catch(e){h(e.message)}finally{setTimeout(()=>l(!1),1e3)}},W=async e=>{try{let t;if(t="start"===e?await At(2):await zt(),t.success){const e=await Tt();e.success&&N(e.data),i(e=>[{id:Date.now(),type:"success",message:t.message,timestamp:new Date},...e.slice(0,4)])}}catch(t){i(t=>[{id:Date.now(),type:"error",message:`Failed to ${e} location service`,timestamp:new Date},...t.slice(0,4)])}},$={totalHours:d.totalHours||0,avgTransportTime:d.avgTransportTime||0,employeeSatisfaction:d.employeeSatisfaction||0,fuelEfficiency:d.fuelEfficiency||0,responseTime:d.responseTime||0,fleetUtilization:d.fleetUtilization||0,costSavings:d.costSavings||0},I=({title:e,value:t,icon:s,color:r,trend:i,subtitle:n,prefix:l="",suffix:o=""})=>a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 hover:shadow-md transition-shadow",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("div",{className:"p-2 rounded-lg "+("text-blue-600"===r?"bg-blue-50":"text-emerald-600"===r?"bg-emerald-50":"text-purple-600"===r?"bg-purple-50":"bg-orange-50"),children:a.jsx(s,{size:20,className:r})}),i&&a.jsxs("div",{className:"flex items-center gap-1",children:[i>0?a.jsx(v,{size:14,className:"text-emerald-500"}):a.jsx(P,{size:14,className:"text-red-500"}),a.jsxs("span",{className:"text-xs font-medium "+(i>0?"text-emerald-500":"text-red-500"),children:[i>0?"+":"",i,"%"]})]})]}),a.jsxs("div",{className:"text-2xl font-bold text-gray-900 mb-1",children:[l,t,o]}),a.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:e}),n&&a.jsx("div",{className:"text-xs text-gray-400",children:n})]});return m?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-3"}),a.jsx("p",{className:"text-gray-600 font-medium",children:"Loading Fleet Dashboard..."})]})}):g?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center bg-white p-6 rounded-lg shadow-md border border-gray-200",children:[a.jsx(j,{className:"w-12 h-12 text-red-500 mx-auto mb-3"}),a.jsx("p",{className:"text-gray-900 font-semibold mb-1",children:"Connection Error"}),a.jsx("p",{className:"text-gray-500 text-sm mb-4",children:g}),a.jsx("button",{onClick:O,className:"px-4 py-2 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600 transition-colors",children:"Retry Connection"})]})}):a.jsx("div",{className:"min-h-screen bg-gray-50",children:a.jsxs("main",{className:"p-4 space-y-4 max-w-7xl mx-auto",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Live Fleet Management"}),a.jsxs("div",{className:"flex items-center gap-4 mt-1 text-sm text-gray-500",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(w,{className:"w-4 h-4 text-green-500"}),a.jsxs("span",{children:["GPS tracking ",y?.isRunning?"active":"inactive"]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(f,{className:"w-4 h-4 text-blue-500"}),a.jsxs("span",{children:[o.filter(e=>e.hasGPSEnabled).length," GPS enabled"]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(k,{className:"w-4 h-4 text-orange-500"}),a.jsxs("span",{children:[o.filter(e=>e.isMoving).length," moving"]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(S,{className:"w-4 h-4 text-green-500"}),a.jsxs("span",{children:[d.online||0," online"]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"flex items-center gap-1 bg-white rounded-lg border border-gray-200 p-1",children:[a.jsxs("button",{onClick:()=>W("start"),disabled:y?.isRunning,className:"flex items-center gap-1 px-2 py-1 text-xs bg-green-500 text-white rounded disabled:bg-gray-300",title:"Start Location Service",children:[a.jsx(C,{size:12}),"Start"]}),a.jsxs("button",{onClick:()=>W("stop"),disabled:!y?.isRunning,className:"flex items-center gap-1 px-2 py-1 text-xs bg-red-500 text-white rounded disabled:bg-gray-300",title:"Stop Location Service",children:[a.jsx(M,{size:12}),"Stop"]})]}),a.jsxs("button",{onClick:async()=>{try{l(!0);const e=await Dt();e.success&&(i(t=>[{id:Date.now(),type:"success",message:`Live locations updated for ${e.data.driversUpdated} drivers`,timestamp:new Date},...t.slice(0,4)]),setTimeout(()=>{O()},2e3))}catch(e){i(e=>[{id:Date.now(),type:"error",message:"Failed to update live locations",timestamp:new Date},...e.slice(0,4)])}finally{l(!1)}},disabled:n,className:"flex items-center gap-2 px-3 py-2 bg-orange-500 text-white rounded-lg font-medium hover:bg-orange-600 transition-colors disabled:opacity-50",title:"Fetch Live Locations Now",children:[a.jsx(L,{size:16,className:n?"animate-spin":""}),"Live Update"]}),a.jsxs("button",{onClick:O,disabled:n,className:"flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600 transition-colors disabled:opacity-50",children:[a.jsx(T,{size:16,className:n?"animate-spin":""}),n?"Refreshing...":"Refresh"]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsx(I,{title:"Active Drivers",value:d.active+d.onAssignment,icon:A,color:"text-blue-600",trend:8,subtitle:`${o.length} total`}),a.jsx(I,{title:"GPS Enabled",value:d.withGPS||o.filter(e=>e.hasGPSEnabled).length,icon:f,color:"text-emerald-600",trend:12,subtitle:"Real-time tracking"}),a.jsx(I,{title:"Currently Moving",value:d.moving||o.filter(e=>e.isMoving).length,icon:k,color:"text-orange-600",trend:5,subtitle:"Live movement"}),a.jsx(I,{title:"Fleet Utilization",value:$.fleetUtilization,suffix:"%",icon:z,color:"text-purple-600",trend:-2,subtitle:"Efficiency rate"})]}),a.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-4 gap-4",children:[a.jsx("div",{className:"xl:col-span-3",children:a.jsx(Et,{drivers:o,driverStats:d,onDriverSelect:e=>{t(e)},isLoading:n,serviceStatus:y})}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(w,{className:"w-5 h-5 text-gray-600"}),a.jsx("h3",{className:"font-semibold text-gray-900",children:"Live Tracking"}),y?.isRunning&&a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"})]}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Service Status:"}),a.jsx("span",{className:"font-medium "+(y?.isRunning?"text-green-600":"text-red-600"),children:y?.isRunning?"Active":"Inactive"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Last Update:"}),a.jsx("span",{className:"font-medium text-gray-700",children:y?.lastUpdateTime?new Date(y.lastUpdateTime).toLocaleTimeString():"Never"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"GPS Enabled:"}),a.jsx("span",{className:"font-medium text-blue-600",children:d.withGPS||0})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Moving Now:"}),a.jsx("span",{className:"font-medium text-orange-600",children:o.filter(e=>e.isMoving).length})]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(D,{className:"w-5 h-5 text-gray-600"}),a.jsx("h3",{className:"font-semibold text-gray-900",children:"Driver Status"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between p-2 bg-emerald-50 rounded",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Available"}),a.jsx("span",{className:"text-lg font-bold text-emerald-600",children:d.available})]}),a.jsxs("div",{className:"flex items-center justify-between p-2 bg-blue-50 rounded",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"On Assignment"}),a.jsx("span",{className:"text-lg font-bold text-blue-600",children:d.onAssignment})]}),a.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Off Duty"}),a.jsx("span",{className:"text-lg font-bold text-gray-600",children:d.offDuty})]}),a.jsxs("div",{className:"flex items-center justify-between p-2 bg-red-50 rounded",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Maintenance"}),a.jsx("span",{className:"text-lg font-bold text-red-600",children:d.maintenance})]})]})]}),r.length>0&&a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(E,{className:"w-5 h-5 text-gray-600"}),a.jsx("h3",{className:"font-semibold text-gray-900",children:"Recent Activity"})]}),a.jsx("div",{className:"space-y-2",children:r.slice(0,3).map(e=>a.jsxs("div",{className:"p-2 rounded text-xs "+("error"===e.type?"bg-red-50 border-l-2 border-red-500":"success"===e.type?"bg-green-50 border-l-2 border-green-500":"bg-blue-50 border-l-2 border-blue-500"),children:[a.jsx("p",{className:"text-gray-800 font-medium leading-tight",children:e.message}),a.jsx("p",{className:"text-gray-500 mt-1",children:new Date(e.timestamp).toLocaleTimeString()})]},e.id))})]}),0===r.length&&a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(E,{className:"w-5 h-5 text-gray-600"}),a.jsx("h3",{className:"font-semibold text-gray-900",children:"Recent Activity"})]}),a.jsxs("div",{className:"text-center py-4",children:[a.jsx(E,{className:"w-8 h-8 text-gray-300 mx-auto mb-2"}),a.jsx("p",{className:"text-sm text-gray-500",children:"No recent activity"}),a.jsx("p",{className:"text-xs text-gray-400",children:"Live tracking events will appear here"})]})]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(F,{className:"w-5 h-5 text-gray-600"}),a.jsxs("h3",{className:"font-semibold text-gray-900",children:["Driver Fleet (",o.length,")"]}),y?.isRunning&&a.jsxs("div",{className:"flex items-center gap-1 text-xs bg-green-100 text-green-700 px-2 py-1 rounded",children:[a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"Live Tracking"]})]}),a.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-500",children:[a.jsxs("span",{children:["Updated: ",u?u.toLocaleTimeString():"Never"]}),a.jsx("button",{className:"text-blue-600 hover:text-blue-700 font-medium",children:"Export"})]})]}),a.jsxs("div",{className:"p-4",children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3",children:o.map(e=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 hover:shadow-sm transition-shadow",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center relative",children:[a.jsx("span",{className:"text-white text-xs font-bold",children:e.name.split(" ").map(e=>e[0]).join("")}),e.isMoving&&a.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-orange-500 rounded-full animate-pulse"})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 text-sm",children:e.name}),a.jsx("p",{className:"text-xs text-gray-500",children:e.empId})]})]}),a.jsxs("div",{className:"flex gap-1",children:[e.isOnline&&a.jsx(S,{className:"w-3 h-3 text-green-500"}),e.hasGPSEnabled&&a.jsx(f,{className:"w-3 h-3 text-blue-500"}),e.isMoving&&a.jsx(k,{className:"w-3 h-3 text-orange-500"})]})]}),a.jsxs("div",{className:"space-y-1 text-xs",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-500",children:"Status:"}),a.jsx("span",{className:"font-medium "+("available"===e.status?"text-emerald-600":"on-assignment"===e.status?"text-blue-600":"off-duty"===e.status?"text-gray-600":"text-red-600"),children:e.status.replace("-"," ").toUpperCase()})]}),null!==e.speed&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-500",children:"Speed:"}),a.jsxs("span",{className:"font-medium "+(e.isMoving?"text-orange-600":"text-gray-600"),children:[e.speed," km/h"]})]}),e.batteryLevel&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-500",children:"Battery:"}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(R,{className:"w-3 h-3 "+(e.batteryLevel<20?"text-red-500":"text-green-500")}),a.jsxs("span",{className:"font-medium "+(e.batteryLevel<20?"text-red-600":"text-green-600"),children:[e.batteryLevel,"%"]})]})]}),e.lastUpdate&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-500",children:"Updated:"}),a.jsx("span",{className:"font-medium text-gray-700",children:new Date(e.lastUpdate).toLocaleTimeString()})]})]}),a.jsxs("div",{className:"flex justify-between mt-2 pt-2 border-t border-gray-100 text-xs text-gray-500",children:[a.jsxs("span",{children:["Trips: ",e.trips]}),a.jsxs("span",{children:["Hrs: ",e.hoursWorked]}),a.jsx("span",{className:"flex items-center gap-1 "+(e.isOnline?"text-green-600":"text-gray-400"),children:e.isOnline?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),"Online"]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-1.5 h-1.5 bg-gray-400 rounded-full"}),"Offline"]})})]})]},e.id))}),0===o.length&&a.jsxs("div",{className:"text-center py-8",children:[a.jsx(F,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),a.jsx("p",{className:"text-gray-500 font-medium",children:"No drivers found"}),a.jsx("p",{className:"text-gray-400 text-sm",children:"Add drivers to your fleet to see them here"})]})]})]})]})})},Rt={totalTrips:156,totalDistance:4250,totalFuel:425,totalPassengers:486,totalRevenue:125600,avgTripDistance:27.2,avgFuelEfficiency:10,safetyScore:94},Pt=[{month:"Jan",trips:45,distance:1200,fuel:120},{month:"Feb",trips:52,distance:1350,fuel:135},{month:"Mar",trips:48,distance:1280,fuel:128},{month:"Apr",trips:56,distance:1420,fuel:142},{month:"May",trips:61,distance:1580,fuel:158},{month:"Jun",trips:58,distance:1510,fuel:151}],Bt=[{name:"Completed",value:142,color:"#10B981"},{name:"Cancelled",value:8,color:"#EF4444"},{name:"In Progress",value:6,color:"#3B82F6"}],Ot=[{week:"Week 1",efficiency:9.8},{week:"Week 2",efficiency:10.2},{week:"Week 3",efficiency:9.9},{week:"Week 4",efficiency:10.1},{week:"Week 5",efficiency:10.3},{week:"Week 6",efficiency:9.7}],Wt=[{route:"Lilongwe - Blantyre",trips:45,percentage:29},{route:"Blantyre - Zomba",trips:32,percentage:21},{route:"Mzuzu - Lilongwe",trips:28,percentage:18},{route:"Lilongwe - Kasungu",trips:24,percentage:15},{route:"Others",trips:27,percentage:17}],$t=[{hour:"6AM",trips:12},{hour:"7AM",trips:18},{hour:"8AM",trips:25},{hour:"9AM",trips:15},{hour:"12PM",trips:20},{hour:"1PM",trips:22},{hour:"5PM",trips:28},{hour:"6PM",trips:24},{hour:"7PM",trips:16}],It=({title:e,value:t,icon:s,color:r,trend:i,subtitle:n,prefix:l="",suffix:o="",size:c="normal"})=>{const d="large"===c?"col-span-2":"",x="large"===c?"text-4xl":"text-2xl";return a.jsxs("div",{className:`bg-white rounded-lg border border-gray-200 p-4 hover:shadow-md transition-shadow ${d}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("div",{className:"p-2 rounded-lg "+("blue"===r?"bg-blue-50":"green"===r?"bg-emerald-50":"purple"===r?"bg-purple-50":"orange"===r?"bg-orange-50":"red"===r?"bg-red-50":"bg-gray-50"),children:a.jsx(s,{size:20,className:"blue"===r?"text-blue-600":"green"===r?"text-emerald-600":"purple"===r?"text-purple-600":"orange"===r?"text-orange-600":"red"===r?"text-red-600":"text-gray-600"})}),i&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(v,{size:14,className:i>0?"text-emerald-500":"text-red-500"}),a.jsxs("span",{className:"text-xs font-medium "+(i>0?"text-emerald-500":"text-red-500"),children:[i>0?"+":"",i,"%"]})]})]}),a.jsxs("div",{className:`${x} font-bold text-gray-900 mb-1`,children:[l,t,o]}),a.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:e}),n&&a.jsx("div",{className:"text-xs text-gray-400",children:n})]})},Kt=({title:e,children:t,action:s,size:r="normal"})=>{const i="large"===r?"col-span-2":"full"===r?"col-span-full":"";return a.jsxs("div",{className:`bg-white rounded-lg border border-gray-200 p-4 ${i}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:e}),s&&a.jsx("button",{className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:s})]}),t]})},Ht=({active:e,payload:t,label:s})=>e&&t&&t.length?a.jsxs("div",{className:"bg-white p-3 border border-gray-200 rounded-lg shadow-md",children:[a.jsx("p",{className:"font-medium text-gray-900",children:s}),t.map((e,t)=>a.jsxs("p",{className:"text-sm",style:{color:e.color},children:[e.name,": ",e.value]},t))]}):null,Vt=()=>{const[e,t]=s.useState("month"),[r,i]=s.useState(!1);return a.jsx("div",{className:"min-h-screen bg-gray-50",children:a.jsxs("main",{className:"p-4 space-y-4 max-w-7xl mx-auto",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Trip Management"}),a.jsxs("div",{className:"flex items-center gap-4 mt-1 text-sm text-gray-500",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(E,{className:"w-4 h-4 text-green-500"}),a.jsx("span",{children:"Active tracking"})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(o,{className:"w-4 h-4 text-blue-500"}),a.jsx("span",{children:"Last 30 days"})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("select",{value:e,onChange:e=>t(e.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg text-sm font-medium text-gray-700 bg-white",children:[a.jsx("option",{value:"week",children:"Last Week"}),a.jsx("option",{value:"month",children:"Last Month"}),a.jsx("option",{value:"quarter",children:"Last Quarter"}),a.jsx("option",{value:"year",children:"Last Year"})]}),a.jsxs("button",{onClick:()=>{i(!0),setTimeout(()=>i(!1),1e3)},disabled:r,className:"flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600 transition-colors disabled:opacity-50",children:[a.jsx(T,{size:16,className:r?"animate-spin":""}),"Refresh"]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsx(It,{title:"Total Trips",value:Rt.totalTrips,icon:O,color:"blue",trend:12,subtitle:"This month"}),a.jsx(It,{title:"Distance Covered",value:Rt.totalDistance.toLocaleString(),suffix:" km",icon:f,color:"green",trend:8,subtitle:"Total kilometers"}),a.jsx(It,{title:"Passengers Transported",value:Rt.totalPassengers.toLocaleString(),icon:A,color:"purple",trend:15,subtitle:"Total passengers"}),a.jsx(It,{title:"Fuel Consumed",value:Rt.totalFuel,suffix:" L",icon:W,color:"orange",trend:-3,subtitle:"Total fuel"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsx(It,{title:"Revenue Generated",value:Rt.totalRevenue.toLocaleString(),prefix:"MWK ",icon:$,color:"green",trend:18}),a.jsx(It,{title:"Avg Trip Distance",value:Rt.avgTripDistance,suffix:" km",icon:k,color:"blue",trend:5}),a.jsx(It,{title:"Fuel Efficiency",value:Rt.avgFuelEfficiency,suffix:" km/L",icon:z,color:"purple",trend:7}),a.jsx(It,{title:"Safety Score",value:Rt.safetyScore,suffix:"/100",icon:I,color:"green",trend:2})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[a.jsxs(Kt,{title:"Trip Status Distribution",children:[a.jsx(Fe,{width:"100%",height:200,children:a.jsxs(Re,{children:[a.jsx(Pe,{data:Bt,cx:"50%",cy:"50%",innerRadius:40,outerRadius:80,paddingAngle:5,dataKey:"value",children:Bt.map((e,t)=>a.jsx(Be,{fill:e.color},`cell-${t}`))}),a.jsx(Oe,{content:a.jsx(Ht,{})})]})}),a.jsx("div",{className:"flex justify-center gap-4 mt-2",children:Bt.map((e,t)=>a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}}),a.jsx("span",{className:"text-xs text-gray-600",children:e.name})]},t))})]}),a.jsx(Kt,{title:"Fuel Efficiency Trend",children:a.jsx(Fe,{width:"100%",height:200,children:a.jsxs(We,{data:Ot,children:[a.jsx($e,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),a.jsx(Ie,{dataKey:"week",axisLine:!1,tickLine:!1,tick:{fontSize:12}}),a.jsx(Ke,{axisLine:!1,tickLine:!1,tick:{fontSize:12}}),a.jsx(Oe,{content:a.jsx(Ht,{})}),a.jsx(He,{type:"monotone",dataKey:"efficiency",stroke:"#3B82F6",strokeWidth:2,dot:{fill:"#3B82F6",r:4}})]})})}),a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(K,{className:"w-5 h-5 text-gray-600"}),a.jsx("h3",{className:"font-semibold text-gray-900",children:"Performance"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"On-Time Rate"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-16 h-2 bg-gray-200 rounded-full",children:a.jsx("div",{className:"w-14 h-2 bg-green-500 rounded-full"})}),a.jsx("span",{className:"text-sm font-medium",children:"87%"})]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Customer Rating"}),a.jsxs("div",{className:"flex items-center gap-1",children:[[...Array(5)].map((e,t)=>a.jsx(H,{size:12,className:t<4?"text-yellow-400 fill-current":"text-gray-300"},t)),a.jsx("span",{className:"text-sm font-medium ml-1",children:"4.6"})]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Completion Rate"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-16 h-2 bg-gray-200 rounded-full",children:a.jsx("div",{className:"w-15 h-2 bg-blue-500 rounded-full"})}),a.jsx("span",{className:"text-sm font-medium",children:"94%"})]})]})]})]})})]}),a.jsx(Kt,{title:"Monthly Trip Trends",size:"full",action:"View Details",children:a.jsx(Fe,{width:"100%",height:300,children:a.jsxs(Ve,{data:Pt,children:[a.jsxs("defs",{children:[a.jsxs("linearGradient",{id:"colorTrips",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"5%",stopColor:"#3B82F6",stopOpacity:.8}),a.jsx("stop",{offset:"95%",stopColor:"#3B82F6",stopOpacity:0})]}),a.jsxs("linearGradient",{id:"colorDistance",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"5%",stopColor:"#10B981",stopOpacity:.8}),a.jsx("stop",{offset:"95%",stopColor:"#10B981",stopOpacity:0})]})]}),a.jsx($e,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),a.jsx(Ie,{dataKey:"month",axisLine:!1,tickLine:!1}),a.jsx(Ke,{axisLine:!1,tickLine:!1}),a.jsx(Oe,{content:a.jsx(Ht,{})}),a.jsx(Ue,{type:"monotone",dataKey:"trips",stroke:"#3B82F6",fillOpacity:1,fill:"url(#colorTrips)"}),a.jsx(Ue,{type:"monotone",dataKey:"distance",stroke:"#10B981",fillOpacity:1,fill:"url(#colorDistance)"})]})})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[a.jsx(Kt,{title:"Popular Routes",children:a.jsx("div",{className:"space-y-3",children:Wt.map((e,t)=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900 text-sm",children:e.route}),a.jsxs("div",{className:"text-xs text-gray-500",children:[e.trips," trips"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-20 h-2 bg-gray-200 rounded-full",children:a.jsx("div",{className:"h-2 bg-blue-500 rounded-full",style:{width:`${e.percentage}%`}})}),a.jsxs("span",{className:"text-sm font-medium text-gray-600",children:[e.percentage,"%"]})]})]},t))})}),a.jsx(Kt,{title:"Peak Hours Analysis",children:a.jsx(Fe,{width:"100%",height:200,children:a.jsxs(Ge,{data:$t,children:[a.jsx($e,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),a.jsx(Ie,{dataKey:"hour",axisLine:!1,tickLine:!1,tick:{fontSize:12}}),a.jsx(Ke,{axisLine:!1,tickLine:!1,tick:{fontSize:12}}),a.jsx(Oe,{content:a.jsx(Ht,{})}),a.jsx(_e,{dataKey:"trips",fill:"#3B82F6",radius:[8,8,8,8]})]})})})]}),a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(O,{className:"w-5 h-5 text-gray-600"}),a.jsx("h3",{className:"font-semibold text-gray-900",children:"Recent Trips"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"View All"}),a.jsx(V,{size:16,className:"text-gray-400"})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"text-left py-3 px-4 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),a.jsx("th",{className:"text-left py-3 px-4 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Route"}),a.jsx("th",{className:"text-left py-3 px-4 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Distance"}),a.jsx("th",{className:"text-left py-3 px-4 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Passengers"}),a.jsx("th",{className:"text-left py-3 px-4 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Duration"}),a.jsx("th",{className:"text-left py-3 px-4 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"text-left py-3 px-4 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Revenue"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-100",children:[{date:"2024-06-17",route:"Lilongwe → Blantyre",distance:"312 km",passengers:8,duration:"4h 15m",status:"completed",revenue:"MWK 12,400"},{date:"2024-06-17",route:"Blantyre → Zomba",distance:"67 km",passengers:5,duration:"1h 30m",status:"completed",revenue:"MWK 5,200"},{date:"2024-06-16",route:"Mzuzu → Lilongwe",distance:"278 km",passengers:6,duration:"3h 45m",status:"completed",revenue:"MWK 10,800"},{date:"2024-06-16",route:"Lilongwe → Kasungu",distance:"112 km",passengers:4,duration:"2h 10m",status:"completed",revenue:"MWK 6,400"},{date:"2024-06-15",route:"Blantyre → Lilongwe",distance:"312 km",passengers:7,duration:"4h 20m",status:"completed",revenue:"MWK 11,800"}].map((e,t)=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"py-3 px-4 text-sm text-gray-900",children:e.date}),a.jsx("td",{className:"py-3 px-4 text-sm font-medium text-gray-900",children:e.route}),a.jsx("td",{className:"py-3 px-4 text-sm text-gray-600",children:e.distance}),a.jsx("td",{className:"py-3 px-4 text-sm text-gray-600",children:e.passengers}),a.jsx("td",{className:"py-3 px-4 text-sm text-gray-600",children:e.duration}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full "+("completed"===e.status?"bg-green-100 text-green-800":"in-progress"===e.status?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"),children:e.status})}),a.jsx("td",{className:"py-3 px-4 text-sm font-medium text-gray-900",children:e.revenue})]},t))})]})})]})]})})},Ut=Object.freeze(Object.defineProperty({__proto__:null,default:Vt},Symbol.toStringTag,{value:"Module"})),Gt={totalVehicles:3,activeVehicles:2,inMaintenance:1,totalMileage:245680,avgFuelEfficiency:9.8,maintenanceCosts:45600,nextServiceDue:"Toyota Hiace - 2 days",healthScore:87},_t=[{id:1,name:"Toyota Hiace",plateNumber:"MW-LL-1234",model:"2019 Toyota Hiace",mileage:89450,fuelLevel:75,healthScore:92,status:"active",lastService:"2024-05-15",nextService:"2024-06-20",servicesOverdue:0,fuelEfficiency:10.2,maintenanceCost:12400,batteryLevel:98,engineTemp:"Normal",tireCondition:"Good"},{id:2,name:"Nissan NV200",plateNumber:"MW-BT-5678",model:"2020 Nissan NV200",mileage:67230,fuelLevel:45,healthScore:78,status:"maintenance",lastService:"2024-06-10",nextService:"2024-06-25",servicesOverdue:1,fuelEfficiency:9.8,maintenanceCost:18200,batteryLevel:85,engineTemp:"High",tireCondition:"Fair"},{id:3,name:"Ford Transit",plateNumber:"MW-MZ-9012",model:"2018 Ford Transit",mileage:124500,fuelLevel:60,healthScore:85,status:"active",lastService:"2024-06-01",nextService:"2024-07-01",servicesOverdue:0,fuelEfficiency:9.5,maintenanceCost:15e3,batteryLevel:92,engineTemp:"Normal",tireCondition:"Good"}],qt=[{name:"Up to Date",value:2,color:"#10B981"},{name:"Due Soon",value:1,color:"#F59E0B"},{name:"Overdue",value:1,color:"#EF4444"}],Jt=[{month:"Jan",consumption:450,cost:18e3},{month:"Feb",consumption:420,cost:16800},{month:"Mar",consumption:480,cost:19200},{month:"Apr",consumption:460,cost:18400},{month:"May",consumption:510,cost:20400},{month:"Jun",consumption:485,cost:19400}],Yt=[{month:"Jan",cost:8500},{month:"Feb",cost:12e3},{month:"Mar",cost:6800},{month:"Apr",cost:9200},{month:"May",cost:15600},{month:"Jun",cost:7400}],Zt=[{id:1,vehicle:"Toyota Hiace",service:"Oil Change & Filter",date:"2024-06-15",cost:3200,status:"completed",nextDue:"2024-09-15",mileage:89200},{id:2,vehicle:"Nissan NV200",service:"Brake Inspection",date:"2024-06-10",cost:5600,status:"completed",nextDue:"2024-12-10",mileage:67100},{id:3,vehicle:"Ford Transit",service:"Tire Rotation",date:"2024-06-01",cost:2800,status:"completed",nextDue:"2024-09-01",mileage:124200},{id:4,vehicle:"Toyota Hiace",service:"Engine Diagnostic",date:"2024-05-20",cost:4500,status:"completed",nextDue:"2024-11-20",mileage:88800}],Xt=[{vehicle:"Toyota Hiace",service:"Engine Oil Change",dueDate:"2024-06-20",daysLeft:2,priority:"high",estimatedCost:3500},{vehicle:"Ford Transit",service:"Brake Pad Replacement",dueDate:"2024-06-25",daysLeft:7,priority:"medium",estimatedCost:8500},{vehicle:"Nissan NV200",service:"AC System Check",dueDate:"2024-07-01",daysLeft:14,priority:"low",estimatedCost:4200}],Qt=({title:e,value:t,icon:s,color:r,trend:i,subtitle:n,prefix:l="",suffix:o="",size:c="normal"})=>{const d="large"===c?"col-span-2":"",x="large"===c?"text-4xl":"text-2xl";return a.jsxs("div",{className:`bg-white rounded-lg border border-gray-200 p-4 hover:shadow-md transition-shadow ${d}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("div",{className:"p-2 rounded-lg "+("blue"===r?"bg-blue-50":"green"===r?"bg-emerald-50":"purple"===r?"bg-purple-50":"orange"===r?"bg-orange-50":"red"===r?"bg-red-50":"bg-gray-50"),children:a.jsx(s,{size:20,className:"blue"===r?"text-blue-600":"green"===r?"text-emerald-600":"purple"===r?"text-purple-600":"orange"===r?"text-orange-600":"red"===r?"text-red-600":"text-gray-600"})}),i&&a.jsxs("div",{className:"flex items-center gap-1",children:[i>0?a.jsx(v,{size:14,className:"text-emerald-500"}):a.jsx(P,{size:14,className:"text-red-500"}),a.jsxs("span",{className:"text-xs font-medium "+(i>0?"text-emerald-500":"text-red-500"),children:[i>0?"+":"",i,"%"]})]})]}),a.jsxs("div",{className:`${x} font-bold text-gray-900 mb-1`,children:[l,t,o]}),a.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:e}),n&&a.jsx("div",{className:"text-xs text-gray-400",children:n})]})},es=({title:e,children:t,action:s,size:r="normal"})=>{const i="large"===r?"col-span-2":"full"===r?"col-span-full":"";return a.jsxs("div",{className:`bg-white rounded-lg border border-gray-200 p-4 ${i}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:e}),s&&a.jsx("button",{className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:s})]}),t]})},ts=({vehicle:e})=>{return a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 hover:shadow-md transition-shadow",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-blue-50 rounded-lg",children:a.jsx(U,{className:"w-5 h-5 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-gray-900",children:e.name}),a.jsx("p",{className:"text-sm text-gray-500",children:e.plateNumber})]})]}),a.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${(e=>{switch(e){case"active":return"bg-green-100 text-green-800";case"maintenance":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}})(e.status)}`,children:e.status})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[a.jsxs("div",{className:"text-center p-2 bg-gray-50 rounded",children:[a.jsx("div",{className:"text-lg font-bold text-gray-900",children:e.mileage.toLocaleString()}),a.jsx("div",{className:"text-xs text-gray-500",children:"Mileage (km)"})]}),a.jsxs("div",{className:"text-center p-2 bg-gray-50 rounded",children:[a.jsxs("div",{className:"text-lg font-bold "+(t=e.healthScore,t>=90?"text-green-600":t>=70?"text-yellow-600":"text-red-600"),children:[e.healthScore,"%"]}),a.jsx("div",{className:"text-xs text-gray-500",children:"Health Score"})]})]}),a.jsxs("div",{className:"space-y-2 mb-3",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-xs text-gray-600",children:"Fuel Level"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-16 h-2 bg-gray-200 rounded-full",children:a.jsx("div",{className:"h-2 rounded-full "+(e.fuelLevel>50?"bg-green-500":e.fuelLevel>25?"bg-yellow-500":"bg-red-500"),style:{width:`${e.fuelLevel}%`}})}),a.jsxs("span",{className:"text-xs font-medium",children:[e.fuelLevel,"%"]})]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-xs text-gray-600",children:"Battery"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(R,{className:"w-3 h-3 text-gray-500"}),a.jsxs("span",{className:"text-xs font-medium",children:[e.batteryLevel,"%"]})]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-xs text-gray-600",children:"Engine Temp"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(q,{className:"w-3 h-3 text-gray-500"}),a.jsx("span",{className:"text-xs font-medium "+("Normal"===e.engineTemp?"text-green-600":"text-red-600"),children:e.engineTemp})]})]})]}),a.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-gray-100",children:[a.jsxs("span",{className:"text-xs text-gray-500",children:["Next Service: ",e.nextService]}),a.jsxs("div",{className:"flex gap-1",children:[a.jsx("button",{className:"p-1 text-gray-400 hover:text-blue-600",children:a.jsx(J,{size:14})}),a.jsx("button",{className:"p-1 text-gray-400 hover:text-blue-600",children:a.jsx(Y,{size:14})})]})]})]});var t},ss=({active:e,payload:t,label:s})=>e&&t&&t.length?a.jsxs("div",{className:"bg-white p-3 border border-gray-200 rounded-lg shadow-md",children:[a.jsx("p",{className:"font-medium text-gray-900",children:s}),t.map((e,t)=>a.jsxs("p",{className:"text-sm",style:{color:e.color},children:[e.name,": ",e.value]},t))]}):null,as=()=>{const[e,t]=s.useState("all"),[r,i]=s.useState(!1);return a.jsx("div",{className:"min-h-screen bg-gray-50",children:a.jsxs("main",{className:"p-4 space-y-4 max-w-7xl mx-auto",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Vehicle Management"}),a.jsxs("div",{className:"flex items-center gap-4 mt-1 text-sm text-gray-500",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(E,{className:"w-4 h-4 text-green-500"}),a.jsx("span",{children:"Real-time monitoring"})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(I,{className:"w-4 h-4 text-blue-500"}),a.jsxs("span",{children:["Fleet health: ",Gt.healthScore,"%"]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("select",{value:e,onChange:e=>t(e.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg text-sm font-medium text-gray-700 bg-white",children:[a.jsx("option",{value:"all",children:"All Vehicles"}),_t.map(e=>a.jsx("option",{value:e.id,children:e.name},e.id))]}),a.jsxs("button",{onClick:()=>{i(!0),setTimeout(()=>i(!1),1e3)},disabled:r,className:"flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600 transition-colors disabled:opacity-50",children:[a.jsx(T,{size:16,className:r?"animate-spin":""}),"Refresh"]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsx(Qt,{title:"Total Vehicles",value:Gt.totalVehicles,icon:U,color:"blue",subtitle:"In fleet"}),a.jsx(Qt,{title:"Active Vehicles",value:Gt.activeVehicles,icon:y,color:"green",trend:5,subtitle:"Currently operational"}),a.jsx(Qt,{title:"In Maintenance",value:Gt.inMaintenance,icon:G,color:"orange",subtitle:"Under service"}),a.jsx(Qt,{title:"Fleet Health",value:Gt.healthScore,suffix:"%",icon:I,color:"purple",trend:3,subtitle:"Overall condition"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsx(Qt,{title:"Total Mileage",value:Gt.totalMileage.toLocaleString(),suffix:" km",icon:O,color:"blue",trend:12}),a.jsx(Qt,{title:"Avg Fuel Efficiency",value:Gt.avgFuelEfficiency,suffix:" km/L",icon:W,color:"green",trend:-2}),a.jsx(Qt,{title:"Maintenance Costs",value:Gt.maintenanceCosts.toLocaleString(),prefix:"MWK ",icon:$,color:"red",trend:-8}),a.jsx(Qt,{title:"Next Service Due",value:"2 days",icon:o,color:"orange",subtitle:Gt.nextServiceDue})]}),a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(U,{className:"w-5 h-5 text-gray-600"}),a.jsx("h3",{className:"font-semibold text-gray-900",children:"Vehicle Fleet"})]}),a.jsxs("button",{className:"flex items-center gap-2 px-3 py-2 bg-blue-500 text-white rounded-lg text-sm font-medium hover:bg-blue-600",children:[a.jsx(_,{size:16}),"Add Vehicle"]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:_t.map(e=>a.jsx(ts,{vehicle:e},e.id))})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[a.jsxs(es,{title:"Maintenance Status",children:[a.jsx(Fe,{width:"100%",height:200,children:a.jsxs(Re,{children:[a.jsx(Pe,{data:qt,cx:"50%",cy:"50%",innerRadius:40,outerRadius:80,paddingAngle:5,dataKey:"value",children:qt.map((e,t)=>a.jsx(Be,{fill:e.color},`cell-${t}`))}),a.jsx(Oe,{content:a.jsx(ss,{})})]})}),a.jsx("div",{className:"flex justify-center gap-3 mt-2 text-xs",children:qt.map((e,t)=>a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:e.color}}),a.jsx("span",{className:"text-gray-600",children:e.name})]},t))})]}),a.jsx(es,{title:"Maintenance Costs",children:a.jsx(Fe,{width:"100%",height:200,children:a.jsxs(Ve,{data:Yt,children:[a.jsx("defs",{children:a.jsxs("linearGradient",{id:"colorCost",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"5%",stopColor:"#EF4444",stopOpacity:.8}),a.jsx("stop",{offset:"95%",stopColor:"#EF4444",stopOpacity:0})]})}),a.jsx($e,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),a.jsx(Ie,{dataKey:"month",axisLine:!1,tickLine:!1,tick:{fontSize:12}}),a.jsx(Ke,{axisLine:!1,tickLine:!1,tick:{fontSize:12}}),a.jsx(Oe,{content:a.jsx(ss,{})}),a.jsx(Ue,{type:"monotone",dataKey:"cost",stroke:"#EF4444",fillOpacity:1,fill:"url(#colorCost)"})]})})}),a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(x,{className:"w-5 h-5 text-gray-600"}),a.jsx("h3",{className:"font-semibold text-gray-900",children:"Service Alerts"})]}),a.jsx("div",{className:"space-y-3",children:Xt.slice(0,3).map((e,t)=>a.jsxs("div",{className:"p-3 rounded-lg border-l-3 "+("high"===e.priority?"bg-red-50 border-red-500":"medium"===e.priority?"bg-yellow-50 border-yellow-500":"bg-blue-50 border-blue-500"),children:[a.jsxs("div",{className:"flex justify-between items-start mb-1",children:[a.jsx("h4",{className:"font-medium text-gray-900 text-sm",children:e.vehicle}),a.jsxs("span",{className:"text-xs font-medium px-2 py-1 rounded "+("high"===e.priority?"bg-red-100 text-red-700":"medium"===e.priority?"bg-yellow-100 text-yellow-700":"bg-blue-100 text-blue-700"),children:[e.daysLeft," days"]})]}),a.jsx("p",{className:"text-xs text-gray-600 mb-2",children:e.service}),a.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[a.jsxs("span",{children:["Due: ",e.dueDate]}),a.jsxs("span",{children:["Est: MWK ",e.estimatedCost.toLocaleString()]})]})]},t))})]})]}),a.jsx(es,{title:"Fuel Consumption & Costs",size:"full",action:"View Details",children:a.jsx(Fe,{width:"100%",height:300,children:a.jsxs(Ge,{data:Jt,children:[a.jsx($e,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),a.jsx(Ie,{dataKey:"month",axisLine:!1,tickLine:!1}),a.jsx(Ke,{yAxisId:"left",axisLine:!1,tickLine:!1}),a.jsx(Ke,{yAxisId:"right",orientation:"right",axisLine:!1,tickLine:!1}),a.jsx(Oe,{content:a.jsx(ss,{})}),a.jsx(_e,{yAxisId:"left",dataKey:"consumption",fill:"#3B82F6",name:"Consumption (L)",radius:[8,8,8,8]}),a.jsx(He,{yAxisId:"right",type:"monotone",dataKey:"cost",stroke:"#EF4444",strokeWidth:2,name:"Cost (MWK)"})]})})}),a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(G,{className:"w-5 h-5 text-gray-600"}),a.jsx("h3",{className:"font-semibold text-gray-900",children:"Service History"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"View All"}),a.jsx(V,{size:16,className:"text-gray-400"})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"text-left py-3 px-4 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vehicle"}),a.jsx("th",{className:"text-left py-3 px-4 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Service"}),a.jsx("th",{className:"text-left py-3 px-4 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),a.jsx("th",{className:"text-left py-3 px-4 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Mileage"}),a.jsx("th",{className:"text-left py-3 px-4 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cost"}),a.jsx("th",{className:"text-left py-3 px-4 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"text-left py-3 px-4 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Next Due"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-100",children:Zt.map(e=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"py-3 px-4 text-sm font-medium text-gray-900",children:e.vehicle}),a.jsx("td",{className:"py-3 px-4 text-sm text-gray-900",children:e.service}),a.jsx("td",{className:"py-3 px-4 text-sm text-gray-600",children:e.date}),a.jsxs("td",{className:"py-3 px-4 text-sm text-gray-600",children:[e.mileage.toLocaleString()," km"]}),a.jsxs("td",{className:"py-3 px-4 text-sm text-gray-600",children:["MWK ",e.cost.toLocaleString()]}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800",children:e.status})}),a.jsx("td",{className:"py-3 px-4 text-sm text-gray-600",children:e.nextDue})]},e.id))})]})})]})]})})},rs=Object.freeze(Object.defineProperty({__proto__:null,default:as},Symbol.toStringTag,{value:"Module"})),is={totalAllowances:85600,totalExpenses:67800,pendingReimbursements:12400,currentBalance:5400,thisMonthExpenses:18600,thisMonthAllowances:28500,pendingApprovals:3,overdueClaims:1},ns=[{type:"Travel Allowance",amount:45e3,percentage:52,color:"#3B82F6"},{type:"Meal Allowance",amount:25e3,percentage:29,color:"#10B981"},{type:"Fuel Allowance",amount:15600,percentage:19,color:"#F59E0B"}],ls=[{category:"Fuel",amount:32e3,percentage:47,color:"#3B82F6"},{category:"Maintenance",amount:18500,percentage:27,color:"#EF4444"},{category:"Tolls & Parking",amount:8900,percentage:13,color:"#8B5CF6"},{category:"Meals",amount:5200,percentage:8,color:"#10B981"},{category:"Others",amount:3200,percentage:5,color:"#F59E0B"}],os=[{month:"Jan",allowances:28e3,expenses:22e3,balance:6e3},{month:"Feb",allowances:32e3,expenses:25e3,balance:7e3},{month:"Mar",allowances:29e3,expenses:28e3,balance:1e3},{month:"Apr",allowances:35e3,expenses:3e4,balance:5e3},{month:"May",allowances:31e3,expenses:26e3,balance:5e3},{month:"Jun",allowances:28500,expenses:24e3,balance:4500}],cs=[{id:1,type:"allowance",category:"Travel Allowance",amount:12e3,date:"2024-06-17",status:"approved",reference:"TRV-2024-0617",description:"Weekly travel allowance"},{id:2,type:"expense",category:"Fuel",amount:-8500,date:"2024-06-16",status:"pending",reference:"EXP-2024-0616",description:"Fuel purchase - Puma Station"},{id:3,type:"expense",category:"Maintenance",amount:-4200,date:"2024-06-15",status:"approved",reference:"EXP-2024-0615",description:"Vehicle oil change"},{id:4,type:"allowance",category:"Meal Allowance",amount:5e3,date:"2024-06-15",status:"approved",reference:"MEAL-2024-0615",description:"Daily meal allowance"},{id:5,type:"expense",category:"Tolls",amount:-1200,date:"2024-06-14",status:"rejected",reference:"EXP-2024-0614",description:"Highway toll payment"}],ds=[{id:1,type:"Fuel Reimbursement",amount:8500,submittedDate:"2024-06-16",expectedApproval:"2024-06-20",status:"under_review",receipts:1},{id:2,type:"Parking Fees",amount:2400,submittedDate:"2024-06-15",expectedApproval:"2024-06-19",status:"pending_documents",receipts:0},{id:3,type:"Emergency Repair",amount:15e3,submittedDate:"2024-06-10",expectedApproval:"2024-06-18",status:"approved",receipts:3}],xs=({title:e,value:t,icon:s,color:r,trend:i,subtitle:n,prefix:l="",suffix:o="",size:c="normal"})=>{const d="large"===c?"col-span-2":"",x="large"===c?"text-4xl":"text-2xl";return a.jsxs("div",{className:`bg-white rounded-lg border border-gray-200 p-4 hover:shadow-md transition-shadow ${d}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("div",{className:"p-2 rounded-lg "+("blue"===r?"bg-blue-50":"green"===r?"bg-emerald-50":"purple"===r?"bg-purple-50":"orange"===r?"bg-orange-50":"red"===r?"bg-red-50":"bg-gray-50"),children:a.jsx(s,{size:20,className:"blue"===r?"text-blue-600":"green"===r?"text-emerald-600":"purple"===r?"text-purple-600":"orange"===r?"text-orange-600":"red"===r?"text-red-600":"text-gray-600"})}),i&&a.jsxs("div",{className:"flex items-center gap-1",children:[i>0?a.jsx(v,{size:14,className:"text-emerald-500"}):a.jsx(P,{size:14,className:"text-red-500"}),a.jsxs("span",{className:"text-xs font-medium "+(i>0?"text-emerald-500":"text-red-500"),children:[i>0?"+":"",i,"%"]})]})]}),a.jsxs("div",{className:`${x} font-bold text-gray-900 mb-1`,children:[l,t,o]}),a.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:e}),n&&a.jsx("div",{className:"text-xs text-gray-400",children:n})]})},ms=({title:e,children:t,action:s,size:r="normal"})=>{const i="large"===r?"col-span-2":"full"===r?"col-span-full":"";return a.jsxs("div",{className:`bg-white rounded-lg border border-gray-200 p-4 ${i}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:e}),s&&a.jsx("button",{className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:s})]}),t]})},ps=({transaction:e})=>{return a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"py-3 px-4 text-sm text-gray-900",children:a.jsxs("div",{className:"flex items-center gap-2",children:["allowance"===e.type?a.jsx(ae,{className:"w-4 h-4 text-green-500"}):a.jsx(re,{className:"w-4 h-4 text-red-500"}),e.date]})}),a.jsx("td",{className:"py-3 px-4 text-sm font-medium text-gray-900",children:e.category}),a.jsx("td",{className:"py-3 px-4 text-sm text-gray-600",children:e.description}),a.jsx("td",{className:"py-3 px-4 text-sm font-medium",children:a.jsxs("span",{className:(t=e.amount,t>0?"text-green-600":"text-red-600"),children:["MWK ",Math.abs(e.amount).toLocaleString()]})}),a.jsx("td",{className:"py-3 px-4 text-sm text-gray-600",children:e.reference}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${(e=>{switch(e){case"approved":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"rejected":return"bg-red-100 text-red-800";case"under_review":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}})(e.status)}`,children:e.status.replace("_"," ")})}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{className:"flex gap-1",children:[a.jsx("button",{className:"p-1 text-gray-400 hover:text-blue-600",children:a.jsx(J,{size:14})}),a.jsx("button",{className:"p-1 text-gray-400 hover:text-blue-600",children:a.jsx(Y,{size:14})})]})})]});var t},gs=({active:e,payload:t,label:s})=>e&&t&&t.length?a.jsxs("div",{className:"bg-white p-3 border border-gray-200 rounded-lg shadow-md",children:[a.jsx("p",{className:"font-medium text-gray-900",children:s}),t.map((e,t)=>a.jsxs("p",{className:"text-sm",style:{color:e.color},children:[e.name,": MWK ",e.value?.toLocaleString()]},t))]}):null,hs=()=>{const[e,t]=s.useState("overview"),[r,i]=s.useState(!1),[n,l]=s.useState(!1);return a.jsx("div",{className:"min-h-screen bg-gray-50",children:a.jsxs("main",{className:"p-4 space-y-4 max-w-7xl mx-auto",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Financial Reconciliation"}),a.jsxs("div",{className:"flex items-center gap-4 mt-1 text-sm text-gray-500",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(E,{className:"w-4 h-4 text-green-500"}),a.jsx("span",{children:"Real-time tracking"})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(o,{className:"w-4 h-4 text-blue-500"}),a.jsx("span",{children:"Current month"})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:()=>l(!0),className:"flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded-lg font-medium hover:bg-green-600 transition-colors",children:[a.jsx(_,{size:16}),"Submit Expense"]}),a.jsxs("button",{onClick:()=>{i(!0),setTimeout(()=>i(!1),1e3)},disabled:r,className:"flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600 transition-colors disabled:opacity-50",children:[a.jsx(T,{size:16,className:r?"animate-spin":""}),"Refresh"]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsx(xs,{title:"Total Allowances",value:is.totalAllowances.toLocaleString(),prefix:"MWK ",icon:Z,color:"green",trend:15,subtitle:"This month"}),a.jsx(xs,{title:"Total Expenses",value:is.totalExpenses.toLocaleString(),prefix:"MWK ",icon:X,color:"red",trend:-8,subtitle:"This month"}),a.jsx(xs,{title:"Pending Reimbursements",value:is.pendingReimbursements.toLocaleString(),prefix:"MWK ",icon:d,color:"orange",subtitle:"Awaiting approval"}),a.jsx(xs,{title:"Current Balance",value:is.currentBalance.toLocaleString(),prefix:"MWK ",icon:$,color:"blue",trend:12,subtitle:"Available funds"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsx(xs,{title:"Month Allowances",value:is.thisMonthAllowances.toLocaleString(),prefix:"MWK ",icon:K,color:"green",trend:8}),a.jsx(xs,{title:"Month Expenses",value:is.thisMonthExpenses.toLocaleString(),prefix:"MWK ",icon:Q,color:"purple",trend:-3}),a.jsx(xs,{title:"Pending Approvals",value:is.pendingApprovals,icon:y,color:"orange",subtitle:"Items to review"}),a.jsx(xs,{title:"Overdue Claims",value:is.overdueClaims,icon:j,color:"red",subtitle:"Need attention"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[a.jsxs(ms,{title:"Allowance Breakdown",children:[a.jsx(Fe,{width:"100%",height:200,children:a.jsxs(Re,{children:[a.jsx(Pe,{data:ns,cx:"50%",cy:"50%",innerRadius:40,outerRadius:80,paddingAngle:5,dataKey:"amount",children:ns.map((e,t)=>a.jsx(Be,{fill:e.color},`cell-${t}`))}),a.jsx(Oe,{content:a.jsx(gs,{})})]})}),a.jsx("div",{className:"space-y-1 mt-2",children:ns.map((e,t)=>a.jsxs("div",{className:"flex items-center justify-between text-xs",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:e.color}}),a.jsx("span",{className:"text-gray-600",children:e.type})]}),a.jsxs("span",{className:"font-medium",children:["MWK ",e.amount.toLocaleString()]})]},t))})]}),a.jsxs(ms,{title:"Expense Categories",children:[a.jsx(Fe,{width:"100%",height:200,children:a.jsxs(Re,{children:[a.jsx(Pe,{data:ls,cx:"50%",cy:"50%",innerRadius:40,outerRadius:80,paddingAngle:5,dataKey:"amount",children:ls.map((e,t)=>a.jsx(Be,{fill:e.color},`cell-${t}`))}),a.jsx(Oe,{content:a.jsx(gs,{})})]})}),a.jsx("div",{className:"space-y-1 mt-2",children:ls.slice(0,3).map((e,t)=>a.jsxs("div",{className:"flex items-center justify-between text-xs",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:e.color}}),a.jsx("span",{className:"text-gray-600",children:e.category})]}),a.jsxs("span",{className:"font-medium",children:["MWK ",e.amount.toLocaleString()]})]},t))})]}),a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(b,{className:"w-5 h-5 text-gray-600"}),a.jsx("h3",{className:"font-semibold text-gray-900",children:"Pending Claims"})]}),a.jsx("div",{className:"space-y-3",children:ds.map((e,t)=>a.jsxs("div",{className:"p-3 rounded-lg border-l-3 "+("approved"===e.status?"bg-green-50 border-green-500":"under_review"===e.status?"bg-blue-50 border-blue-500":"bg-yellow-50 border-yellow-500"),children:[a.jsxs("div",{className:"flex justify-between items-start mb-1",children:[a.jsx("h4",{className:"font-medium text-gray-900 text-sm",children:e.type}),a.jsxs("span",{className:"text-sm font-bold text-gray-900",children:["MWK ",e.amount.toLocaleString()]})]}),a.jsxs("p",{className:"text-xs text-gray-600 mb-2",children:["Submitted: ",e.submittedDate]}),a.jsxs("div",{className:"flex justify-between items-center text-xs",children:[a.jsx("span",{className:"px-2 py-1 rounded font-medium "+("approved"===e.status?"bg-green-100 text-green-700":"under_review"===e.status?"bg-blue-100 text-blue-700":"bg-yellow-100 text-yellow-700"),children:e.status.replace("_"," ")}),a.jsxs("div",{className:"flex items-center gap-1 text-gray-500",children:[a.jsx(ee,{size:12}),a.jsxs("span",{children:[e.receipts," receipts"]})]})]})]},t))})]})]}),a.jsx(ms,{title:"Financial Trends",size:"full",action:"View Details",children:a.jsx(Fe,{width:"100%",height:300,children:a.jsxs(Ve,{data:os,children:[a.jsxs("defs",{children:[a.jsxs("linearGradient",{id:"colorAllowances",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"5%",stopColor:"#10B981",stopOpacity:.8}),a.jsx("stop",{offset:"95%",stopColor:"#10B981",stopOpacity:0})]}),a.jsxs("linearGradient",{id:"colorExpenses",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"5%",stopColor:"#EF4444",stopOpacity:.8}),a.jsx("stop",{offset:"95%",stopColor:"#EF4444",stopOpacity:0})]})]}),a.jsx($e,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),a.jsx(Ie,{dataKey:"month",axisLine:!1,tickLine:!1}),a.jsx(Ke,{axisLine:!1,tickLine:!1}),a.jsx(Oe,{content:a.jsx(gs,{})}),a.jsx(Ue,{type:"monotone",dataKey:"allowances",stroke:"#10B981",fillOpacity:1,fill:"url(#colorAllowances)",name:"Allowances"}),a.jsx(Ue,{type:"monotone",dataKey:"expenses",stroke:"#EF4444",fillOpacity:1,fill:"url(#colorExpenses)",name:"Expenses"}),a.jsx(He,{type:"monotone",dataKey:"balance",stroke:"#3B82F6",strokeWidth:2,name:"Balance"})]})})}),a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(E,{className:"w-5 h-5 text-gray-600"}),a.jsx("h3",{className:"font-semibold text-gray-900",children:"Recent Transactions"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"View All"}),a.jsx(V,{size:16,className:"text-gray-400"})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"text-left py-3 px-4 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),a.jsx("th",{className:"text-left py-3 px-4 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),a.jsx("th",{className:"text-left py-3 px-4 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),a.jsx("th",{className:"text-left py-3 px-4 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),a.jsx("th",{className:"text-left py-3 px-4 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reference"}),a.jsx("th",{className:"text-left py-3 px-4 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"text-left py-3 px-4 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-100",children:cs.map(e=>a.jsx(ps,{transaction:e},e.id))})]})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[a.jsx("div",{className:"p-2 bg-blue-50 rounded-lg",children:a.jsx(te,{className:"w-5 h-5 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-gray-900",children:"Submit Expense"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Upload receipts and submit for approval"})]})]}),a.jsx("button",{className:"w-full py-2 px-4 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600 transition-colors",children:"Submit New Expense"})]}),a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[a.jsx("div",{className:"p-2 bg-green-50 rounded-lg",children:a.jsx(se,{className:"w-5 h-5 text-green-600"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-gray-900",children:"Download Reports"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Export financial summaries and statements"})]})]}),a.jsx("button",{className:"w-full py-2 px-4 bg-green-500 text-white rounded-lg font-medium hover:bg-green-600 transition-colors",children:"Download Report"})]}),a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[a.jsx("div",{className:"p-2 bg-purple-50 rounded-lg",children:a.jsx(b,{className:"w-5 h-5 text-purple-600"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-gray-900",children:"View Statements"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Access detailed financial statements"})]})]}),a.jsx("button",{className:"w-full py-2 px-4 bg-purple-500 text-white rounded-lg font-medium hover:bg-purple-600 transition-colors",children:"View Statements"})]})]})]})})},us=Object.freeze(Object.defineProperty({__proto__:null,default:hs},Symbol.toStringTag,{value:"Module"}));ce(je)(({theme:e})=>({width:240,flexShrink:0,"& .MuiDrawer-paper":{width:240,boxSizing:"border-box",backgroundColor:e.palette.background.default,borderRight:`1px solid ${e.palette.divider}`,backgroundImage:"none",boxShadow:"none"}})),ce(ye)(({theme:e,selected:t})=>({borderRadius:e.shape.borderRadius,margin:e.spacing(.25,1.5),padding:e.spacing(.75,1.5),minHeight:40,"&.Mui-selected":{backgroundColor:me(e.palette.primary.main,.1),"&:hover":{backgroundColor:me(e.palette.primary.main,.15)},"& .MuiListItemIcon-root":{color:e.palette.primary.main},"& .MuiListItemText-primary":{fontWeight:600,fontSize:"0.875rem"}},"&:hover":{backgroundColor:e.palette.action.hover},"& .MuiListItemIcon-root":{minWidth:36},"& .MuiListItemText-root":{marginTop:2,marginBottom:2}})),ce("div")(({theme:e})=>({display:"flex",alignItems:"center",padding:e.spacing(2,1.5),...e.mixins.toolbar})),ce(xe)(({theme:e})=>({padding:e.spacing(1.5,2,1),color:e.palette.text.secondary,fontSize:"0.75rem",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.5px"})),ce(we)(({theme:e})=>({height:"100%",borderRadius:1.5*e.shape.borderRadius,boxShadow:e.shadows[1],transition:"transform 0.2s, box-shadow 0.2s","&:hover":{transform:"translateY(-2px)",boxShadow:e.shadows[3]},"& .MuiCardContent-root":{padding:e.spacing(2)}})),ce(ke)(({theme:e})=>({padding:e.spacing(1.5),borderRadius:1.5*e.shape.borderRadius,border:`1px solid ${e.palette.divider}`,transition:"transform 0.2s, box-shadow 0.2s","&:hover":{transform:"translateY(-1px)",boxShadow:e.shadows[1]}})),ce(we)(({theme:e})=>({borderRadius:2*e.shape.borderRadius,overflow:"hidden",transition:"transform 0.2s, box-shadow 0.2s","&:hover":{transform:"translateY(-2px)",boxShadow:e.shadows[3]}}));const fs=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const t=e(),r=le(),[n,l]=s.useState({requisitions:{counts:{total:0,pending:0}},rfqs:{counts:{total:0,open:0}},purchaseOrders:{counts:{total:0,pending:0}},invoices:{counts:{total:0,pending:0}}}),[o,c]=s.useState(null),[d,x]=s.useState(!1),[m]=i(),[p,g]=s.useState(()=>m.get("section")||"vendor-dash"),[h,u]=s.useState(null),[f,b]=s.useState([]),[j,y]=s.useState([]),[v,N]=s.useState(""),[w,k]=s.useState({available:12,onTrip:5,offline:2,maintenance:1}),[S,C]=s.useState(!1),{user:M,loading:L}=ie(),T=M?{...M,name:M.firstName?`${M.firstName} ${M.lastName||""}`.trim():"Guest User",avatar:M.avatar||null,email:M.email||"",role:M.role||"guest",companyName:M.companyName||"NyasaSC"}:{name:"Guest User",avatar:null,email:"",role:"guest",companyName:"NyasaSC"};s.useEffect(()=>{"geolocation"in navigator&&navigator.permissions.query({name:"geolocation"}).then(e=>{if("prompt"===e.state){window.confirm("For accurate fleet tracking, we need your location permission. This will help us provide better service and accurate tracking. Allow location access?")&&navigator.geolocation.getCurrentPosition(e=>{},e=>{})}})},[]),s.useEffect(()=>{const e=m.get("section")||"vendor-dash";g(e)},[m]);const[A,z]=s.useState(!0),[D,E]=s.useState(0),F=e=>{g(e),t(`?section=${e}`,{replace:!0})};return s.useEffect(()=>{const e=()=>{E(window.pageYOffset)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]),s.useEffect(()=>{const e=()=>{const e=localStorage.getItem("sidebarOpen");null!==e&&z(JSON.parse(e))},t=e=>{z(e.detail.open)};return window.addEventListener("storage",e),window.addEventListener("sidebarToggle",t),e(),()=>{window.removeEventListener("storage",e),window.removeEventListener("sidebarToggle",t)}},[]),a.jsxs(de,{sx:{background:"linear-gradient(135deg,rgb(1, 4, 17) 0%,rgb(54, 79, 100) 100%)",display:"flex",height:"100vh",overflow:"hidden"},children:[a.jsx(vt,{stats:n,activeSection:p,handleSectionChange:F,onSidebarToggle:z,user:T}),a.jsxs(de,{component:"main",sx:{flexGrow:1,overflow:"auto",backgroundColor:r.palette.background.default,position:"relative"},children:[a.jsx(St,{user:T,onMobileMenuToggle:C,scrollPosition:D,handleSectionChange:F,sidebarOpen:A,sidebarWidth:256,collapsedSidebarWidth:70}),a.jsx(de,{sx:{paddingTop:"80px",minHeight:"calc(100vh - 64px)",position:"relative",zIndex:1,padding:"80px 1.5rem 1.5rem"},children:"vendor-dash"===p?a.jsxs(de,{sx:{maxWidth:"100%",margin:"0 auto"},children:[a.jsx(de,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,flexDirection:{xs:"column",sm:"row"},gap:{xs:1,sm:0},textAlign:{xs:"center",sm:"left"}},children:a.jsxs(de,{children:[a.jsx(xe,{variant:"h5",component:"h1",gutterBottom:!0,sx:{fontWeight:700,color:"black"},children:"Drivers Dashboard"}),a.jsxs(xe,{variant:"body1",sx:{fontSize:"0.875rem",fontWeight:400,color:"black"},children:["Welcome back, ",T.firstName.charAt(0).toUpperCase()+T.firstName.slice(1),". Here's your current driving status."]})]})}),a.jsx(Ft,{drivers:v?j:f,selectedDriver:h,onDriverSelect:u})]}):a.jsxs(de,{children:["trip-management"===p&&a.jsx(Vt,{}),"vehicle-management"===p&&a.jsx(as,{}),"driver-reconciliation"===p&&a.jsx(hs,{})]})})]}),a.jsx(De,{user:T})]})}},Symbol.toStringTag,{value:"Module"}));export{fs as d,us as r,Ut as t,rs as v};
